function initStickyHeader(){var win=jQuery(window),staticClass="absolute-position",oldScroll=win.scrollTop();jQuery("#header").each(function(){var timer,holder=jQuery(this),box=holder.find(".nav-box"),frame=holder.find(".nav-inner"),disabled=(holder.find("#nav"),!1),navVisible=!1,setPosition=function(){var curScroll=win.scrollTop();if(!(curScroll<0)){if(win.width()<1024)curScroll<oldScroll?holder.hasClass(staticClass)?holder.offset().top>=curScroll&&holder.outerHeight()+frame.outerHeight()<=win.height()&&holder.removeClass(staticClass).css({top:""}):(holder.hasClass("inner-view")&&holder.removeClass("inner-view").css({top:""}),holder.hasClass(staticClass)||holder.hasClass("fixed")||holder.addClass("fixed").css({top:"0"}),0==curScroll&&holder.removeClass("fixed")):holder.hasClass("fixed")&&holder.addClass("inner-view").removeClass("fixed").css({top:oldScroll});else{if(oldScroll<curScroll)return oldScroll=curScroll,void(!holder.hasClass("fixed")||holder.hasClass(staticClass)||holder.hasClass("inner-view")||(holder.addClass("inner-view"),frame.css({top:oldScroll})));holder.hasClass("inner-view")&&(holder.removeClass("inner-view"),frame.add(holder).css({top:""})),disabled||(curScroll>box.offset().top?holder.hasClass("fixed")||holder.addClass("fixed"):holder.hasClass("fixed")&&holder.removeClass("fixed"))}oldScroll=curScroll}};holder.on("itemhover",function(){if(win.width()>1023){var activeItem=jQuery("#nav li.hover");if(activeItem.length){var drop=activeItem.find(".drop-holder");if(drop.length&&frame.outerHeight()+drop.outerHeight()>win.height()){if(disabled=!0,win.scrollTop()<=box.offset().top)return;holder.addClass(staticClass),frame.css({top:win.scrollTop()})}}}}).on("itemleave",function(){win.width()>1023&&(disabled=!1,holder.hasClass(staticClass)&&(holder.removeClass(staticClass),frame.add(holder).css({top:""})),setPosition())}),win.on("navShow",function(){clearTimeout(timer),timer=setTimeout(function(){navVisible=!0,holder.addClass(staticClass).css({top:win.scrollTop()})},300)}).on("navHide",function(){clearTimeout(timer),timer=setTimeout(function(){navVisible=!1,holder.removeClass(staticClass).removeClass("inner-view").css({top:""})},300)}),win.on("scroll",setPosition)})}function loadContextBreadcrumbs(url){"object"==typeof url?setContextBreadcrumbs(url):"string"==typeof url&&(url.length?jQuery.ajax({url:url,type:"post",dataType:"json",success:function(data){setContextBreadcrumbs(data)}}):removeContextCookies())}function appendContextBreadcrumbs(obj,level){if(jQuery.cookie("breadcrumbs")){var data=jQuery.cookie("breadcrumbs");if(data.breadcrumbs.length<=level)obj.breadcrumbs.forEach(function(el){data.breadcrumbs.push(el)}),setContextBreadcrumbs(data);else if(data.breadcrumbs.length>level){for(data.breadcrumbs.length;data.breadcrumbs.length>level;)data.breadcrumbs.pop();setContextBreadcrumbs(data),showContextBreadcrumbs(data),obj.breadcrumbs.forEach(function(el){data.breadcrumbs.push(el)}),setContextBreadcrumbs(data)}}}function removeContextCookies(){jQuery.cookie("breadcrumbs",null)}function setContextBreadcrumbs(obj){jQuery.cookie.json=!0,jQuery.cookie("breadcrumbs",obj,{path:"/"})}function showContextBreadcrumbs(){if(jQuery.cookie.json=!0,jQuery("[data-context-url]").length)loadContextBreadcrumbs(jQuery("[data-context-url]").eq(0).data("contextUrl"));else if(jQuery(".breadcrumbContext").length&&jQuery.cookie("breadcrumbs")){if(!jQuery("#title_tmpl").length||!jQuery("#cat_tmpl").length)return void(window.console&&console.log('templates "title_tmpl" and "cat_tmpl" are missing!'));var breadcrumbsList=jQuery(".breadcrumbs .holder > ul"),titleBox=jQuery(".banner-box .holder");breadcrumbsList.length&&function(){var cookieData=jQuery.cookie("breadcrumbs"),html="";cookieData.breadcrumbs&&cookieData.breadcrumbs.forEach(function(currentItem){html+=tmpl("cat_tmpl",currentItem)}),cookieData.className&&breadcrumbsList.closest(".breadcrumbs").removeClass().addClass("breadcrumbs breadcrumbContext").addClass(cookieData.className),html.length&&breadcrumbsList.html(html)}(),titleBox.length&&function(){var cookieData=jQuery.cookie("breadcrumbs"),html="";cookieData.mainTitle&&(html+=tmpl("title_tmpl",cookieData)),cookieData.className&&titleBox.closest(".banner-box").removeClass().addClass("banner-box").addClass(cookieData.className),html.length&&titleBox.html(html)}(),breadcrumbsPluggins()}}function breadcrumbsPluggins(){initAreaWidth(),initCustomForms(),jQuery(".breadcrumbs .holder > ul .btn-box2").contentPopup({mode:"hover",openClass:"active",popup:".popup-holder",btnOpen:".btn-open"})}function initSearch(){var searchBtn=jQuery(".search-form input:submit"),searchText=jQuery(".search-form .area input");if(searchBtn.length>0){var leng=searchText.val().length;jQuery(searchBtn).prop("value","GO"),leng>=3?searchBtn.prop("disabled",!1):searchBtn.prop("disabled",!0),jQuery(searchText).keyup(function(){(leng=searchText.val().length)>=3?(searchBtn.prop("disabled",!1),jQuery(searchBtn).prop("value","GO")):(searchBtn.prop("disabled",!0),jQuery(searchBtn).prop("value",3-leng))})}var searchBtn2=jQuery(".search-box input:submit"),searchText2=jQuery(".search-box input:first");if(searchBtn2.length>0){jQuery(searchBtn2).prop("value","GO");var leng2=searchText2.val().length;leng2>=3?searchBtn2.prop("disabled",!1):searchBtn2.prop("disabled",!0),jQuery(searchText2).keyup(function(){(leng2=searchText2.val().length)>=3?(searchBtn2.prop("disabled",!1),jQuery(searchBtn2).prop("value","GO")):(searchBtn2.prop("disabled",!0),jQuery(searchBtn2).prop("value",3-leng2))})}}function initAjaxTabs(){jQuery(".select-country").ajaxTabs({activeClass:"active",links:".drop a",geoActive:!0,onInit:function(self){self.countryNameBox=self.holder.find(".btn-opener .name"),self.iconCountryImg=self.holder.find(".btn-opener img")},onBeforeChange:function(self,link){self.holder.data("MobileNav")&&"function"==typeof self.holder.data("MobileNav").hide&&self.holder.data("MobileNav").hide();var curName=link.text(),curIco=link.find("img");self.iconCountryImg&&self.iconCountryImg.length&&curIco.length&&self.iconCountryImg.attr("src",curIco.attr("src")),self.countryNameBox&&self.countryNameBox.length&&self.countryNameBox.text(curName)}}),jQuery(".continents-filter").ajaxTabs({activeClass:"active",links:"a",geoActive:!0,attrMatch:"countries",addToParent:!0})}function initSwitchTabs(){jQuery('a[href^="#"]:not([href="#"])').each(function(){var link=jQuery(this),tabLink=jQuery('.tabset a[href="'+link.attr("href")+'"]');tabLink.length&&!tabLink.is(link)&&link.on("click",function(e){e.preventDefault(),tabLink.trigger("click")})})}function initAlignColumns(){jQuery(".gallery-list").alignColumns({columns:'.col:not([class*="flag"])',boxes:".bracket-box"})}function initValidation(){var errorClass="error",successClass="success",regEmail=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;jQuery("form.validate-form").each(function(){function checkField(i,obj){var currentObject=jQuery(obj),currentParent=currentObject.closest(".field");if(currentObject.hasClass("required-field")&&setState(currentParent,currentObject,!currentObject.val().length||currentObject.val()===currentObject.prop("defaultValue")),currentObject.hasClass("required-email")&&setState(currentParent,currentObject,!regEmail.test(currentObject.val())),currentObject.hasClass("required-checkbox-area")){var flag=!0,checkedFields=currentObject.find("input:checkbox").filter(":checked");checkedFields.length&&(flag=!1,checkedFields.filter("[data-connected]").length===checkedFields.length&&checkedFields.filter("[data-connected]").each(function(){var field=jQuery(this),connectField=jQuery(field.data("connected"));connectField.length&&!connectField.val().length&&(flag=!0)})),setState(currentParent,currentObject,flag)}currentObject.hasClass("required-radio")&&setState(currentParent,currentObject,!currentObject.find("input:radio").filter(":checked").length),currentObject.hasClass("required-select")&&setState(currentParent,currentObject,0===currentObject.get(0).selectedIndex)}function setState(hold,field,error){hold.removeClass(errorClass).removeClass(successClass),error?(hold.addClass(errorClass),field.one("focus change",function(){hold.removeClass(errorClass).removeClass(successClass)}),successFlag=!1):hold.addClass(successClass)}var form=jQuery(this).attr("novalidate","novalidate"),successFlag=!0,inputs=form.find("input, textarea, select, .required-checkbox-area, .required-radio");form.submit(function(e){successFlag=!0,inputs.each(checkField),successFlag||e.preventDefault()})})}function initResponsiveTables(){function splitTable(original){original.wrap("<div class='table-wrapper' />");var copy=original.clone();copy.find("td:not(:first-child), th:not(:first-child)").css("display","none"),copy.removeClass("responsive"),original.closest(".table-wrapper").append(copy),copy.wrap("<div class='pinned' />"),original.wrap("<div class='scrollable' />"),setCellHeights(original,copy)}function unsplitTable(original){original.closest(".table-wrapper").find(".pinned").remove(),original.unwrap(),original.unwrap()}function setCellHeights(original,copy){var tr=original.find("tr"),tr_copy=copy.find("tr"),heights=[];tr.each(function(index){jQuery(this).find("th, td").each(function(){var height=jQuery(this).outerHeight(!0);heights[index]=heights[index]||0,height>heights[index]&&(heights[index]=height)})}),tr_copy.each(function(index){jQuery(this).height(heights[index])})}var switched=!1,updateTables=function(){if(jQuery(window).width()<767&&!switched)return switched=!0,jQuery("table.responsive").each(function(i,element){splitTable($(element))}),!0;switched&&jQuery(window).width()>767&&(switched=!1,$("table.responsive").each(function(i,element){unsplitTable($(element))}))};jQuery(window).load(updateTables),jQuery(window).on("redraw",function(){switched=!1,updateTables()}),jQuery(window).on("resize",updateTables)}function initRandomSlide(){jQuery(".question-box, .question-block").each(function(){var slides=jQuery(this).find(".slide");slides.eq(Math.floor(Math.random()*slides.length)).addClass("active")})}function initAjaxLoading(){jQuery(".ajax-holder").ajaxLoading({items:"li",btnNext:".next-load",contentHolder:".sets-list",btnLoad:".btn-more",activeClass:"active",loadingClass:"loading-content",animSpeed:500,afterLoaded:function(){"function"==typeof picturefill&&picturefill()}}),jQuery(".ajax-scroll").ajaxLoading({items:".scroll-item",btnNext:"nextUrl",contentHolder:".ajax-content",btnLoad:".btn-more a",activeClass:"active",loadingClass:"loading-content",animSpeed:500,afterLoaded:function(){"function"==typeof picturefill&&picturefill(),jQuery(".boxes").sameHeight({elements:".box",flexible:!0,multiLine:!0})}})}function preloadHelper(url){jQuery.ajax({url:url,dataType:"json",success:function(data){if(!jQuery('[data-id="'+url+'"]').length){var nextUrl,prevUrl;data.nextUrl&&(nextUrl=data.nextUrl),data.prevUrl&&(prevUrl=data.prevUrl);var lightboxTmpl=data.tmplID?tmpl(data.tmplID):!!jQuery("#lightbox_tmpl").length&&tmpl("lightbox_tmpl");lightboxTmpl&&(data=lightboxTmpl(data));var holder=jQuery("#tmp-holder");holder.length||(holder=jQuery('<div id="tmp-holder" style="position:relative;height:0;overflow:hidden;" />').appendTo("body"));var box=jQuery("<div />").html(data);nextUrl&&box.attr("data-next",nextUrl),prevUrl&&box.attr("data-prev",prevUrl),box.appendTo(holder),"function"==typeof window.picturefill&&picturefill(),box.attr("data-id",url)}}})}function initCustomFancyboxCentering(){var wrapper,win=jQuery(window),viewportType="desktop";if(jQuery.fancybox){setTimeout(function(){wrapper=jQuery("#fancybox-wrap")},10);var defaultCenterFunction=jQuery.fancybox.center,lightboxMargin={desktop:80,tablet:40,mobile:0},curMargin=0;ResponsiveHelper.addRange({"..767":{on:function(){viewportType="mobile",curMargin=lightboxMargin.mobile}},"768..1279":{on:function(){viewportType="tablet",curMargin=lightboxMargin.tablet}},"1280..":{on:function(){viewportType="desktop",curMargin=lightboxMargin.desktop}}}),jQuery.fancybox.customCenter=function(){var asideBlock=jQuery(".js-lightbox-aside",wrapper),mediaBlock=jQuery(".js-lightbox-image",wrapper);asideBlock.length&&mediaBlock.length?setStyles[viewportType]():defaultCenterFunction.apply(this,arguments)};var getMediaType=function(media){return jQuery("img",media).length?"image":jQuery("iframe",media).length?"iframe":"nomedia"},getProportions={image:function(imageHolder){var image=imageHolder.find("img"),width=640,height=360;if(image.length){if(image.prop("naturalWidth"))width=image.prop("naturalWidth"),height=image.prop("naturalHeight");else{var img=new Image;img.src=image.prop("src"),width=img.width,height=img.height}image.removeAttr("style")}return{width:width,height:height,ratio:width/height}},iframe:function(iframeHolder){var iframe=iframeHolder.find("iframe"),width=+iframe.attr("width")||640,height=+iframe.attr("height")||360;return{width:width,height:height,ratio:width/height}},viewport:function(aside){var width=win.width()-aside.outerWidth()-getWrapperPadding()-2*curMargin,height=win.height()-getWrapperPadding(!0)-2*curMargin;return{width:width,height:height,ratio:width/height}},nomedia:function(){return{width:640,height:360,ratio:640/360}}},getWrapperPadding=function(vertical){return vertical?parseInt(wrapper.css("paddingTop"),10)+parseInt(wrapper.css("paddingBottom"),10):parseInt(wrapper.css("paddingLeft"),10)+parseInt(wrapper.css("paddingRight"),10)},getContentOffset={byWidth:function(opt){return opt.asideBlock.css({height:""}),{width:opt.viewport.width,height:Math.max(opt.viewport.width/opt.media.ratio,opt.asideBlock.outerHeight())}},byHeight:function(opt){return opt.asideBlock.css({height:""}),{width:opt.viewport.height*opt.media.ratio,height:Math.max(opt.viewport.height,opt.asideBlock.outerHeight(!0))}}},setStyles={desktop:function(){var wrapperHeight,asideBlock=jQuery(".js-lightbox-aside",wrapper),mediaBlock=jQuery(".js-lightbox-image",wrapper),mediaType=getMediaType(mediaBlock),mediaProp=getProportions[mediaType](mediaBlock),viewportProp=getProportions.viewport(asideBlock),wrapperStyleObj={},contentStyleObj={};wrapperHeight=(contentStyleObj=mediaProp.ratio>viewportProp.ratio?getContentOffset.byWidth({media:mediaProp,viewport:viewportProp,asideBlock:asideBlock}):getContentOffset.byHeight({media:mediaProp,viewport:viewportProp,asideBlock:asideBlock})).height+getWrapperPadding(!0),wrapperStyleObj.width=contentStyleObj.width+asideBlock.outerWidth()+getWrapperPadding(),wrapperStyleObj.top=win.scrollTop()+Math.max(0,win.height()-wrapperHeight)/2,wrapperStyleObj.left=(win.width()-wrapperStyleObj.width)/2,wrapperStyleObj.marginTop=0,wrapper.css(wrapperStyleObj),mediaBlock.css(contentStyleObj),asideBlock.css({height:contentStyleObj.height})},tablet:function(){var wrapperHeight,asideBlock=jQuery(".js-lightbox-aside",wrapper),mediaBlock=jQuery(".js-lightbox-image",wrapper),mediaType=getMediaType(mediaBlock),mediaProp=getProportions[mediaType](mediaBlock),wrapperStyleObj={},contentStyleObj={};contentStyleObj.width=win.width()-getWrapperPadding(),contentStyleObj.height=contentStyleObj.width/mediaProp.ratio,wrapperHeight=contentStyleObj.height+asideBlock.outerHeight()+getWrapperPadding(!0),wrapperStyleObj.width=win.width(),wrapperStyleObj.top=win.scrollTop()+Math.max(0,win.height()-wrapperHeight)/2,wrapperStyleObj.left=0,wrapperStyleObj.marginTop=curMargin+"px",wrapper.css(wrapperStyleObj),mediaBlock.css(contentStyleObj),asideBlock.css({height:""})},mobile:function(){var wrapperHeight,asideBlock=jQuery(".js-lightbox-aside",wrapper),mediaBlock=jQuery(".js-lightbox-image",wrapper),mediaType=getMediaType(mediaBlock),mediaProp=getProportions[mediaType](mediaBlock),wrapperStyleObj={},contentStyleObj={};contentStyleObj.width=win.width()-getWrapperPadding(),contentStyleObj.height=contentStyleObj.width/mediaProp.ratio,wrapperHeight=contentStyleObj.height+asideBlock.outerHeight()+getWrapperPadding(!0),wrapperStyleObj.width=win.width(),wrapperStyleObj.top=win.scrollTop()+Math.max(0,win.height()-wrapperHeight)/2,wrapperStyleObj.left=0,wrapperStyleObj.marginTop=0,wrapper.css(wrapperStyleObj),mediaBlock.css(contentStyleObj),asideBlock.css({height:""})}}}}function initLightboxSwipe(){function enableSwipe(){var fbWrapper=document.getElementById("fancybox-wrap");attempt+=1,jQuery.fancybox&&fbWrapper&&window.Hammer?((swipeHandler=new Hammer.Manager(fbWrapper)).add(new Hammer.Swipe({direction:Hammer.DIRECTION_HORIZONTAL,threshold:10})),swipeHandler.on("swipeleft",function(){jQuery.fancybox.next()}).on("swiperight",function(){jQuery.fancybox.prev()})):attempt<ATTEMPTS_MAX&&setTimeout(enableSwipe,100)}var swipeHandler,ATTEMPTS_MAX=5,attempt=0;(/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&enableSwipe()}function initSlideShow(){jQuery(".lightbox").fadeGallery({slides:".gallery-lightbox > ul > li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",event:"click",disableFadeIE:!0,useSwipe:!0,autoRotation:!1,autoHeight:!0,switchTime:3e3,animSpeed:500})}function initAjaxSelect(){jQuery(".results-form").ajaxSelect({selects:".ajax-select",urlAttr:"data-url",appendItems:"option",addClass:"loaded-items"})}function initTabGallery(){jQuery(".tab-gallery").scrollGallery({mask:".tab-content",slider:".tab-slider",slides:".tab-section",pagerLinks:".tabset li",stretchSlideToMask:!0,handleTouch:!1,circularRotation:!1,animSpeed:500,step:1})}function initCustomHover(){jQuery(".banner-gallery .box").touchHover()}function initChildClasses(){jQuery(".main-holder").find(".table-box:last").addClass("last"),jQuery(".col-frame").find(".bracket-box:first").addClass("first"),jQuery(".col-frame").find(".bracket-box:last").addClass("last"),jQuery(".gallery-list li").find(".cols:last").addClass("last"),jQuery(".main-holder").find(".sets-section:last").addClass("last"),jQuery("#main").find(".profile-sport-section:last").addClass("last"),jQuery(".main-holder").find(".sets-section:first").addClass("first"),jQuery(".main-holder").find(".sponsors-list:first-child").addClass("first"),jQuery(".main-holder").find(".related-athletes:first-child").addClass("first")}function initAreaWidth(){jQuery(".btn-box2").each(function(){if(!jQuery(this).data("initWidth")){jQuery(this).data("initWidth",!0);var boxWidth=jQuery(this).width()+jQuery(this).find(".popup-box").width();jQuery(this).find(".popup-holder").width(boxWidth)}})}function initSlideWidth(){var win=jQuery(window);jQuery(".banner-gallery").each(function(){function resizeBlock(){win.width()>767?(resizeHandler(),resizeHandlerCol()):box.find('.box, .col:not([class*="flag"])').css({width:""}),win.trigger("endRefreshSlides")}function resizeHandler(){box.find(".box").each(function(){var boxWidth=jQuery(this).width()/holderWidth*100+"%";jQuery(this).width(boxWidth)})}function resizeHandlerCol(){box.find('.col:not([class*="flag"])').each(function(){var boxWidth=jQuery(this).find(".box").width()/holderWidth*100+"%";jQuery(this).width(boxWidth)})}var timer,box=jQuery(this),holderWidth=parseInt(box.find(".gallery-holder").css("max-width"),10);resizeBlock(),win.on("refreshSlides",function(){setTimeout(function(){box.find('.box, .col:not([class*="flag"])').css({width:""}),resizeBlock()},100)}),win.on("orientationchange resize",function(){clearTimeout(timer),timer=setTimeout(function(){box.find('.box, .col:not([class*="flag"])').css({width:""}),resizeBlock()},300)})})}function initCustomSameHeight(){function getMaxHeight(items){var maxHeight=0;return items.each(function(){var itemHeight=jQuery(this).innerHeight();itemHeight>maxHeight&&(maxHeight=itemHeight)}),maxHeight}var win=jQuery(window);jQuery(".add-cols").each(function(){function refreshHeight(){for(var maxHeight,i=0;i<rows.length;i++)maxHeight=0,rows[i].css({height:""}),maxHeight=getMaxHeight(rows[i]),rows[i].css({height:maxHeight})}var lists=jQuery(this).find('>.col:not([class*="flag"])'),rows=[];lists.each(function(){var list=jQuery(this),listItems=list.find(">.event-box");list.data("listItems",listItems)}),lists.eq(0).data("listItems").each(function(ind){for(var currentRow=jQuery(this),i=1;i<lists.length;i++)currentRow=currentRow.add(lists.eq(i).data("listItems").eq(ind));rows.push(currentRow)}),refreshHeight(),win.on("load resize orientationchange",refreshHeight)})}function initAnchors(){new SmoothScroll({anchorLinks:'.section-links a[href^="#"]'}),new SmoothScroll({anchorLinks:'.anchor-list a[href^="#"]'})}function initBackgroundResize(){jQuery(".bg-image").each(function(){ImageStretcher.add({container:this,image:"img"})}),jQuery(".add-text-section .text-box .image").each(function(){ImageStretcher.add({container:this,image:"img"})}),jQuery(".add-text-section3 .image").each(function(){ImageStretcher.add({container:this,image:"img"})}),jQuery(".add-text-section4 .image").each(function(){ImageStretcher.add({container:this,image:"img"})})}function initTabs(){var isMobile;ResponsiveHelper.addRange({"..767":{on:function(){isMobile=!0}},"768..":{on:function(){isMobile=!1}}}),jQuery("[data-class]").on({mouseenter:function(){jQuery(this).addClass(jQuery(this).attr("data-class"))},mouseleave:function(){!1===jQuery(this).parent().hasClass("active")&&jQuery(this).removeClass(jQuery(this).attr("data-class"))}}),jQuery("ul.tabset").contentTabs({addToParent:!0,checkHash:!0,tabLinks:'a[href^="#"]:not([href="#"])',onInit:function(newTab,link,tabLinks,isScroll,tabset){link.addClass(link.attr("data-class")),isScroll&&(isMobile?SmoothScroll.scrollTo(Math.ceil(tabset.parent().offset().top)):jQuery(tabset).hasClass("aligncenter")?SmoothScroll.scrollTo(Math.ceil(tabset.offset().top)):SmoothScroll.scrollTo(Math.ceil(newTab.offset().top))),tabLinks.on({mouseenter:function(){},mouseleave:function(){var activeLink=tabLinks.filter(function(){if(jQuery(this).parent().hasClass("active"))return this});activeLink.addClass(activeLink.attr("data-class"))}})},onChange:function(oldTab,newTab,newLink,tabLinks,tabset){isMobile?SmoothScroll.scrollTo(Math.ceil(tabset.parent().offset().top)):jQuery(tabset).hasClass("aligncenter")?SmoothScroll.scrollTo(Math.ceil(tabset.offset().top)):SmoothScroll.scrollTo(Math.ceil(newTab.offset().top)),tabLinks.removeClass(),newLink.addClass(newLink.attr("data-class"))}}),jQuery(".tabset .active a[data-class]").each(function(){jQuery(this).addClass(jQuery(this).attr("data-class"))})}function initCustomForms(){jcf.setOptions("Select",{wrapNative:!1,maxVisibleItems:7}),jcf.replaceAll(".form, .popup-box, .results-form, .calendar-form, .members-form, .selects-box")}function initAutocomplete(){var dropTitle,scrollBox,autocompleteHolder=jQuery(".autocomplete-holder"),submit=autocompleteHolder.find('input[type="submit"]');autocompleteHolder.autocomplete({input:".autocomplete-input",drop:".drop",sourceAttr:"data-source",sourceCallbackAttr:"data-source-callback",items:"li",onSuccess:function(){dropTitle=this.drop.find(".alt-txt"),scrollBox=this.drop.find(".scroll-box")},onShowResult:function(){this.items.length-this.items.filter(".js-drop-hidden").length>4?(dropTitle.show(),scrollBox.css({height:""})):(dropTitle.hide(),scrollBox.css({height:"auto"}))},onChange:function(){this.input.val().length?submit.show():submit.hide()}})}function initCarousel(){function initGallery(num){gallery.scrollGallery({mask:".carousel-holder",slider:"ul",slides:"li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",circularRotation:!1,autoRotation:!1,switchTime:3e3,animSpeed:500,step:num||1})}function destroyGallery(){gallery.each(function(){jQuery(this).data("ScrollGallery")&&jQuery(this).data("ScrollGallery").destroy()})}var gallery=jQuery(".cta-carousel"),win=jQuery(window);ResponsiveHelper.addRange({"..767":{on:function(){initGallery(2)},off:destroyGallery},"768..1024":{on:function(){initGallery(4)},off:destroyGallery},"1025..":{on:function(){initGallery(6)},off:destroyGallery}}),jQuery(".cta-carousel-news, .cta-carousel-games").each(function(){function refreshMask(){var slideWidth=list.children().eq(0).outerWidth(!0),slidesLen=Math.max(1,Math.floor(mask.width()/slideWidth)),shadowWidth=(win.width()-slidesLen*slideWidth)/2;maskShadow.css({width:shadowWidth})}var holder=jQuery(this),mask=holder.find(".frame"),list=mask.children("ul"),maskShadow=holder.find(".mask-l, .mask-r");!!jQuery("#item_tmpl").length&&tmpl("item_tmpl");list.data("tmpl")&&(!!jQuery("#"+list.data("tmpl")).length&&tmpl(list.data("tmpl"))),holder.scrollGallery({mask:".frame",slider:"> ul",slides:"> li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",circularRotation:!1,maskAutoWidth:!1,animSpeed:500,onInit:function(obj){},onChange:function(self){self.refreshActive()}}),win.on("load resize orientationchange",refreshMask),refreshMask()}),jQuery(".brackets-gallery").scrollGallery({mask:".gallery-holder",slider:".gallery-list",slides:".cols",slidesHolders:">li",btnPrev:".btn-prev-box",btnNext:".btn-next-box",pagerLinks:".pagination li",stretchSlideToMask:!1,circularRotation:!1,maskAutoSize:!1,autoRotation:!1,switchTime:3e3,animSpeed:500,step:1,extraSpace:function(){var winWidth=win.width();return extraSpace=0,winWidth<=1024&&winWidth>=768&&(extraSpace=2),extraSpace},onBeforeInit:function(self){this.currentStep=this.stepsCount,self.allColHolders=jQuery(),self.allCols=jQuery(),this.slidesHolders.each(function(){var slide=jQuery(this),colHolders=slide.find(".cols"),cols=slide.find('.col:not([class*="flag"])');self.allColHolders=self.allColHolders.add(colHolders),self.allCols=self.allCols.add(cols),slide.data({colHolders:colHolders,cols:cols})}),this.addSlides=jQuery(".group-gallery .bracket-box"),self.allColHolders.each(function(){var colHolder=jQuery(this),title=colHolder.find("h2"),col=colHolder.find('.col:not([class*="flag"])');col.each(function(){title.clone().prependTo(jQuery(this))}),colHolder.data({col:col})}),self.sumWidth=function(items){var sumWidth=0;return items.each(function(){sumWidth+=jQuery(this).outerWidth(!0)}),Math.floor(sumWidth)},self.setSlidesetHeight=function(){var maskWidth=self.mask.width(),maskLeft=self.mask.offset().left,columnsHeight=[];this.allCols.each(function(){var column=jQuery(this),columnLeft=column.offset().left;column.innerWidth();columnLeft>=maskLeft&&columnLeft<=maskLeft+maskWidth-5&&columnsHeight.push(column.outerHeight(!0))}),columnsHeight.length&&self.slider.css({height:Math.max.apply(Math,columnsHeight)})}},onResizeSlides:function(self){jQuery.isFunction(self.setSlidesetHeight)&&self.setSlidesetHeight(),jQuery.isFunction(self.sumWidth)&&(this.slidesHolders.css({minWidth:""}),this.allColHolders.css({width:""}),this.allCols.css({width:""}),this.allCols.each(function(n){var col=jQuery(this);col.css({width:Math.floor(col.innerWidth())}),0===n&&self.addSlides.length&&self.addSlides.css({width:Math.floor(col.width())})}),this.allColHolders.each(function(){var colHolder=jQuery(this),cols=colHolder.data("col");cols&&cols.length&&colHolder.css({width:self.sumWidth(cols)})}),this.slidesHolders.each(function(){var slide=jQuery(this),colHolders=slide.data("colHolders");slide.css({minWidth:self.sumWidth(colHolders)})}))},onChange:function(self){jQuery.isFunction(self.setSlidesetHeight)&&self.setSlidesetHeight()}}),jQuery(".add-brackets").scrollGallery({mask:".group-gallery-holder",slider:".group-gallery",slides:"> li",btnPrev:".btn-prev",btnNext:".btn-next",pagerLinks:".pagination li",stretchSlideToMask:!0,circularRotation:!1,maskAutoSize:!0,autoRotation:!1,switchTime:3e3,animSpeed:500}),jQuery(".breadcrumbs").scrollGallery({mask:".holder",slider:"ul",slides:"> li",circularRotation:!1,autoRotation:!1,switchTime:2e3,animSpeed:300}),jQuery(".carousel-athletes").scrollGallery({mask:".gallery-frame",slider:"> ul",slides:"> li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",circularRotation:!1,maskAutoSize:!0,autoRotation:!1,switchTime:3e3,animSpeed:500})}function initSameHeight(){jQuery(".boxes").sameHeight({elements:".box",flexible:!0,multiLine:!0}),jQuery(".countries").sameHeight({elements:".box",flexible:!0,multiLine:!0}),jQuery(".games-list").sameHeight({elements:"> ul > li",flexible:!0,multiLine:!0}),jQuery(".lima-speakers").sameHeight({elements:".holder",flexible:!0,multiLine:!0}),jQuery(".gallery-list").sameHeight({elements:'.col:not([class*="flag"])',flexible:!0,biggestHeight:!0,multiLine:!0}),jQuery(".sets-list").sameHeight({elements:"> li",flexible:!0,biggestHeight:!0,multiLine:!0}),jQuery(".add-text-section").sameHeight({elements:".text-holder, .text-box",flexible:!0,biggestHeight:!0,multiLine:!0}),jQuery(".add-text-section4").sameHeight({elements:".image-area, .text-box",flexible:!0,biggestHeight:!0,multiLine:!0}),jQuery(".add-boxes").sameHeight({elements:".sameheight",flexible:!0,multiLine:!0}),jQuery(".links-cols").sameHeight({elements:".links-col",flexible:!0,multiLine:!0}),jQuery(".post-boxes").sameHeight({elements:".sameheight",flexible:!0,multiLine:!0})}function initPopups(){var win=jQuery(window);jQuery(".popup-question").contentPopup({mode:"hover"}),jQuery(".link-drop").contentPopup({mode:"click",btnOpen:".opener"}),jQuery(".btn-box2").contentPopup({mode:"hover",openClass:"active",popup:".popup-holder",btnOpen:".btn-open"}),jQuery(".btn-box").contentPopup({mode:"click",popup:".popup-box",btnOpen:".btn, .btn-open-mask",openClass:"active",onChange:function(state,self){function scrollHandler(){btnButtom+dropHeight>winHeight+win.scrollTop()&&!self.popup.hasClass("bottom")?self.popup.addClass("bottom"):btnButtom+dropHeight<winHeight+win.scrollTop()&&self.popup.hasClass("bottom")&&self.popup.removeClass("bottom")}function resizeHandler(){window.picturefill&&window.picturefill(),btnButtom=self.btnOpen.offset().top+self.btnOpen.outerHeight(),dropHeight=self.popup.outerHeight(),winHeight=getWindowHeight(),scrollHandler()}function getWindowHeight(){return"number"==typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight}var btnButtom,dropHeight,winHeight;state?(btnButtom=this.btnOpen.offset().top+this.btnOpen.outerHeight(),dropHeight=this.popup.outerHeight(),winHeight=getWindowHeight(),win.on("resize",resizeHandler),win.on("scroll",scrollHandler)):(win.off("resize",resizeHandler),win.off("scroll",scrollHandler)),resizeHandler()}})}function initFilter(){var activeClass="active",hoverClass="hover",animateClass="filtering",animSpeed=500,customItems=".youthgames";jQuery(".filters-area").each(function(){function refreshItems(filter){var filteredItems="all"===filter?items.not(customItems):items.filter("."+filter),slide=jQuery(slideHtml),column=jQuery(columnHtml),slides=[slide],columns=[column],columnIndex=0,rowIndex=0;filteredItems.each(function(i){jQuery(this).appendTo(column),++rowIndex===rowsNumber&&i<filteredItems.length-1&&(column=jQuery(columnHtml),columns.push(column),rowIndex=0)}),jQuery(columns).each(function(i){jQuery(this).appendTo(slide),++columnIndex===colsNumber&&i<columns.length-1&&(slide=jQuery(slideHtml),slides.push(slide),columnIndex=0)}),slider.html(slides),destroyGal(),initGal(),area.removeClass(animateClass)}function initGal(){gallery.scrollGallery({mask:".filters-holder",slider:"> ul",slides:"> li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",stretchSlideToMask:!0,circularRotation:!1,maskAutoSize:!0,animSpeed:500,step:1,onInit:function(){setTimeout(function(){mask.stop(!0,!0).animate({opacity:1},animSpeed)},10)}})}function destroyGal(){gallery.data("ScrollGallery")&&gallery.data("ScrollGallery").destroy()}var timer,area=jQuery(this),areaHolder=area.closest("li.has-drop-down"),filters=area.find(".filters a"),colsNumber=area.data("cols"),rowsNumber=area.data("rows"),gallery=area.find(".filters-gallery"),mask=gallery.find(".filters-holder"),slider=mask.children(),items=slider.children(),columnHtml='<ul class="list"/>',slideHtml="<li/>";filters.each(function(){var link=jQuery(this),filter=link.attr("data-filter");link.hasClass(activeClass)&&refreshItems(filter)}).on("click",function(e){e.preventDefault();var link=jQuery(this),filter=link.attr("data-filter");link.hasClass(activeClass)||area.hasClass(animateClass)||(area.addClass(animateClass),filters.removeClass(),link.addClass(activeClass),mask.stop().animate({opacity:0},animSpeed,function(){refreshItems(filter)}))}),filters.filter("."+activeClass).length||filters.filter('[data-filter="all"]').trigger("click"),area.on("mousedown",function(){clearTimeout(timer),timer=setTimeout(function(){areaHolder.addClass(hoverClass)},10)})})}function initAjaxMore(){var loadingClass="ajax-loading";jQuery(".ajax-area, .ajax-area-mosaic").each(function(){function getStructure(arr){var html="";return jQuery(arr).each(function(){html+=tmplContent(this)}),html}function saveState(items){var flag=!1;items.each(function(){if(this.tagName){var item=$(this),link="a"===item.get(0).tagName.toLowerCase()?item:item.find("a");link.hasClass("lightbox-link")||link.attr("rel")?flag=!0:link.on("click",function(e){e.preventDefault();var id=item.attr("id");History.pushState({section:area.attr("id")?area.attr("id"):"",id:id},document.title,"?section="+(area.attr("id")?area.attr("id"):"")+"&id="+id),window.location=link.attr("href")})}}),flag&&void 0!==lightboxGallery&&lightboxGallery.addLinks({selector:'a.lightbox-link, a[rel*="lightbox"]'})}function loadContent(e,historyData){if(e&&e.preventDefault(),!historyData){if(responsiveItems&&checkItems())return!1;if(area.hasClass(loadingClass))return}btn.hasClass(noLoadClass)?btn.parent().hide():(area.addClass(loadingClass),jQuery.ajax({type:"get",url:btn.attr("href"),dataType:tmplIsReady?"json":"html",success:function(msg){var ajaxContent,ajaxUrl;if(tmplIsReady){var html="";html=getStructure(msg.content),msg.lastBtn&&(html+=tmpl("lastBtn_tmpl",msg.lastBtn)),ajaxContent=jQuery(html),ajaxUrl=!!msg.nextUrl&&msg.nextUrl,responsiveItems&&visibleItems>0&&ajaxContent.length>visibleItems&&(ajaxContent.filter(function(){return this.tagName}).filter(function(index){return index>visibleItems-1-oldItems}).hide(),oldItems=0),ajaxContent.appendTo(holder)}else{var ajaxItems=(ajaxContent=jQuery(msg)).find(".row");ajaxUrl=ajaxContent.find(".btn-more a").attr("href"),ajaxItems.appendTo(holder)}if(items=holder.children(),ajaxUrl?btn.attr("href",ajaxUrl):items.not(":visible").length?btn.addClass(noLoadClass):btn.parent().hide(),window.picturefill(),saveState(ajaxContent),historyData&&historyData.id){var hit=!1;if(msg.content.forEach(function(obj){if(obj.guid===historyData.id)return hit=!0,!1}),!hit&&msg.lastBtn&&msg.lastBtn.id===historyData.id&&(hit=!0),!hit)return area.layoutImages(function(){"function"==typeof collage&&collage()}),void(ajaxUrl&&loadContent(null,historyData));History.replaceState(null,null),area.layoutImages(function(){"function"==typeof collage&&collage(),setTimeout(function(){scrollToBox("#"+historyData.id)},300)})}area.hasClass("ajax-area-mosaic")?(ajaxContent.css({visibility:"hidden"}),area.layoutImages(function(){area.removeClass(loadingClass),ajaxContent.css({visibility:""}),"function"==typeof collage&&collage()})):(area.removeClass(loadingClass),area.find("img").length&&(ajaxContent.css({visibility:"hidden"}),area.imagesLoaded(function(){jQuery(window).trigger("refresh"),setTimeout(function(){ajaxContent.css({visibility:""})},300)}))),lightboxGallery&&lightboxGallery.addLinks({selector:'a.lightbox-link, a[rel*="lightbox"]'}),holder.trigger("refresh")},error:function(){area.removeClass(loadingClass)}}))}var area=jQuery(this),holder=area.find(".ajax-content"),noHistory=area.hasClass("no-history"),btn=area.find(".btn-more a"),items=holder.children(),visibleItems=0,oldItems=0,responsiveItems=!1,noLoadClass="empty-load",refreshItems=function(){!btn.is(":visible")&&items.not(":visible").length&&items.css({display:""})};area.data("items")&&(responsiveItems=!0,area.data("items").mobile&&area.data("items").mobile>0&&ResponsiveHelper.addRange({"..767":{on:function(){visibleItems=area.data("items").mobile,refreshItems()}}}),area.data("items").tablet&&area.data("items").tablet>0&&ResponsiveHelper.addRange({"768..1024":{on:function(){visibleItems=area.data("items").tablet,refreshItems()}}}),area.data("items").desktop&&area.data("items").desktop>0&&ResponsiveHelper.addRange({"1025..":{on:function(){visibleItems=area.data("items").desktop,refreshItems()}}})),responsiveItems&&visibleItems>0&&items.length>visibleItems&&items.filter(function(index){return index>visibleItems-1}).hide();var checkItems=function(){var flag=!1;return visibleItems>0&&items.not(":visible").length>=visibleItems?(flag=!0,items.not(":visible").filter(function(index){return index<visibleItems}).css({display:""})):items.not(":visible").length&&(oldItems=items.not(":visible").length,items.css({display:""})),flag},tmplContent=!(!area.data("tmpl")||!jQuery("#"+area.data("tmpl")).length)&&tmpl(area.data("tmpl")),tmplIsReady="function"==typeof tmplContent;if(btn.on("click",loadContent),!noHistory){var historyState=History.getState();historyState.data.section&&historyState.data.section===area.attr("id")&&($("#"+historyState.data.id).length?this.win.on("load",function(){scrollToBox("#"+historyState.data.id)}):loadContent(null,historyState.data)),saveState(items)}})}function initCycleCarousel(){jQuery(".id-card").scrollAbsoluteGallery({mask:".frame",slider:"> ul",slides:"> li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",generatePagination:".switcher",stretchSlideToMask:!0,pauseOnHover:!0,maskAutoSize:!0,autoRotation:!0,switchTime:8e3,animSpeed:500}),jQuery(".banner-gallery").scrollAbsoluteGallery({mask:".gallery-holder",slider:"> ul",slides:">li",btnPrev:"a.btn-prev",btnNext:"a.btn-next",onInit:function(self){ResponsiveHelper.addRange({"..767":{on:function(){self.options.slides=".box-holder",self.refresh()},off:function(){self.options.slides=">li",self.refresh()}}})},pagerLinks:".pagination li",stretchSlideToMask:!0,pauseOnHover:!0,maskAutoSize:!0,autoRotation:!1,switchTime:3e3,animSpeed:500})}function initNavigationSelect(){jQuery(".list-select").navigationSelect({defaultOptionAttr:"rel",defaultOptionText:"QUICK LINKS:",defaultMode:!0}),jQuery(".tabs-section .tabset").navigationSelect({activeClass:"active",useDefaultOption:!1,triggerClick:!0,onInit:function(obj){var links=obj.navigation.find("a"),select=obj.select;links.each(function(i){var link=jQuery(this);link.closest("li").hasClass(obj.options.activeClass)&&(select[0].selectedIndex=i),link.on("click",function(){select[0].selectedIndex=i})})}}),jQuery(".game-results-box .countries").navigationSelect({defaultOptionAttr:"rel",defaultOptionText:"Select Sport:",defaultMode:!0})}function initOpenClose(){var win=jQuery(window);jQuery(".nav-box").openClose({activeClass:"active",opener:".opener:not(.disabled)",slider:".slide",animSpeed:0,hideOnClickOutside:!0,onInit:function(self){jQuery("body").on("itemhover",function(e){jQuery(e.target).hasClass("has-drop-down")&&self.hideSlide()})},animStart:function(direction){direction&&win.trigger("hideMenu")},effect:"fade"}),jQuery(".breadcrumbs").openClose({activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"}),jQuery(".items").openClose({activeClass:"active",opener:".btn-more a",slider:".slide",animSpeed:400,effect:"slide"}),jQuery(".text-post").openClose({activeClass:"active",opener:".btn-more a",slider:".slide",animSpeed:400,addClassBeforeAnimation:!1,effect:"slide"}),jQuery(".text-post").openClose({activeClass:"active",opener:".btn-more a",slider:".extraContent",animSpeed:400,addClassBeforeAnimation:!0,effect:"slide"}),jQuery(".text-content").openClose({activeClass:"active",opener:".btn-more a",slider:".extraContent",animSpeed:400,addClassBeforeAnimation:!0,effect:"slide"}),jQuery(".about-block").openClose({activeClass:"active",opener:".btn-more a",slider:".slide",animSpeed:400,addClassBeforeAnimation:!1,effect:"slide"}),jQuery(".table-box").openClose({activeClass:"active",opener:".btn-more a",slider:".slide-row",animSpeed:400,addClassBeforeAnimation:!1,effect:"slide"}),jQuery(".sets-section").openClose({activeClass:"active",opener:".btn-more a",slider:".slide",animSpeed:400,effect:"slide"}),jQuery(".post-boxes").openClose({activeClass:"active",opener:".btn-more a",slider:".slide",animSpeed:400,effect:"slide"}),jQuery(".tv-info").openClose({activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"}),win.width()<1024&&jQuery(".pc2018").openClose({activeClass:"active",opener:".pc2018logo",slider:".pc-links",animSpeed:400,effect:"slide"}),jQuery("#pcSportLink").click(function(){$("#pcSportMenu").toggle()}),jQuery("#pcSportMenu").mouseleave(function(){jQuery("#pcSportMenu").hide()}),jQuery("#nav").mouseenter(function(){jQuery("#pcSportMenu").hide()})}function initAccordion(){jQuery(".links-boxes").slideAccordion({opener:".title",slider:"div.slide",animSpeed:300}),jQuery("ul.accordion").slideAccordion({opener:"> .opener",slider:"> ul",animSpeed:300}),jQuery(".reports-list").slideAccordion({opener:"> .opener",slider:".slide",onInit:function(holder,items){if(holder.attr("id")){var expandAll=jQuery('.expand-all[href="#'+holder.attr("id")+'"]');expandAll.length&&expandAll.on("click",function(e){e.preventDefault(),items.trigger("open")})}},animSpeed:300})}function initMobileNav(){var win=jQuery(window);jQuery("body").mobileNav({menuActiveClass:"nav-active",menuOpener:".nav-opener",onShow:function(){win.trigger("navShow")},onHide:function(){win.trigger("navHide")}}),jQuery(".select-country").mobileNav({hideOnClickOutside:!0,menuActiveClass:"active",menuOpener:".opener",menuDrop:".drop"})}function initTouchNav(){jQuery("#nav").each(function(){new TouchNav({navBlock:this,menuDrop:"div"})})}function initDropDownClasses(){jQuery("#nav li").each(function(){var item=jQuery(this),drop=item.find("ul"),link=item.find("a").eq(0);drop.length&&(item.addClass("has-drop-down"),link.length&&link.addClass("has-drop-down-a"))})}function initTabNav(){jQuery("#nav").tabNav({items:"li"})}function scrollToBox(obj){var isWinPhoneDevice=navigator.msPointerEnabled&&/MSIE 10.*Touch/.test(navigator.userAgent),scrollPoint=-1,page=jQuery("html,body"),win=jQuery(window),header=jQuery("#header");if("object"==typeof obj)scrollPoint=obj.offset().top;else{var box=jQuery(obj);box.length&&(scrollPoint=box.first().outerHeight()>win.height()?box.first().offset().top-header.outerHeight():box.first().offset().top-win.height()/2+box.outerHeight()/2)}scrollPoint>-1&&(isWinPhoneDevice?page.eq(0).scrollTop(scrollPoint):page.stop().animate({scrollTop:scrollPoint},{duration:1500}))}function TouchNav(opt){this.options={hoverClass:"hover",menuItems:">li",menuOpener:"a",menuDrop:"ul",navBlock:null};for(var p in opt)opt.hasOwnProperty(p)&&(this.options[p]=opt[p]);this.init()}function initIsotope(){jQuery(window);jQuery("#wrapper").each(function(e){jQuery(this).find(".info-boxes-row").isotope({itemSelector:".box",layoutMode:"packery",packery:{columnWidth:1}})})}jQuery(function(){showContextBreadcrumbs(),initCustomForms(),initAutocomplete(),initCarousel(),initTouchNav(),initAccordion(),initMobileNav(),initDropDownClasses(),initTabNav(),jQuery("input, textarea").placeholder(),initCycleCarousel(),initAjaxMore(),initFilter(),initPopups(),initSameHeight(),initOpenClose(),initAnchors(),initChildClasses(),initAreaWidth(),initCustomHover(),initTabGallery(),initAjaxSelect(),initResponsiveTables(),initSlideShow(),initAjaxLoading(),lightboxGallery.init(),initLightboxSwipe(),initRandomSlide(),initValidation(),initAlignColumns(),initSwitchTabs(),initSearch(),initStickyHeader()}),jQuery(window).load(function(){setTimeout(function(){initBackgroundResize(),initCustomSameHeight(),initIsotope(),initNavigationSelect(),initTabs(),initAjaxTabs()},200),setTimeout(function(){initSlideWidth()},0)}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key===name){result=read(cookie,value);break}key||(cookie=read(cookie))===undefined||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return $.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key)}}),function($){function AjaxTabs(options){this.options=$.extend({activeClass:"active",links:".drop a",tmpl:"tab-tmpl",attrMatch:!1,addToParent:!1},options),this.init()}AjaxTabs.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=$(this.options.holder),this.links=this.holder.find(this.options.links),this.holder.data("tabOptions")&&(this.options=$.extend(this.options,this.holder.data("tabOptions"))),this.container=$(this.options.container),this.container.length||(this.container=this.holder),this.tmplTab=tmpl(this.options.tmpl),this.ajaxBusy=!1,this.prevLink=null},attachEvents:function(){var self=this;this.links.each(function(){var link=$(this);link.on("click",function(e){e.preventDefault(),link!==self.prevLink&&(link.data("tab")?self.switchTab(link):self.getContent(link))}),(self.options.addToParent?link.parent():link).hasClass(self.options.activeClass)&&!self.options.geoActive&&self.getContent(link)}),this.options.geoActive&&this.getUserCountry()},setActive:function(link,load){(this.options.addToParent?this.links.parent():this.links).removeClass(this.options.activeClass),(this.options.addToParent?link.parent():link).addClass(this.options.activeClass),load&&this.getContent(link)},getUserCountry:function(){var self=this,activeItem=(self.options.addToParent?self.links.parent():self.links).filter("."+self.options.activeClass);window.userLocation?self.setLocation(window.userLocation):window.userLocationWaiting?window.queueUserLocation.push(this):(window.userLocationWaiting=!0,window.queueUserLocation=[this],$.getJSON("http://pro.ip-api.com/json?key=pDcetvRqnQsD4R6&fields=2").done(function(location){window.userLocation=location,window.queueUserLocation.forEach(function(obj){obj.setLocation(location)})}).error(function(){self.options.geoActive=!1,self.setActive(activeItem.length?activeItem:self.links.first(),!0)}))},setLocation:function(location){var self=this,activeLink=self.links.filter('[data-country="'+location.countryCode+'"]');self.options.attrMatch&&(activeLink=self.links.filter(function(){return-1!==$(this).data(self.options.attrMatch).indexOf(location.countryCode)})),self.setActive(activeLink.length?activeLink:activeItem.length?activeItem:self.links.first(),!0)},getContent:function(link){if(!this.ajaxBusy){var self=this;this.ajaxBusy=!0,$.ajax({url:link.attr("href"),dataType:"json",success:function(data){var htmlContent=self.getHtml(data),tab=$('<div class="tab-item">').html(htmlContent);link.data("tab",tab),self.appendTab(tab),self.makeCallback("onLoad",self),self.switchTab(link),self.ajaxBusy=!1},error:function(){self.ajaxBusy=!1}})}},getHtml:function(data){var html="";if(this.tmplTab)if($.isArray(data)){var self=this;data.forEach(function(obj){html+=self.tmplTab(obj)})}else html=this.tmplTab(data);return html},appendTab:function(newTab){newTab.hide().appendTo(this.container)},switchTab:function(link){this.makeCallback("onBeforeChange",this,link),this.setActive(link),this.prevLink&&this.prevLink.data("tab").hide(),link.data("tab").show(),this.prevLink=link,this.makeCallback("onChange",this)},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}},$.fn.ajaxTabs=function(opt){return this.each(function(){jQuery(this).data("AjaxTabs",new AjaxTabs($.extend(opt,{holder:this})))})}}(jQuery),function($){function AlignColumns(options){this.options=$.extend({columns:".col",boxes:".bracket-box",contentBox:".bracket-holder",divider:"hr",activeClass:"absolute"},options),this.init()}AlignColumns.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=$(this.options.holder),this.columns=this.holder.find(this.options.columns),this.win=$(window),this.timer,this.aligncenter()},attachEvents:function(){var self=this;this.resizeHandler=function(){self.resizeBoxes()},ResponsiveHelper.addRange({"..767":{on:function(){self.disabled=!0,self.resetBoxes()},off:function(){self.disabled=!1,self.aligncenter()}}}),this.win.on("resize orientationchange load",this.resizeHandler)},resizeBoxes:function(){if(!this.disabled){var self=this;clearTimeout(this.timmer),this.timer=setTimeout(function(){self.aligncenter()},300)}},resetBoxes:function(){this.columns.find("."+this.options.activeClass).css({position:"",width:"",top:""}).removeClass(this.options.activeClass)},aligncenter:function(){var self=this,mainDividers=this.columns.eq(0).find(this.options.divider);this.columns.css({position:"relative"}).each(function(ind){var column=$(this);if(0!==ind){var prevBoxes=self.columns.eq(ind-1).find(self.options.boxes),curBoxes=column.find(self.options.boxes),curDividers=column.find(self.options.divider);if(prevBoxes.length===curBoxes.length)ind===self.columns.length-1?curBoxes.each(function(n){var box=$(this);if(0===n){var prevGroup=prevBoxes.length%2==0?prevBoxes.eq(prevBoxes.length/2-1).add(prevBoxes.eq(prevBoxes.length/2)):prevBoxes.eq((prevBoxes.length+1)/2-1).add(prevBoxes.eq(prevBoxes.length+1)/2),outerHeight=0;box.find(self.options.contentBox).siblings().each(function(){outerHeight+=$(this).outerHeight(!0)}),box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:prevGroup.eq(0).position().top+(prevGroup.eq(1).position().top+prevGroup.eq(1).height()-prevGroup.eq(0).position().top)/2-(box.height()+outerHeight)/2})}else if(1===n){var prevBox=prevBoxes.last(),totalOffset=prevBox.position().top+prevBox.height();box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:totalOffset+box.height()>column.height()?column.height()-box.outerHeight():totalOffset})}}):curBoxes.each(function(n){var box=$(this),prevBox=prevBoxes.eq(n),outerHeight=0;box.find(self.options.contentBox).siblings().each(function(){outerHeight+=$(this).outerHeight(!0)}),box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:prevBox.position().top+(prevBox.height()-(box.height()+outerHeight))/2}),curDividers.each(function(n){$(this).css({position:"absolute",width:"100%",top:mainDividers.eq(n).position().top})})});else if(ind===self.columns.length-1)curBoxes.each(function(n){var box=$(this);if(0===n){var prevGroup=prevBoxes.length%2==0?prevBoxes.eq(prevBoxes.length/2-1).add(prevBoxes.eq(prevBoxes.length/2)):prevBoxes.eq((prevBoxes.length+1)/2-1).add(prevBoxes.eq(prevBoxes.length+1)/2),outerHeight=0;box.find(self.options.contentBox).siblings().each(function(){outerHeight+=$(this).outerHeight(!0)}),box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:prevGroup.eq(0).position().top+(prevGroup.eq(1).position().top+prevGroup.eq(1).height()-prevGroup.eq(0).position().top)/2-(box.height()+outerHeight)/2})}else if(1===n){var prevBox=prevBoxes.last(),totalOffset=prevBox.position().top+prevBox.height(),outerHeightBox=0;box.find(self.options.contentBox).siblings().each(function(){outerHeightBox+=$(this).outerHeight(!0)}),box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:(totalOffset+box.height()>column.height()?prevBox.position().top:totalOffset)-outerHeightBox})}});else{var ratio=Math.round(prevBoxes.length/curBoxes.length);curBoxes.each(function(n){var box=$(this),prevGroup=prevBoxes.eq(ratio*n).add(prevBoxes.eq(ratio*n+1)),outerHeight=0;box.find(self.options.contentBox).siblings().each(function(){outerHeight+=$(this).outerHeight(!0)}),box.addClass(self.options.activeClass).css({position:"absolute",width:box.parent().width()}).css({top:prevGroup.eq(0).position().top+(prevGroup.eq(1).position().top+prevGroup.eq(1).height()-prevGroup.eq(0).position().top)/2-(box.height()+outerHeight)/2})}),curDividers.each(function(n){$(this).css({position:"absolute",width:"100%",top:mainDividers.eq(n).position().top})})}}})},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}},$.fn.alignColumns=function(opt){return this.each(function(){jQuery(this).data("AlignColumns",new AlignColumns($.extend(opt,{holder:this})))})}}(jQuery),jQuery.fn.layoutImages=function(callback){this.each(function(){var imgs=jQuery(this).find("img").not("[loaded]"),progress=function(){var complete=!0;imgs.each(function(){if(!this.offsetHeight||this.offsetHeight<19)return complete=!1,!1}),complete?(imgs.attr("loaded","true"),"function"==typeof callback&&callback()):setTimeout(progress,100)};imgs.length?progress():"function"==typeof callback&&callback()})};var lightboxGallery={init:function(){function lightboxLoading(url){if(url){var box=jQuery('[data-id="'+url+'"]');box.length?(jQuery("#fancybox-tmp").data("content",box.eq(0).html()),box.attr("data-prev")?(prevUrl=box.attr("data-prev"),jQuery('[data-id="'+prevUrl+'"]').length||preloadHelper(prevUrl),jQuery("#fancybox-left").addClass(visibleBtnClass)):(prevUrl="",jQuery("#fancybox-left").removeClass(visibleBtnClass)),box.attr("data-next")?(nextUrl=box.attr("data-next"),jQuery('[data-id="'+nextUrl+'"]').length||preloadHelper(nextUrl),jQuery("#fancybox-right").addClass(visibleBtnClass)):(nextUrl="",jQuery("#fancybox-right").removeClass(visibleBtnClass)),jQuery.fancybox({content:box.eq(0).html()})):(jQuery.fancybox.showActivity(),jQuery.ajax({url:url,dataType:"json",success:function(data){var response=data,lightboxTmpl=response.tmplID?tmpl(response.tmplID):!!jQuery("#lightbox_tmpl").length&&tmpl("lightbox_tmpl");response.prevUrl?(prevUrl=response.prevUrl,jQuery("#fancybox-left").addClass(visibleBtnClass)):(prevUrl="",jQuery("#fancybox-left").removeClass(visibleBtnClass)),response.nextUrl?(nextUrl=response.nextUrl,jQuery("#fancybox-right").addClass(visibleBtnClass)):(nextUrl="",jQuery("#fancybox-right").removeClass(visibleBtnClass)),lightboxTmpl?(data=lightboxTmpl(response),jQuery("#fancybox-tmp").data("content",data),jQuery.fancybox.hideActivity(),jQuery.fancybox({content:data})):jQuery.fancybox.hideActivity(),nextUrl.length&&preloadHelper(nextUrl),prevUrl.length&&preloadHelper(prevUrl)},error:function(){jQuery.fancybox.hideActivity()}}))}}function imageHandeling(popup){var images,content=popup||jQuery("#fancybox-content"),btns=jQuery("#fancybox-left, #fancybox-right, #fancybox-close");"function"==typeof window.picturefill&&picturefill(),(images=jQuery("img, iframe",content)).length?(jQuery.fancybox.showActivity(),content.css({visibility:"hidden"}),imageLoaded(images,function(){content.show(),jQuery.fancybox.center(),setTimeout(function(){jQuery.fancybox.hideActivity(),content.hide().css({visibility:"",opacity:""}).fadeIn(700,function(){btns.css({visibility:""})})},500)})):(jQuery.fancybox.center(),setTimeout(function(){jQuery.fancybox.hideActivity(),content.hide().css({visibility:"",opacity:""}).fadeIn(700,function(){btns.css({visibility:""})})},500))}function imageLoaded(images,callback){var loadedCount=0,imagesLength=images.length;imagesLength?images.each(function(){function checkLoaded(){(loadedCount+=1)===imagesLength&&callback()}var image=jQuery(this);image.prop("complete")?checkLoaded():image.one("load",checkLoaded)}):callback()}var changeEventHolder=jQuery('<div class="fancybox-inline-tmp"/>'),defaultCenterFunction=jQuery.fancybox.center,visibleBtnClass="visible";initCustomFancyboxCentering();var nextUrl="",prevUrl="",resizeWidthLightbox=function(){var fancyWrap=jQuery("#fancybox-wrap"),fancyContent=jQuery("#fancybox-content"),contentBox=fancyContent.find(".simple-size");fancyWrap.add(fancyContent).css({width:""}).css({width:contentBox.outerWidth()}),jQuery.fancybox.center()};this.currentLink;var self=this;this.fancyboxConfig={ajax:{dataType:"json",success:function(href,data,textStatus,XMLHttpRequest){var response=jQuery.parseJSON(data),lightboxTmpl=self.currentLink&&self.currentLink.data("tmpl")&&jQuery("#"+self.currentLink.data("tmpl")).length?tmpl(self.currentLink.data("tmpl")):response.tmplID?tmpl(response.tmplID):!!jQuery("#lightbox_tmpl").length&&tmpl("lightbox_tmpl");response.prevUrl?(prevUrl=response.prevUrl,jQuery("#fancybox-left").addClass(visibleBtnClass)):(prevUrl="",jQuery("#fancybox-left").removeClass(visibleBtnClass)),response.nextUrl?(nextUrl=response.nextUrl,jQuery("#fancybox-right").addClass(visibleBtnClass)):(nextUrl="",jQuery("#fancybox-right").removeClass(visibleBtnClass)),lightboxTmpl&&(data=lightboxTmpl(response),jQuery("#fancybox-tmp").data("content",data));var holder=jQuery("#tmp-holder");holder.length||(holder=jQuery('<div id="tmp-holder" style="position:relative;height:0;overflow:hidden;" />').appendTo("body"));var box=jQuery("<div />").html(data);box.attr("data-id",href).appendTo(holder),nextUrl&&box.attr("data-next",nextUrl),prevUrl&&box.attr("data-prev",prevUrl),XMLHttpRequest.done(function(){jQuery("#fancybox-tmp").children().length||imageHandeling()})}},padding:0,margin:20,cyclic:!1,autoScale:!1,autoDimensions:!0,overlayShow:!0,overlayOpacity:.65,overlayColor:"#000000",titlePosition:"inside",changeSpeed:0,changeFade:200,onStart:function(links,ind,obj){jQuery.fancybox.currentLink=this.orig;var btns=jQuery("#fancybox-left, #fancybox-right, #fancybox-close").css({visibility:"hidden"});if(0!==jQuery(links).first().attr("href").indexOf("#")||jQuery(links).first().data("href"))if(0===jQuery(links[ind]).data("href").indexOf("#")&&jQuery(links[ind].getAttribute("data-href")).length){var inlinePopup=jQuery(links[ind].getAttribute("data-href")),img=inlinePopup.find("img[data-src]");btns.removeClass(visibleBtnClass),prevUrl=nextUrl="",img.length?(img.attr("srcset",img.data("src")).removeAttr("data-src"),imageHandeling(inlinePopup)):btns.css({visibility:""})}else btns.css({visibility:""});else{delete obj.ajax,obj.href=links[0].getAttribute("href");var popup=jQuery(jQuery(links).first().attr("href"));popup.length&&popup.hasClass("simple-size")&&(jQuery("body").addClass("content-size"),jQuery.fancybox.center=function(){var top=0,left=0;top=fancyWrap.outerHeight()>(window.innerHeight?window.innerHeight:win.height())?win.scrollTop():((window.innerHeight?window.innerHeight:win.height())-fancyWrap.outerHeight())/2+win.scrollTop(),fancyWrap.outerWidth()<win.width()&&(left=(win.width()-fancyWrap.outerWidth())/2),fancyWrap.stop().css({left:left,top:top})},btns.css({visibility:""}))}var content=jQuery("#fancybox-content");jQuery.fancybox.customCenter&&(jQuery.fancybox.center=jQuery.fancybox.customCenter),changeEventHolder.appendTo("body").hide().off("fancybox-change").on("fancybox-change",function(){var holder=jQuery("#tmp-holder");holder.length||(holder=jQuery('<div id="tmp-holder" style="position:relative;height:0;overflow:hidden;" />').appendTo("body")),content.find(">div >div").appendTo(holder),btns.css({visibility:"hidden"}),content.stop(!1,!0).css({visibility:"hidden",opacity:0}),setTimeout(function(){content.stop(!1,!0),imageHandeling(),jQuery.isFunction(window.sss_legacy)&&(document.getElementsByClasssName?sss_legacy(document.getElementsByClasssName("ss-icon")):ss_legacy(sss_getElementsByClasssName(document.body,"ss-icon"))),jQuery.isFunction(window.sss_legacy)&&(document.getElementsByClasssName?sss_legacy(document.getElementsByClasssName("sss-icon")):sss_legacy(sss_getElementsByClasssName(document.body,"sss-icon"))),jQuery("#fancybox-content .image").on("click",function(){lightboxLoading(nextUrl)}),jQuery("#videoPlayer")!=undefined&&jQuery("#videoPlayer").length>0&&$(document).trigger("loadJwPlayer")},400)})},onComplete:function(link,num,obj){jQuery("#fancybox-content .image").on("click",function(){lightboxLoading(nextUrl)});var v_guid=$(link[num]).data("guid");if(v_guid||(v_guid=""),jQuery("#videoPlayer"+v_guid)!=undefined&&jQuery("#videoPlayer"+v_guid).length>0)$(document).trigger("loadJwPlayer",[{guid:v_guid}]);else{var v_OCVideoID=$(link[num]).data("ocvideoid"),v_PlayerID=$(link[num]).data("playerid");if(v_OCVideoID!=undefined&&v_PlayerID!=undefined)new OLYMPIC_CHANNEL.Syndicated(v_OCVideoID,{dimensions:[950,800],id:v_PlayerID})}if((v_PlayerID=$(link[num]).data("playerid"))!=undefined&&FixOCVideoMargin(v_PlayerID),jQuery.isFunction(window.sss_legacy)&&(document.getElementsByClasssName?sss_legacy(document.getElementsByClasssName("ss-icon")):ss_legacy(sss_getElementsByClasssName(document.body,"ss-icon"))),jQuery.isFunction(window.sss_legacy)&&(document.getElementsByClasssName?sss_legacy(document.getElementsByClasssName("sss-icon")):sss_legacy(sss_getElementsByClasssName(document.body,"sss-icon"))),jQuery("#fancybox-left").on("click",function(){prevUrl.length&&lightboxLoading(prevUrl)}),jQuery("#fancybox-right").on("click",function(){nextUrl.length&&lightboxLoading(nextUrl)}),jQuery("#fancybox-content .simple-size").length){jQuery("body");var win=jQuery(window),fancyWrap=(jQuery("#fancybox-bg-ne, #fancybox-bg-e, #fancybox-bg-se"),jQuery("#fancybox-overlay"),jQuery("#fancybox-wrap"));jQuery("#fancybox-content").find(".simple-size");jQuery(window).unbind("resize.fb").bind("resize orientationchange",resizeWidthLightbox),jQuery.fancybox.center=function(){var top=0,left=0;top=fancyWrap.outerHeight()>(window.innerHeight?window.innerHeight:win.height())?win.scrollTop():((window.innerHeight?window.innerHeight:win.height())-fancyWrap.outerHeight())/2+win.scrollTop(),fancyWrap.outerWidth()<win.width()&&(left=(win.width()-fancyWrap.outerWidth())/2),fancyWrap.stop().css({left:left,top:top})},jQuery.fancybox.center()}jQuery(document).bind("keydown.watchLightbox",function(e){37===e.keyCode?lightboxLoading(prevUrl):39===e.keyCode&&lightboxLoading(nextUrl)}),nextUrl.length&&preloadHelper(nextUrl),prevUrl.length&&preloadHelper(prevUrl)},onClosed:function(){jQuery(window).unbind("resize orientationchange",resizeWidthLightbox),jQuery(document).unbind("keydown.watchLightbox"),jQuery.fancybox.center=defaultCenterFunction,jQuery("body").removeClass("content-size"),jQuery("#fancybox-left, #fancybox-right").removeClass(visibleBtnClass)}},this.addLinks({selector:'a.lightbox-link, a[rel*="lightbox"]'})},addLinks:function(opt){var links=jQuery(opt.selector,opt.context||document),self=this;links.on("click",function(e){self.currentLink=jQuery(this)}),links.fancybox(jQuery.extend({},this.fancyboxConfig,opt.config)),setTimeout(function(){var wrap=jQuery("#fancybox-wrap");wrap.length&&!wrap.data("initClose")&&(wrap.data("initClose",!0),wrap.on("click touchend",function(e){jQuery(e.target).is(wrap)&&jQuery.fancybox.close()}))},500)}};!function($){function AjaxLoading(options){this.options=$.extend({items:">*",btnNext:".next-load",contentHolder:".content-holder",btnLoad:".btn-load",activeClass:"active",loadingClass:"loading",disabledClass:"disabled",afterLoaded:!1},options),this.initStructure(),this.attachEvents()}AjaxLoading.prototype={initStructure:function(){this.holder=$(this.options.holder),this.contentHolder=this.holder.find(this.options.contentHolder),this.btnLoad=this.holder.find(this.options.btnLoad),this.ajaxBusy=!1,this.win=$(window),this.tmpl=this.holder.data("tmpl")?tmpl(this.holder.data("tmpl")):null},attachEvents:function(){var self=this,historyState=History.getState();historyState.data.section&&historyState.data.section===this.holder.attr("id")&&($("#"+historyState.data.id).length?this.win.on("load",function(){scrollToBox("#"+historyState.data.id)}):this.loadContent(historyState.data,!0)),this.saveState($(this.options.items,this.contentHolder)),this.checkLoadHandler=function(){self.checkLoad()},this.win.on("resize orientationchange load scroll",self.checkLoadHandler)},checkLoad:function(){!this.ajaxBusy&&this.contentHolder.offset().top+this.contentHolder.height()<=this.win.scrollTop()+this.win.height()&&this.loadContent()},prepareContent:function(content){content.css({position:"relative",top:0,opacity:0})},showContent:function(content){var self=this;content.stop().animate({top:0,opacity:1},{duration:this.options.animSpeed}),setTimeout(function(){content.css({position:"",top:"",opacity:""}),self.checkLoad()},this.options.animSpeed)},loadContent:function(historyData,forceFlag){if(!this.ajaxBusy||forceFlag){this.ajaxBusy=!0,this.holder.addClass(this.options.loadingClass);var self=this;$.ajax({url:this.btnLoad.attr("href"),type:"post",dataType:this.tmpl?"json":"html",success:function(data){var content=[],html="";if(self.tmpl){for(var i=0;i<data.content.length;i++)html+=self.tmpl(data.content[i]);data.lastBtn&&(html+=tmpl("lastBtn_tmpl",data.lastBtn)),content=$(html)}else content=$(data);var items=content[self.tmpl?"filter":"find"](self.options.items),btnNext=self.tmpl?data[self.options.btnNext]?data[self.options.btnNext]:"":content.find(self.options.btnNext).attr("href"),waitCallback=!1;if(items.appendTo(self.contentHolder),self.prepareContent(items),historyData&&historyData.id){var hit=!1;if(data.content.forEach(function(obj){if(obj.id===historyData.id)return hit=!0,!1}),!hit&&data.lastBtn&&data.lastBtn.id===historyData.id&&(hit=!0),!hit)return"function"==typeof self.options.afterLoaded&&self.options.afterLoaded(),self.contentHolder.layoutImages(function(){"function"==typeof collage&&collage(),self.showContent(items)}),void(btnNext.length&&(self.btnLoad.attr("href",btnNext),self.loadContent(historyData,!0)));History.replaceState(null,null),self.contentHolder.layoutImages(function(){self.showContent(items),"function"==typeof collage&&collage(),scrollToBox("#"+historyData.id)})}else waitCallback=!0,"function"==typeof self.options.afterLoaded&&self.options.afterLoaded(),self.contentHolder.layoutImages(function(){self.showContent(items),"function"==typeof collage&&collage(),btnNext.length&&(self.ajaxBusy=!1)});"function"==typeof self.options.afterLoaded&&self.options.afterLoaded(),waitCallback||self.showContent(items),btnNext.length?(self.btnLoad.attr("href",btnNext),waitCallback||(self.ajaxBusy=!1)):(self.win.off("resize orientationchange load scroll",self.checkLoadHandler),self.btnLoad.remove()),self.holder.removeClass(self.options.loadingClass),self.saveState(items),self.checkLoad()}})}},saveState:function(items){var flag=!1,self=this;items.each(function(){var item=$(this),link="a"===item.get(0).tagName.toLowerCase()?item:item.find("a");link.hasClass("lightbox-link")?flag=!0:link.on("click",function(e){e.preventDefault();var id=item.attr("id");History.pushState({section:self.holder.attr("id")?self.holder.attr("id"):"",id:id},document.title,"?section="+(self.holder.attr("id")?self.holder.attr("id"):"")+"&id="+id),window.location=link.attr("href")})}),flag&&void 0!==lightboxGallery&&lightboxGallery.addLinks({selector:'a.lightbox-link, a[rel*="lightbox"]'})}},$.fn.ajaxLoading=function(options){return this.each(function(){var instance=new AjaxLoading($.extend({},options,{holder:this}));$.data(this,"AjaxLoading",instance)})}}(jQuery),function($){function AjaxSelect(options){this.options=$.extend({addClassBeforeAnimation:!0,hideOnClickOutside:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"fade",event:"click"},options),this.init()}AjaxSelect.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=$(this.options.holder),this.selects=this.holder.find(this.options.selects),this.curInd=0,this.ajaxBusy=!1,this.ajax},attachEvents:function(){var self=this;this.selects.each(function(n){var select=$(this);select.on("change",function(){self.curInd=n,self.disabledNext(!0),self.checkOption(select)})}),this.holder.on("reset",function(){self.curInd=0,self.disabledNext()}),self.checkOption(this.selects.eq(this.curInd))},checkOption:function(select){var activeOption=select.find("option:selected");activeOption.attr(this.options.urlAttr)&&this.contentLoad(activeOption)},contentLoad:function(option){var self=this;this.ajaxBusy&&this.ajax.abort(),this.ajaxBusy=!0,this.ajax=$.ajax({url:option.attr(this.options.urlAttr),type:"get",dataType:"html",success:function(data){var select=self.selects.eq(self.curInd+1),options=$(self.options.appendItems,data);select.length&&options.length&&(options.addClass(self.options.addClass),select.find("."+self.options.addClass).length&&select.find("."+self.options.addClass).remove(),options.appendTo(select),select.prop("selectedIndex",0),select.removeProp("disabled"),setTimeout(function(){self.refreshSelect(select)},0),self.ajaxBusy=!1)}})},disabledNext:function(flag){var self=this;this.selects.filter(function(index){return index>self.curInd}).each(function(index){var select=$(this);this.selectedIndex=0,this.disabled=!0,self.refreshSelect($(this)),flag&&0===index&&$(this).data("jcf-instance").instance.selectText.text(select.data("loading")?select.data("loading"):"Loading...")})},refreshSelect:function(select){var refreshSelect=select||this.selects.eq(this.curInd);refreshSelect.data("jcf-instance")&&refreshSelect.data("jcf-instance").refresh()},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}},$.fn.ajaxSelect=function(opt){return this.each(function(){jQuery(this).data("AjaxSelect",new AjaxSelect($.extend(opt,{holder:this})))})}}(jQuery),function($){function Autocomplete(options){this.options=$.extend({input:".autocomplete-input",drop:".drop",sourceAttr:"data-source",sourceCallbackAttr:"data-source-callback",customSource:null,items:"li",focusClass:"focus"},options),this.init()}Autocomplete.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",!0))},findElements:function(){this.holder=$(this.options.holder),this.input=this.holder.find(this.options.input).attr("autocomplete","off"),this.drop=this.holder.find(this.options.drop).addClass(hiddenClass),this.items=$(),this.visibleItems=$(),this.currIndex=0,this.ajaxBusy=!1,this.dropOpen=!1},attachEvents:function(){var self=this;this.resultHandler=function(e){38!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&(self.ajaxBusy?self.showResult():self.loadSearchitems(),self.makeCallback("onChange",!0))},this.outsideClickHandler=function(e){$(e.target).closest(self.input).length||$(e.target).closest(self.drop).length||self.hideDrop()},this.selectHandler=function(){self.input.val($.trim($(this).text())),self.hideDrop()},this.chooseItemHadler=function(e){38!=e.keyCode&&40!=e.keyCode||(e.preventDefault(),self.chooseItem(e.keyCode)),13==e.keyCode&&self.dropOpen&&(e.preventDefault(),self.selectHandler.apply(self.visibleItems.filter("."+self.options.focusClass).get(0)))},jQuery(document).off("click",this.outsideClickHandler),this.input.on("keyup blur focus change",this.resultHandler),this.input.on("keydown",this.chooseItemHadler)},loadSearchitems:function(){var self=this,sourceCallbackAttr=null;this.options.sourceCallbackAttr&&(sourceCallbackAttr=this.holder.attr(this.options.sourceCallbackAttr)),sourceCallbackAttr?(this.callBackResultsCache||(this.callBackResultsCache=window[sourceCallbackAttr]()),self.onajaxSuccess(this.callBackResultsCache)):this.ajaxBusy||(this.ajaxBusy=!0,$.ajax({url:this.holder.attr(this.options.sourceAttr),type:"get",dataType:"text",success:function(text){self.onajaxSuccess(text)}}))},onajaxSuccess:function(text){this.drop.html(text),this.items=this.items.add(this.drop.find(this.options.items)),this.makeCallback("onSuccess",!0),this.showResult(),this.items.on("click",this.selectHandler)},showResult:function(){var self=this,inputText=this.input.val();inputText.length>0?(this.showDrop(),this.items.each(function(){var item=$(this);-1!==item.text().toUpperCase().indexOf(inputText.toUpperCase())?(item.removeClass(hiddenClass),self.innerHighlight(this,inputText.toUpperCase())):item.find("a").data("synonyms")&&self.hits(item.find("a").data("synonyms"),inputText)?(item.removeClass(hiddenClass),self.removeHighlight(item)):(self.removeHighlight(item),item.addClass(hiddenClass))}),this.visibleItems=this.items.not("."+hiddenClass),this.visibleItems.length?this.showDrop():this.hideDrop()):this.hideDrop(),this.currIndex=0,this.refreshItamsState(),this.makeCallback("onShowResult",!0)},hits:function(synonyms,inputText){for(var arr=-1!==synonyms.indexOf(",")?synonyms.split(","):[synonyms],i=0;i<arr.length;i++)if(-1!==arr[i].toUpperCase().indexOf(inputText.toUpperCase()))return!0;return!1},chooseItem:function(keyCode){(40===keyCode?1:-1)>0?this.nextItem():this.prevItem(),this.input.val($.trim(this.visibleItems.eq(this.currIndex).text()))},nextItem:function(){this.currIndex<this.visibleItems.length-1?this.currIndex++:this.currIndex=0,this.refreshItamsState()},prevItem:function(){this.currIndex>0?this.currIndex--:this.currIndex=this.visibleItems.length-1,this.refreshItamsState()},refreshItamsState:function(){this.items.removeClass(this.options.focusClass),this.visibleItems.eq(this.currIndex).addClass(this.options.focusClass)},showDrop:function(){this.drop.removeClass(hiddenClass),jQuery(document).on("click",this.outsideClickHandler),this.dropOpen=!0,this.makeCallback("onDropShow",!0)},hideDrop:function(){this.drop.addClass(hiddenClass),jQuery(document).off("click",this.outsideClickHandler),this.dropOpen=!1,this.makeCallback("onDropHide",!0)},innerHighlight:function(item,text){var skip=0;if(this.removeHighlight($(item)),3===item.nodeType){var pos=item.data.toUpperCase().indexOf(text);if(pos>=0){var spannode=document.createElement("b");spannode.className="highlight";var middlebit=item.splitText(pos),middleclone=(middlebit.splitText(text.length),middlebit.cloneNode(!0));spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1}}else if(1===item.nodeType&&item.childNodes&&!/(script|style)/i.test(item.tagName))for(var i=0;i<item.childNodes.length;++i)i+=this.innerHighlight(item.childNodes[i],text);return skip},removeHighlight:function(item){item.find("b.highlight").each(function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()}).end()},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}};var hiddenClass="js-drop-hidden";!function(){var dropStyleSheet=$('<style type="text/css">')[0],dropStyleRule="."+hiddenClass;dropStyleRule+="{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",dropStyleSheet.styleSheet?dropStyleSheet.styleSheet.cssText=dropStyleRule:dropStyleSheet.appendChild(document.createTextNode(dropStyleRule)),$("head").append(dropStyleSheet)}(),$.fn.autocomplete=function(opt){return this.each(function(){$(this).data("Autocomplete",new Autocomplete($.extend({holder:this},opt)))})}}(jQuery),ResponsiveHelper=function($){function resizeHandler(){var winWidth=win.width();winWidth!==prevWinWidth&&(prevWinWidth=winWidth,$.each(handlers,function(index,rangeObject){$.each(rangeObject.data,function(property,item){item.currentActive&&!matchRange(item.range[0],item.range[1])&&(item.currentActive=!1,"function"==typeof item.disableCallback&&item.disableCallback())}),$.each(rangeObject.data,function(property,item){!item.currentActive&&matchRange(item.range[0],item.range[1])&&(item.currentActive=!0,"function"==typeof item.enableCallback&&item.enableCallback())})}))}function matchRange(r1,r2){var mediaQueryString="";return r1>0&&(mediaQueryString+="(min-width: "+r1+"px)"),r2<Infinity&&(mediaQueryString+=(mediaQueryString?" and ":"")+"(max-width: "+r2+"px)"),matchQuery(mediaQueryString,r1,r2)}function matchQuery(query,r1,r2){return window.matchMedia&&nativeMatchMedia?matchMedia(query).matches:window.styleMedia?styleMedia.matchMedium(query):window.media?media.matchMedium(query):prevWinWidth>=r1&&prevWinWidth<=r2}function parseRange(rangeStr){var rangeData=rangeStr.split("..");return[parseInt(rangeData[0],10)||-Infinity,parseInt(rangeData[1],10)||Infinity].sort(function(a,b){return a-b})}var prevWinWidth,handlers=[],win=$(window),nativeMatchMedia=!1;return window.matchMedia&&(window.Window&&window.matchMedia===Window.prototype.matchMedia?nativeMatchMedia=!0:window.matchMedia.toString().indexOf("native")>-1&&(nativeMatchMedia=!0)),win.bind("load resize orientationchange",resizeHandler),{addRange:function(ranges){var result={data:{}};$.each(ranges,function(property,data){result.data[property]={range:parseRange(property),enableCallback:data.on,disableCallback:data.off}}),handlers.push(result),prevWinWidth=null,resizeHandler()}}}(jQuery),function($){function ScrollGallery(options){this.options=$.extend({mask:"div.mask",slider:">*",slides:">*",activeClass:"active",disabledClass:"disabled",btnPrev:"a.btn-prev",btnNext:"a.btn-next",generatePagination:!1,pagerList:"<ul>",pagerListItem:'<li><a href="#"></a></li>',pagerListItemText:"a",pagerLinks:".pagination li",currentNumber:"span.current-num",totalNumber:"span.total-num",btnPlay:".btn-play",btnPause:".btn-pause",btnPlayPause:".btn-play-pause",galleryReadyClass:"gallery-js-ready",autorotationActiveClass:"autorotation-active",autorotationDisabledClass:"autorotation-disabled",stretchSlideToMask:!1,circularRotation:!0,disableWhileAnimating:!1,ajaxAttr:"data-slides",autoRotation:!1,pauseOnHover:!isTouchDevice,maskAutoSize:!1,maskAutoWidth:!1,maskShadow:".mask-l, .mask-r",switchTime:4e3,animSpeed:600,event:"click",swipeThreshold:15,handleTouch:!0,vertical:!1,useTranslate3D:!1,step:!1},options),this.init()}ScrollGallery.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.onWindowResize(),this.resumeRotation(),this.makeCallback("onInit",this))},findElements:function(){if(this.fullSizeFunction=this.options.vertical?"outerHeight":"outerWidth",this.innerSizeFunction=this.options.vertical?"height":"width",this.slideSizeFunction="outerHeight",this.maskSizeProperty="height",this.animProperty=this.options.vertical?"marginTop":"marginLeft",this.gallery=$(this.options.holder).addClass(this.options.galleryReadyClass),this.mask=this.gallery.find(this.options.mask),this.slider=this.mask.find(this.options.slider),this.slides=this.slider.find(this.options.slides),this.btnPrev=this.gallery.find(this.options.btnPrev),this.btnNext=this.gallery.find(this.options.btnNext),this.currentStep=0,this.stepsCount=0,this.maskShadow=this.gallery.find(this.options.maskShadow),this.win=$(window),this.options.slidesHolders&&(this.slidesHolders=this.slider.find(this.options.slidesHolders)),!1===this.options.step){var activeSlide=this.slides.filter("."+this.options.activeClass);activeSlide.length&&(this.currentStep=this.slides.index(activeSlide))}this.makeCallback("onBeforeInit",this),this.calculateOffsets(),this.options.slidesHolders&&(this.currentStep=this.stepsCount-1),this.options.slidesHolders&&(this.slidesHolders=this.slider.find(this.options.slidesHolders)),"string"==typeof this.options.generatePagination?(this.pagerLinks=$(),this.buildPagination()):(this.pagerLinks=this.gallery.find(this.options.pagerLinks),this.attachPaginationEvents()),this.btnPlay=this.gallery.find(this.options.btnPlay),this.btnPause=this.gallery.find(this.options.btnPause),this.btnPlayPause=this.gallery.find(this.options.btnPlayPause),this.curNum=this.gallery.find(this.options.currentNumber),this.allNum=this.gallery.find(this.options.totalNumber),this.preload=!1,this.numPreload=0,this.slider.data("tmpl")?this.tmpl=!!jQuery("#"+this.slider.data("tmpl")).length&&tmpl(this.slider.data("tmpl")):this.tmpl=!!$("#item_tmpl").length&&tmpl("item_tmpl"),this.slider.attr("data-preload")&&(this.preload=!0),this.slider.attr(this.options.ajaxAttr)&&this.loadSlides()},attachEvents:function(){var self=this;this.bindHandlers(["onWindowResize"]),this.win.bind("load resize orientationchange",this.onWindowResize),this.maskShadow.length&&(this.refreshMaskHandler=function(){self.refreshMask()},this.win.on("load resize orientationchange",this.refreshMaskHandler),this.refreshMaskHandler()),this.btnPrev.length&&(this.prevSlideHandler=function(e){e.preventDefault(),self.prevSlide()},this.btnPrev.bind(this.options.event,this.prevSlideHandler)),this.btnNext.length&&(this.nextSlideHandler=function(e){e.preventDefault(),self.nextSlide()},this.btnNext.bind(this.options.event,this.nextSlideHandler)),this.options.pauseOnHover&&!isTouchDevice&&(this.hoverHandler=function(){self.options.autoRotation&&(self.galleryHover=!0,self.pauseRotation())},this.leaveHandler=function(){self.options.autoRotation&&(self.galleryHover=!1,self.resumeRotation())},this.gallery.bind({mouseenter:this.hoverHandler,mouseleave:this.leaveHandler})),this.btnPlay.length&&(this.btnPlayHandler=function(e){e.preventDefault(),self.startRotation()},this.btnPlay.bind(this.options.event,this.btnPlayHandler)),this.btnPause.length&&(this.btnPauseHandler=function(e){e.preventDefault(),self.stopRotation()},this.btnPause.bind(this.options.event,this.btnPauseHandler)),this.btnPlayPause.length&&(this.btnPlayPauseHandler=function(e){e.preventDefault(),self.gallery.hasClass(self.options.autorotationActiveClass)?self.stopRotation():self.startRotation()},this.btnPlayPause.bind(this.options.event,this.btnPlayPauseHandler)),isTouchDevice&&this.options.useTranslate3D&&this.slider.css({"-webkit-transform":"translate3d(0px, 0px, 0px)"}),isTouchDevice&&this.options.handleTouch&&window.Hammer&&this.mask.length&&(this.swipeHandler=new Hammer.Manager(this.mask[0]),this.swipeHandler.add(new Hammer.Pan({direction:self.options.vertical?Hammer.DIRECTION_VERTICAL:Hammer.DIRECTION_HORIZONTAL,threshold:self.options.swipeThreshold})),this.swipeHandler.on("panstart",function(){self.galleryAnimating?self.swipeHandler.stop():(self.pauseRotation(),self.originalOffset=parseFloat(self.slider.css(self.animProperty)))}).on("panmove",function(e){var tmpOffset=self.originalOffset+e[self.options.vertical?"deltaY":"deltaX"];tmpOffset=Math.max(Math.min(0,tmpOffset),self.maxOffset),self.slider.css(self.animProperty,tmpOffset)}).on("panend",function(e){self.resumeRotation(),e.distance>self.options.swipeThreshold?e.offsetDirection===Hammer.DIRECTION_RIGHT||e.offsetDirection===Hammer.DIRECTION_DOWN?self.nextSlide():self.prevSlide():self.switchSlide()}))},getStructure:function(obj){var self=this,html="";return $(obj.slides).each(function(){html+=self.tmpl(this)}),html},addContent:function(obj,direction){var html=this.getStructure(obj);direction?direction>0?$(html).appendTo(this.slider):$(html).prependTo(this.slider):this.slider.html(html)},refreshGallery:function(obj,direction){if(this.slides=this.slider.children(),direction||this.slides.eq(0).addClass(this.options.activeClass),direction&&direction<0){var itemWidth=this.slides.filter("."+this.options.activeClass).outerWidth(!0),offset=parseInt(this.slider.css("marginLeft"))-itemWidth*obj.slides.length;this.slider.css({marginLeft:offset}),this.currentStep=Math.ceil(Math.abs(offset)/this.mask.width())}this.calculateOffsets(),this.buildPagination(),this.refreshState()},updateUrl:function(obj,direction){direction?direction>0?obj.nextUrl?this.slidesObj.nextUrl=obj.nextUrl:this.slidesObj.nextUrl=!1:obj.prevUrl?this.slidesObj.prevUrl=obj.prevUrl:this.slidesObj.prevUrl=!1:(this.slidesObj=obj,obj.nextUrl&&(this.slidesObj.nextUrl=obj.nextUrl),obj.prevUrl&&(this.slidesObj.prevUrl=obj.prevUrl))},loadSlides:function(direction){this.getSlides(direction)},getSlides:function(direction,preload){var self=this;this.loadingFlag=!0;var url=this.slider.attr(this.options.ajaxAttr);direction&&(url=direction>0?this.slidesObj&&this.slidesObj.nextUrl?this.slidesObj.nextUrl:"":this.slidesObj&&this.slidesObj.prevUrl?this.slidesObj.prevUrl:""),url?jQuery.ajax({type:"get",url:url,dataType:"json",success:function(msg){self.updateUrl(msg,direction),self.addContent(msg,direction),window.picturefill&&window.picturefill(),self.refreshGallery(msg,direction),self.loadingFlag=!1,direction&&!preload&&(direction>0?self.nextSlide(!1,!0):self.prevSlide(!0))},error:function(){self.loadingFlag=!1}}):this.loadingFlag=!1},preloadSlides:function(){this.getSlides(1,!0)},refreshMask:function(){var slideWidth=this.slider.children().eq(0).outerWidth(!0),slidesLen=Math.max(1,Math.floor(this.mask.width()/slideWidth)),shadowWidth=(this.win.width()-slidesLen*slideWidth)/2;this.maskShadow.css({width:shadowWidth})},refreshActive:function(){if(!this.direction){this.slides.removeClass(this.options.activeClass);for(var currentOffset=this.currentStep*this.stepSize,i=0;i<this.slides.length-1;i++){var slide=this.slides.eq(i);currentOffset===slide.position().left&&slide.addClass(this.options.activeClass)}}},onWindowResize:function(){this.galleryAnimating?this.resizeQueue=!0:(this.calculateOffsets(),this.refreshPosition(),this.buildPagination(),this.refreshState(),this.resizeQueue=!1)},refreshPosition:function(){this.currentStep=Math.min(this.currentStep,this.stepsCount-1),this.tmpProps={},this.tmpProps[this.animProperty]=this.getStepOffset(),this.slider.stop().css(this.tmpProps)},calculateOffsets:function(){var tmpOffset,tmpStep,self=this,extraSpace=0,tmpObj={};if($.isFunction(this.options.extraSpace)&&(extraSpace=this.options.extraSpace()),this.options.stretchSlideToMask&&(tmpObj[this.innerSizeFunction]=this.mask[this.innerSizeFunction](),this.slides.css(tmpObj)),this.slidesHolders&&(tmpObj[this.innerSizeFunction]=this.mask[this.innerSizeFunction](),this.slidesHolders.css(tmpObj)),this.makeCallback("onResizeSlides",this),this.options.maskAutoWidth&&this.slides.length){var slideWidth=this.slides.eq(0).outerWidth(!0);this.mask.css({width:Math.floor(this.gallery.width()/slideWidth)*slideWidth})}if(this.maskSize=this.mask[this.innerSizeFunction](),this.sumSize=this.getSumSize(),this.maxOffset=this.maskSize-this.sumSize+extraSpace,this.options.vertical&&this.options.maskAutoSize){this.options.step=1,this.stepsCount=this.slides.length,this.stepOffsets=[0],tmpOffset=0;for(var i=0;i<this.slides.length;i++)tmpOffset-=$(this.slides[i])[this.fullSizeFunction](!0),this.stepOffsets.push(tmpOffset);this.maxOffset=tmpOffset}else if("number"==typeof this.options.step&&this.options.step>0)for(this.stepSize=this.slides.first().outerWidth(!0),this.slideDimensions=[],this.slides.each($.proxy(function(ind,obj){self.slideDimensions.push($(obj)[self.fullSizeFunction](!0))},this)),this.slidesHolders&&(this.slideDimensions=[],this.slides.each($.proxy(function(ind,obj){var slideWidth=$(obj)[self.fullSizeFunction](!0);if(slideWidth>self.maskSize){var x=Math.floor(slideWidth/self.maskSize);slideWidth-x*self.maskSize!=0&&self.slideDimensions.push(slideWidth-x*self.maskSize);for(var i=0;i<x;i++)self.slideDimensions.push(self.maskSize)}else self.slideDimensions.push(slideWidth)},this))),this.stepOffsets=[0],this.stepsCount=1,tmpOffset=tmpStep=0;tmpOffset>this.maxOffset;)tmpOffset-=this.getSlideSize(tmpStep,tmpStep+this.options.step),tmpStep+=this.options.step,this.stepOffsets.push(Math.max(tmpOffset,this.maxOffset)),this.stepsCount++;else for(this.stepSize=this.maskSize,this.stepsCount=1,tmpOffset=0;tmpOffset>this.maxOffset;)tmpOffset-=this.stepSize,this.stepsCount++},getSumSize:function(){var sum=0,extraSum=0;return this.slides.each($.proxy(function(ind,obj){sum+=$(obj)[this.fullSizeFunction](!0)},this)),this.slidesHolders?(this.slidesHolders.each($.proxy(function(ind,obj){extraSum+=$(obj)[this.fullSizeFunction](!0)},this)),this.slider.css(this.innerSizeFunction,extraSum)):this.slider.css(this.innerSizeFunction,sum),sum},getStepOffset:function(step){return step=step||this.currentStep,"number"==typeof this.options.step?this.stepOffsets[step]:Math.min(0,Math.max(-step*this.stepSize,this.maxOffset))},getSlideSize:function(i1,i2){for(var sum=0,i=i1;i<Math.min(i2,this.slideDimensions.length);i++)sum+=this.slideDimensions[i];return sum},buildPagination:function(){if("string"==typeof this.options.generatePagination&&(this.pagerHolder||(this.pagerHolder=this.gallery.find(this.options.generatePagination)),this.pagerHolder.length&&this.oldStepsCount!=this.stepsCount)){this.oldStepsCount=this.stepsCount,this.pagerHolder.empty(),this.pagerList=$(this.options.pagerList).appendTo(this.pagerHolder);for(var i=0;i<this.stepsCount;i++)$(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i+1);this.pagerLinks=this.pagerList.children(),this.attachPaginationEvents()}},attachPaginationEvents:function(){var self=this;this.pagerLinksHandler=function(e){e.preventDefault(),self.numSlide(self.pagerLinks.index(e.currentTarget))},this.pagerLinks.bind(this.options.event,this.pagerLinksHandler)},prevSlide:function(loadedFlag){this.options.disableWhileAnimating&&this.galleryAnimating||(this.direction=!1,this.slidesObj?loadedFlag||this.mask.offset().left-this.slider.offset().left>=this.stepSize?(this.currentStep--,this.switchSlide()):this.slidesObj.prevUrl?this.loadSlides(-1):this.currentStep>0&&(this.currentStep--,this.switchSlide()):this.currentStep>0?(this.currentStep--,this.switchSlide()):this.options.circularRotation?(this.currentStep=this.stepsCount-1,this.switchSlide()):this.loadSlides(-1))},nextSlide:function(fromAutoRotation,loadedFlag){this.options.disableWhileAnimating&&this.galleryAnimating||(this.direction=!0,this.slidesObj?loadedFlag||this.sumSize-(this.stepSize*(this.currentStep+1)+this.maskSize)>=0?(this.currentStep++,this.switchSlide(),this.preload&&this.preloadSlides()):this.slidesObj.nextUrl?this.loadSlides(1):this.currentStep<this.stepsCount-1&&(this.currentStep++,this.switchSlide()):this.currentStep<this.stepsCount-1?(this.currentStep++,this.switchSlide()):(this.options.circularRotation||!0===fromAutoRotation)&&(this.currentStep=0,this.switchSlide()))},numSlide:function(c,flag){flag?this.switchSlide(flag):this.currentStep!=c&&(this.currentStep=c,this.switchSlide())},switchSlide:function(flag){var self=this;this.galleryAnimating=!0,this.tmpProps={},this.tmpProps[this.animProperty]=this.getStepOffset(),this.slider.stop().animate(this.tmpProps,{duration:flag?0:this.options.animSpeed,complete:function(){self.galleryAnimating=!1,self.resizeQueue&&self.onWindowResize(),self.makeCallback("onChange",self),self.autoRotate()}}),this.refreshState(),this.makeCallback("onBeforeChange",this)},refreshState:function(initial){1!==this.options.step&&this.stepsCount!==this.slides.length||this.slides.removeClass(this.options.activeClass).eq(this.currentStep).addClass(this.options.activeClass),this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentStep).addClass(this.options.activeClass),this.curNum.html(this.currentStep+1),this.allNum.html(this.stepsCount),this.options.maskAutoSize&&"number"==typeof this.options.step&&(this.tmpProps={},this.tmpProps[this.maskSizeProperty]=this.slides.eq(Math.min(this.currentStep,this.slides.length-1))[this.slideSizeFunction](!0),this.mask.stop()[initial?"css":"animate"](this.tmpProps)),this.options.circularRotation||(this.btnPrev.add(this.btnNext).removeClass(this.options.disabledClass),this.slidesObj?(0!==this.currentStep||this.slidesObj.prevUrl||this.btnPrev.addClass(this.options.disabledClass),this.currentStep!==this.stepsCount-1||this.slidesObj.nextUrl||this.btnNext.addClass(this.options.disabledClass)):(0===this.currentStep&&this.btnPrev.addClass(this.options.disabledClass),this.currentStep===this.stepsCount-1&&this.btnNext.addClass(this.options.disabledClass))),this.gallery.toggleClass("not-enough-slides",this.sumSize<=this.maskSize)},startRotation:function(){this.options.autoRotation=!0,this.galleryHover=!1,this.autoRotationStopped=!1,this.resumeRotation()},stopRotation:function(){this.galleryHover=!0,this.autoRotationStopped=!0,this.pauseRotation()},pauseRotation:function(){this.gallery.addClass(this.options.autorotationDisabledClass),this.gallery.removeClass(this.options.autorotationActiveClass),clearTimeout(this.timer)},resumeRotation:function(){this.autoRotationStopped||(this.gallery.addClass(this.options.autorotationActiveClass),this.gallery.removeClass(this.options.autorotationDisabledClass),this.autoRotate())},autoRotate:function(){var self=this;clearTimeout(this.timer),!this.options.autoRotation||this.galleryHover||this.autoRotationStopped?this.pauseRotation():this.timer=setTimeout(function(){self.nextSlide(!0)},this.options.switchTime)},bindHandlers:function(handlersList){var self=this;$.each(handlersList,function(index,handler){var origHandler=self[handler];self[handler]=function(){return origHandler.apply(self,arguments)}})},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}},destroy:function(){$(window).unbind("load resize orientationchange",this.onWindowResize),this.btnPrev.unbind(this.options.event,this.prevSlideHandler),this.btnNext.unbind(this.options.event,this.nextSlideHandler),this.pagerLinks.unbind(this.options.event,this.pagerLinksHandler),this.gallery.unbind("mouseenter",this.hoverHandler),this.gallery.unbind("mouseleave",this.leaveHandler),this.stopRotation(),this.btnPlay.unbind(this.options.event,this.btnPlayHandler),this.btnPause.unbind(this.options.event,this.btnPauseHandler),this.btnPlayPause.unbind(this.options.event,this.btnPlayPauseHandler),this.swipeHandler&&this.swipeHandler.destroy();var unneededClasses=[this.options.galleryReadyClass,this.options.autorotationActiveClass,this.options.autorotationDisabledClass];this.gallery.removeClass(unneededClasses.join(" ")),this.slider.add(this.slides).removeAttr("style"),"string"==typeof this.options.generatePagination&&this.pagerHolder.empty()}};var isTouchDevice=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.fn.scrollGallery=function(opt){return this.each(function(){$(this).data("ScrollGallery",new ScrollGallery($.extend(opt,{holder:this})))})}}(jQuery),function($){function OpenClose(options){this.options=$.extend({addClassBeforeAnimation:!0,hideOnClickOutside:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"fade",event:"click"},options),this.init()}OpenClose.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=$(this.options.holder),this.opener=this.holder.find(this.options.opener),this.slider=this.holder.find(this.options.slider)},attachEvents:function(){var self=this;this.eventHandler=function(e){e.preventDefault(),self.slider.hasClass(slideHiddenClass)?self.showSlide():self.hideSlide()},self.opener.bind(self.options.event,this.eventHandler),"over"===self.options.event&&(self.opener.bind("mouseenter",function(){self.showSlide()}),self.holder.bind("mouseleave",function(){self.hideSlide()})),self.outsideClickHandler=function(e){if(self.options.hideOnClickOutside){var target=$(e.target);target.is(self.holder)||target.closest(self.holder).length||self.hideSlide()}},this.holder.hasClass(this.options.activeClass)?$(document).bind("click touchstart",self.outsideClickHandler):this.slider.addClass(slideHiddenClass)},showSlide:function(){var self=this;self.options.addClassBeforeAnimation&&self.holder.addClass(self.options.activeClass),self.slider.removeClass(slideHiddenClass),$(document).bind("click touchstart",self.outsideClickHandler),self.makeCallback("animStart",!0),toggleEffects[self.options.effect].show({box:self.slider,speed:self.options.animSpeed,complete:function(){self.options.addClassBeforeAnimation||self.holder.addClass(self.options.activeClass),self.makeCallback("animEnd",!0)}})},hideSlide:function(){var self=this;self.options.addClassBeforeAnimation&&self.holder.removeClass(self.options.activeClass),$(document).unbind("click touchstart",self.outsideClickHandler),self.makeCallback("animStart",!1),toggleEffects[self.options.effect].hide({box:self.slider,speed:self.options.animSpeed,complete:function(){self.options.addClassBeforeAnimation||self.holder.removeClass(self.options.activeClass),self.slider.addClass(slideHiddenClass),self.makeCallback("animEnd",!1)}})},destroy:function(){this.slider.removeClass(slideHiddenClass).css({display:""}),this.opener.unbind(this.options.event,this.eventHandler),this.holder.removeClass(this.options.activeClass).removeData("OpenClose"),$(document).unbind("click touchstart",this.outsideClickHandler)},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}};var slideHiddenClass="js-slide-hidden";!function(){var tabStyleSheet=$('<style type="text/css">')[0],tabStyleRule="."+slideHiddenClass;tabStyleRule+="{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",tabStyleSheet.styleSheet?tabStyleSheet.styleSheet.cssText=tabStyleRule:tabStyleSheet.appendChild(document.createTextNode(tabStyleRule)),$("head").append(tabStyleSheet)}();var toggleEffects={slide:{show:function(o){o.box.stop(!0).hide().slideDown(o.speed,o.complete)},hide:function(o){o.box.stop(!0).slideUp(o.speed,o.complete)}},fade:{show:function(o){o.box.stop(!0).hide().fadeIn(o.speed,o.complete)},hide:function(o){o.box.stop(!0).fadeOut(o.speed,o.complete)}},none:{show:function(o){o.box.hide().show(0,o.complete)},hide:function(o){o.box.hide(0,o.complete)}}};$.fn.openClose=function(opt){return this.each(function(){jQuery(this).data("OpenClose",new OpenClose($.extend(opt,{holder:this})))})}}(jQuery),function($){$.fn.slideAccordion=function(opt){var options=$.extend({addClassBeforeAnimation:!1,allowClickWhenExpanded:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:300,onInit:null,collapsible:!0,event:"click"},opt);return this.each(function(){var accordion=$(this),items=accordion.find(":has("+options.slider+")");items.each(function(){var item=$(this),opener=item.find(options.opener),slider=item.find(options.slider);item.data("slide",slider),opener.bind(options.event,function(e){if(!slider.is(":animated"))if(item.hasClass(options.activeClass)){if(options.allowClickWhenExpanded)return;options.collapsible&&slider.slideUp(options.animSpeed,function(){hideSlide(slider),item.removeClass(options.activeClass)})}else{var levelItems=item.siblings("."+options.activeClass),sliderElements=levelItems.find(options.slider);item.addClass(options.activeClass),showSlide(slider).hide().slideDown(options.animSpeed),sliderElements.slideUp(options.animSpeed,function(){levelItems.removeClass(options.activeClass),hideSlide(sliderElements)})}e.preventDefault()}),item.on("open",function(){item.hasClass(options.activeClass)||(item.addClass(options.activeClass),showSlide(slider).hide().slideDown(options.animSpeed))}),item.hasClass(options.activeClass)?showSlide(slider):hideSlide(slider),"function"==typeof options.onInit&&options.onInit(accordion,items)})})};var showSlide=function(slide){return slide.css({position:"",top:"",left:"",width:""})},hideSlide=function(slide){return slide.show().css({position:"absolute",top:-9999,left:-9999,width:slide.width()})}}(jQuery),function($){function MobileNav(options){this.options=$.extend({container:null,hideOnClickOutside:!1,menuActiveClass:"nav-active",menuOpener:".nav-opener",menuDrop:".nav-drop",toggleEvent:"click",outsideClickEvent:"click touchstart pointerdown MSPointerDown"},options),this.initStructure(),this.attachEvents()}MobileNav.prototype={initStructure:function(){this.page=$("html"),this.container=$(this.options.container),this.opener=this.container.find(this.options.menuOpener),this.drop=this.container.find(this.options.menuDrop)},attachEvents:function(){var self=this;activateResizeHandler&&(activateResizeHandler(),activateResizeHandler=null),this.outsideClickHandler=function(e){if(self.isOpened()){var target=$(e.target);target.closest(self.opener).length||target.closest(self.drop).length||self.hide()}},this.openerClickHandler=function(e){e.preventDefault(),self.toggle()},$(window).on("hideMenu",function(){self.hide()}),this.opener.on(this.options.toggleEvent,this.openerClickHandler)},isOpened:function(){return this.container.hasClass(this.options.menuActiveClass)},show:function(){this.container.addClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.on(this.options.outsideClickEvent,this.outsideClickHandler),"function"==typeof this.options.onShow&&this.options.onShow()},hide:function(){this.container.removeClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.off(this.options.outsideClickEvent,this.outsideClickHandler),"function"==typeof this.options.onHide&&this.options.onHide()},toggle:function(){this.isOpened()?this.hide():this.show()},destroy:function(){this.container.removeClass(this.options.menuActiveClass),this.opener.off(this.options.toggleEvent,this.clickHandler),this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)}};var activateResizeHandler=function(){var flag,timer,win=$(window),doc=$("html"),removeClassHandler=function(){flag=!1,doc.removeClass("resize-active")};win.on("resize orientationchange",function(){flag||(flag=!0,doc.addClass("resize-active")),clearTimeout(timer),timer=setTimeout(removeClassHandler,500)})};$.fn.mobileNav=function(options){return this.each(function(){var instance=new MobileNav($.extend({},options,{container:this}));$.data(this,"MobileNav",instance)})}}(jQuery),function($){var isWindowsPhone=/Windows Phone/.test(navigator.userAgent),isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.fn.tabNav=function(opt){var options=$.extend({hoverClass:"hover",items:"li",opener:">a",delay:10},opt);return isWindowsPhone||isTouchDevice?this:this.each(function(){var nav=$(this);nav.find(options.items).each(function(index,navItem){var navActive,touchNavActive,timer,item=$(this);item.find(options.opener).bind("focus",function(){navActive=nav.hasClass("js-nav-active"),touchNavActive=window.TouchNav&&TouchNav.isActiveOn(navItem),navActive&&!touchNavActive||initSimpleNav(),item.trigger(navActive&&touchNavActive?"itemhover":"mouseenter")}).bind("blur",function(){item.trigger(navActive&&touchNavActive?"itemleave":"mouseleave")});var initSimpleNav=function(){initSimpleNav.done||(initSimpleNav.done=!0,item.hover(function(){clearTimeout(timer),timer=setTimeout(function(){item.addClass(options.hoverClass)},options.delay)},function(){clearTimeout(timer),timer=setTimeout(function(){item.removeClass(options.hoverClass)},options.delay)}))}})})}}(jQuery),function(window,document,$){function args(elem){var newAttrs={},rinlinejQuery=/^jQuery\d+$/;return $.each(elem.attributes,function(i,attr){attr.specified&&!rinlinejQuery.test(attr.name)&&(newAttrs[attr.name]=attr.value)}),newAttrs}function clearPlaceholder(event,value){var input=this,$input=$(input);if(input.value==$input.attr("placeholder")&&$input.hasClass("placeholder"))if($input.data("placeholder-password")){if($input=$input.hide().next().show().attr("id",$input.removeAttr("id").data("placeholder-id")),!0===event)return $input[0].value=value;$input.focus()}else input.value="",$input.removeClass("placeholder"),input==safeActiveElement()&&input.select()}function setPlaceholder(){var $replacement,input=this,$input=$(input),id=this.id;if(""==input.value){if("password"==input.type){if(!$input.data("placeholder-textinput")){try{$replacement=$input.clone().attr({type:"text"})}catch(e){$replacement=$("<input>").attr($.extend(args(this),{type:"text"}))}$replacement.removeAttr("name").data({"placeholder-password":$input,"placeholder-id":id}).bind("focus.placeholder",clearPlaceholder),$input.data({"placeholder-textinput":$replacement,"placeholder-id":id}).before($replacement)}$input=$input.removeAttr("id").hide().prev().attr("id",id).show()}$input.addClass("placeholder"),$input[0].value=$input.attr("placeholder")}else $input.removeClass("placeholder")}function safeActiveElement(){try{return document.activeElement}catch(err){}}var hooks,placeholder,isOperaMini="[object OperaMini]"==Object.prototype.toString.call(window.operamini),isInputSupported="placeholder"in document.createElement("input")&&!isOperaMini,isTextareaSupported="placeholder"in document.createElement("textarea")&&!isOperaMini,prototype=$.fn,valHooks=$.valHooks,propHooks=$.propHooks;isInputSupported&&isTextareaSupported?(placeholder=prototype.placeholder=function(){return this}).input=placeholder.textarea=!0:((placeholder=prototype.placeholder=function(){var $this=this;return $this.filter((isInputSupported?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":clearPlaceholder,"blur.placeholder":setPlaceholder}).data("placeholder-enabled",!0).trigger("blur.placeholder"),$this}).input=isInputSupported,placeholder.textarea=isTextareaSupported,hooks={get:function(element){var $element=$(element),$passwordInput=$element.data("placeholder-password");return $passwordInput?$passwordInput[0].value:$element.data("placeholder-enabled")&&$element.hasClass("placeholder")?"":element.value},set:function(element,value){var $element=$(element),$passwordInput=$element.data("placeholder-password");return $passwordInput?$passwordInput[0].value=value:$element.data("placeholder-enabled")?(""==value?(element.value=value,element!=safeActiveElement()&&setPlaceholder.call(element)):$element.hasClass("placeholder")?clearPlaceholder.call(element,!0,value)||(element.value=value):element.value=value,$element):element.value=value}},isInputSupported||(valHooks.input=hooks,propHooks.value=hooks),isTextareaSupported||(valHooks.textarea=hooks,propHooks.value=hooks),$(function(){$(document).delegate("form","submit.placeholder",function(){var $inputs=$(".placeholder",this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder)},10)})}),$(window).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),TouchNav.isActiveOn=function(elem){return elem&&elem.touchNavActive},TouchNav.prototype={init:function(){"string"==typeof this.options.navBlock?this.menu=document.getElementById(this.options.navBlock):"object"==typeof this.options.navBlock&&(this.menu=this.options.navBlock),this.menu&&this.addEvents()},addEvents:function(){var self=this,touchEvent=navigator.pointerEnabled&&"pointerdown"||navigator.msPointerEnabled&&"MSPointerDown"||this.isTouchDevice&&"touchstart";this.menuItems=jQuery(this.options.menuItems,this.menu).get();for(var i=0;i<this.menuItems.length;i++)!function(item){var currentDrop=lib.queryElementsBySelector(self.options.menuDrop,item)[0],currentOpener=lib.queryElementsBySelector(self.options.menuOpener,item)[0];currentDrop&&currentOpener&&(self.isTouchDevice||self.isPointerDevice)&&(lib.event.add(currentOpener,"click",lib.bind(self.clickHandler,self)),lib.event.add(currentOpener,"mousedown",lib.bind(self.mousedownHandler,self)),lib.event.add(currentOpener,touchEvent,function(e){self.isTouchPointerEvent(e)?(self.touchFlag=!0,self.currentItem=item,self.currentLink=currentOpener,self.pressHandler.apply(self,arguments)):self.preventCurrentClick=!1})),jQuery(item).bind("mouseenter",function(){self.touchFlag||(self.currentItem=item,self.mouseoverHandler())}),jQuery(item).bind("mouseleave",function(){self.touchFlag||(self.currentItem=item,self.mouseoutHandler())}),item.touchNavActive=!0}(self.menuItems[i]);(this.isTouchDevice||this.isPointerDevice)&&(lib.event.add(document.documentElement,"mousedown",lib.bind(this.clickOutsideHandler,this)),lib.event.add(document.documentElement,touchEvent,lib.bind(this.clickOutsideHandler,this)))},mousedownHandler:function(e){this.touchFlag&&(e.preventDefault(),this.touchFlag=!1,this.preventCurrentClick=!1)},mouseoverHandler:function(){lib.addClass(this.currentItem,this.options.hoverClass),jQuery(this.currentItem).trigger("itemhover")},mouseoutHandler:function(){lib.removeClass(this.currentItem,this.options.hoverClass),jQuery(this.currentItem).trigger("itemleave")},hideActiveDropdown:function(){for(var i=0;i<this.menuItems.length;i++)lib.hasClass(this.menuItems[i],this.options.hoverClass)&&(lib.removeClass(this.menuItems[i],this.options.hoverClass),jQuery(this.menuItems[i]).trigger("itemleave"));this.activeParent=null},pressHandler:function(e){this.currentItem!==this.activeParent&&(this.activeParent&&this.currentItem.parentNode===this.activeParent.parentNode?lib.removeClass(this.activeParent,this.options.hoverClass):this.isParent(this.activeParent,this.currentLink)||this.hideActiveDropdown()),this.activeParent=this.currentItem,lib.hasClass(this.currentItem,this.options.hoverClass)?this.preventCurrentClick=!1:(e.preventDefault(),this.preventCurrentClick=!0,lib.addClass(this.currentItem,this.options.hoverClass),jQuery(this.currentItem).trigger("itemhover"))},clickHandler:function(e){this.preventCurrentClick&&e.preventDefault()},clickOutsideHandler:function(event){var e=event.changedTouches?event.changedTouches[0]:event;this.activeParent&&!this.isParent(this.menu,e.target)&&(this.hideActiveDropdown(),this.touchFlag=!1)},isParent:function(parent,child){for(;child.parentNode;){if(child.parentNode==parent)return!0;child=child.parentNode}return!1},isTouchPointerEvent:function(e){return e.type.indexOf("touch")>-1||navigator.pointerEnabled&&"touch"===e.pointerType||navigator.msPointerEnabled&&e.pointerType==e.MSPOINTER_TYPE_TOUCH},isPointerDevice:!(!navigator.pointerEnabled&&!navigator.msPointerEnabled),isTouchDevice:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},lib={hasClass:function(el,cls){return!(!el||!el.className)&&el.className.match(new RegExp("(\\s|^)"+cls+"(\\s|$)"))},addClass:function(el,cls){el&&!this.hasClass(el,cls)&&(el.className+=" "+cls)},removeClass:function(el,cls){el&&this.hasClass(el,cls)&&(el.className=el.className.replace(new RegExp("(\\s|^)"+cls+"(\\s|$)")," "))},extend:function(obj){for(var i=1;i<arguments.length;i++)for(var p in arguments[i])arguments[i].hasOwnProperty(p)&&(obj[p]=arguments[i][p]);return obj},each:function(obj,callback){var property,len;if("number"==typeof obj.length)for(property=0,len=obj.length;property<len&&!1!==callback.call(obj[property],property,obj[property]);property++);else for(property in obj)if(obj.hasOwnProperty(property)&&!1===callback.call(obj[property],property,obj[property]))break},event:function(){var fixEvent=function(e){return(e=e||window.event).isFixed?e:(e.isFixed=!0,e.target||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},e)};return{add:function(elem,event,handler){elem.events||(elem.events={},elem.handle=function(e){var handlers=elem.events[e.type];e=fixEvent(e);for(var i=0,len=handlers.length;i<len;i++)handlers[i]&&!1===handlers[i].call(elem,e)&&(e.preventDefault(),e.stopPropagation())}),elem.events[event]||(elem.events[event]=[],elem.addEventListener?elem.addEventListener(event,elem.handle,!1):elem.attachEvent&&elem.attachEvent("on"+event,elem.handle)),elem.events[event].push(handler)},remove:function(elem,event,handler){for(var handlers=elem.events[event],i=handlers.length-1;i>=0;i--)handlers[i]===handler&&handlers.splice(i,1);handlers.length||(delete elem.events[event],elem.removeEventListener?elem.removeEventListener(event,elem.handle,!1):elem.detachEvent&&elem.detachEvent("on"+event,elem.handle))}}}(),queryElementsBySelector:function(selector,scope){if(scope=scope||document,!selector)return[];if(">*"===selector)return scope.children;if("function"==typeof document.querySelectorAll)return scope.querySelectorAll(selector);for(var selectors=selector.split(","),resultList=[],s=0;s<selectors.length;s++){for(var currentContext=[scope||document],tokens=selectors[s].replace(/^\s+/,"").replace(/\s+$/,"").split(" "),i=0;i<tokens.length;i++)if(token=tokens[i].replace(/^\s+/,"").replace(/\s+$/,""),token.indexOf("#")>-1){var tagName=(bits=token.split("#"))[0],id=bits[1],element=document.getElementById(id);if(element&&tagName&&element.nodeName.toLowerCase()!=tagName)return[];currentContext=element?[element]:[]}else if(token.indexOf(".")>-1){for(var bits=token.split("."),tagName=bits[0]||"*",className=bits[1],found=[],foundCount=0,h=0;h<currentContext.length;h++){elements="*"==tagName?currentContext[h].getElementsByTagName("*"):currentContext[h].getElementsByTagName(tagName);for(j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=[];for(var currentContextIndex=0,k=0;k<found.length;k++)found[k].className&&found[k].className.match(new RegExp("(\\s|^)"+className+"(\\s|$)"))&&(currentContext[currentContextIndex++]=found[k])}else if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var tagName=RegExp.$1||"*",attrName=RegExp.$2,attrOperator=RegExp.$3,attrValue=RegExp.$4;"for"==attrName.toLowerCase()&&this.browser.msie&&this.browser.version<8&&(attrName="htmlFor");for(var found=[],foundCount=0,h=0;h<currentContext.length;h++){elements="*"==tagName?currentContext[h].getElementsByTagName("*"):currentContext[h].getElementsByTagName(tagName);for(j=0;elements[j];j++)found[foundCount++]=elements[j]}currentContext=[];var checkFunction,currentContextIndex=0;switch(attrOperator){case"=":checkFunction=function(e){return e.getAttribute(attrName)==attrValue};break;case"~":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("(\\s|^)"+attrValue+"(\\s|$)"))};break;case"|":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("^"+attrValue+"-?"))};break;case"^":checkFunction=function(e){return 0==e.getAttribute(attrName).indexOf(attrValue)};break;case"$":checkFunction=function(e){return e.getAttribute(attrName).lastIndexOf(attrValue)==e.getAttribute(attrName).length-attrValue.length};break;case"*":checkFunction=function(e){return e.getAttribute(attrName).indexOf(attrValue)>-1};break;default:checkFunction=function(e){return e.getAttribute(attrName)}}currentContext=[];for(var currentContextIndex=0,k=0;k<found.length;k++)checkFunction(found[k])&&(currentContext[currentContextIndex++]=found[k])}else{tagName=token;for(var found=[],foundCount=0,h=0;h<currentContext.length;h++)for(var elements=currentContext[h].getElementsByTagName(tagName),j=0;j<elements.length;j++)found[foundCount++]=elements[j];currentContext=found}resultList=[].concat(resultList,currentContext)}return resultList},trim:function(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")},bind:function(f,scope,forceArgs){return function(){return f.apply(scope,void 0!==forceArgs?[forceArgs]:arguments)}}},function($){function NavigationSelect(options){this.options=$.extend({list:null,levelIndentHTML:" &bull; ",defaultOptionAttr:"title",defaultOptionText:"...",selectClass:"nav-select",activeClass:"nav-active",defaultOptionClass:"opt-default",hasDropClass:"opt-sublevel",levelPrefixClass:"opt-level-",useDefaultOption:!0,triggerClick:!1,onInit:function(){}},options),this.options.list&&(this.createSelect(),this.attachEvents())}NavigationSelect.prototype={createSelect:function(){this.startIndex=0,this.navigation=$(this.options.list),this.select=$("<select>").addClass(this.options.selectClass),this.createDefaultOption(),this.createList(this.navigation,0),this.select.insertBefore(this.navigation),this.options.onInit(this)},createDefaultOption:function(){if(this.options.useDefaultOption){var attrText=this.navigation.attr(this.options.defaultOptionAttr),defaultOption=$("<option>").addClass(this.options.defaultOptionClass).text(attrText||this.options.defaultOptionText);this.navigation.removeAttr(this.options.defaultOptionAttr),this.select.append(defaultOption),this.startIndex=1}},createList:function(list,level){var self=this;list.children().each(function(index,item){var listItem=$(this),listLink=listItem.find("a").eq(0),listDrop=listItem.find("ul").eq(0),hasDrop=listDrop.length>0;listLink.length&&self.select.append(self.createOption(listLink,hasDrop,level,listLink.hasClass(self.options.activeClass))),hasDrop&&self.createList(listDrop,level+1)})},createOption:function(link,hasDrop,level,selected){var levelText=this.getLevelIndent(level),optionHTML=(levelText||"")+(this.options.defaultMode?link.text():link[0].childNodes[0].nodeValue);return $("<option>").html(optionHTML).addClass(this.options.levelPrefixClass+(level+1)).toggleClass(this.options.hasDropClass,hasDrop).val(link.attr("href")).attr("selected",!!selected&&"selected")},getLevelIndent:function(level){return new Array(level+1).join(this.options.levelIndentHTML)},attachEvents:function(){var self=this;this.select.change(function(){if(this.selectedIndex>=self.startIndex)if(self.options.triggerClick){var curlLink=self.navigation.find("a").eq(this.selectedIndex);0===curlLink.attr("href").indexOf("#")&&curlLink.attr("href").length>1?curlLink.trigger("click"):location.href=this.value}else location.href=this.value})}},$.fn.navigationSelect=function(opt){return this.each(function(){new NavigationSelect($.extend({list:this},opt))})}}(jQuery),function($){function ScrollAbsoluteGallery(options){this.options=$.extend({activeClass:"active",mask:"div.slides-mask",slider:">ul",slides:">li",btnPrev:".btn-prev",btnNext:".btn-next",pagerLinks:"ul.pager > li",generatePagination:!1,pagerList:"<ul>",pagerListItem:'<li><a href="#"></a></li>',pagerListItemText:"a",galleryReadyClass:"gallery-js-ready",currentNumber:"span.current-num",totalNumber:"span.total-num",maskAutoSize:!1,autoRotation:!1,pauseOnHover:!1,stretchSlideToMask:!1,switchTime:3e3,animSpeed:500,handleTouch:!0,swipeThreshold:15,vertical:!1},options),this.init()}ScrollAbsoluteGallery.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=$(this.options.holder).addClass(this.options.galleryReadyClass),this.mask=this.holder.find(this.options.mask),this.slider=this.mask.find(this.options.slider),this.slides=this.slider.find(this.options.slides),this.btnPrev=this.holder.find(this.options.btnPrev),this.btnNext=this.holder.find(this.options.btnNext),this.currentNumber=this.holder.find(this.options.currentNumber),this.totalNumber=this.holder.find(this.options.totalNumber),"string"==typeof this.options.generatePagination?this.pagerLinks=this.buildPagination():this.pagerLinks=this.holder.find(this.options.pagerLinks),this.sizeProperty=this.options.vertical?"height":"width",this.positionProperty=this.options.vertical?"top":"left",this.animProperty=this.options.vertical?"marginTop":"marginLeft",this.slideSize=this.slides[this.sizeProperty](),this.currentIndex=0,this.prevIndex=0,this.timer,this.win=$(window),this.options.maskAutoSize=!this.options.vertical&&this.options.maskAutoSize,this.options.vertical&&this.mask.css({height:this.slides.innerHeight()}),this.options.maskAutoSize&&this.mask.css({height:this.slider.height()}),this.slider.css({position:"relative",height:this.options.vertical?this.slideSize*this.slides.length:"100%"}),this.slides.css({position:"absolute"}).css(this.positionProperty,-9999).eq(this.currentIndex).css(this.positionProperty,0),this.refreshState()},refresh:function(){var self=this;this.slides.removeAttr("style"),this.win.trigger("refreshSlides"),this.slides=this.slider.find(this.options.slides),this.slideSize=this.slides[this.sizeProperty](),this.currentIndex=0,this.prevIndex=0,this.options.maskAutoSize&&this.mask.css({height:this.slider.height()}),this.slides.css({position:"absolute"}).css(this.positionProperty,-9999).eq(this.currentIndex).css(this.positionProperty,0),this.refreshState(),this.resizeSlides(),this.resizeHolder(),this.setSlidesPosition(this.currentIndex),clearTimeout(this.timer),this.timer=setTimeout(function(){self.resizeHolder()},500)},buildPagination:function(){var pagerLinks=$();if(this.pagerHolder||(this.pagerHolder=this.holder.find(this.options.generatePagination)),this.pagerHolder.length){this.pagerHolder.empty(),this.pagerList=$(this.options.pagerList).appendTo(this.pagerHolder);for(var i=0;i<this.slides.length;i++)$(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i+1);pagerLinks=this.pagerList.children()}return pagerLinks},attachEvents:function(){var self=this;this.btnPrev.length&&(this.btnPrevHandler=function(e){e.preventDefault(),self.prevSlide()},this.btnPrev.click(this.btnPrevHandler)),this.btnNext.length&&(this.btnNextHandler=function(e){e.preventDefault(),self.nextSlide()},this.btnNext.click(this.btnNextHandler)),this.pagerLinks.length&&(this.pagerLinksHandler=function(e){e.preventDefault(),self.numSlide(self.pagerLinks.index(e.currentTarget))},this.pagerLinks.click(this.pagerLinksHandler)),this.options.pauseOnHover&&(this.hoverHandler=function(){clearTimeout(self.timer)},this.leaveHandler=function(){self.autoRotate()},this.holder.bind({mouseenter:this.hoverHandler,mouseleave:this.leaveHandler})),this.resizeHandler=function(){self.animating||(self.options.stretchSlideToMask&&self.resizeSlides(),self.resizeHolder(),self.setSlidesPosition(self.currentIndex))},$(window).bind("load resize orientationchange endRefreshSlides",this.resizeHandler),self.options.stretchSlideToMask&&self.resizeSlides(),this.options.handleTouch&&window.Hammer&&this.mask.length&&this.slides.length>1&&isTouchDevice&&(this.swipeHandler=new Hammer.Manager(this.mask[0]),this.swipeHandler.add(new Hammer.Pan({direction:self.options.vertical?Hammer.DIRECTION_VERTICAL:Hammer.DIRECTION_HORIZONTAL,threshold:self.options.swipeThreshold})),this.swipeHandler.on("panstart",function(){self.animating?self.swipeHandler.stop():clearTimeout(self.timer)}).on("panmove",function(e){self.swipeOffset=-self.slideSize+e[self.options.vertical?"deltaY":"deltaX"],self.slider.css(self.animProperty,self.swipeOffset),clearTimeout(self.timer)}).on("panend",function(e){if(e.distance>self.options.swipeThreshold)e.offsetDirection===Hammer.DIRECTION_RIGHT||e.offsetDirection===Hammer.DIRECTION_DOWN?self.nextSlide():self.prevSlide();else{var tmpObj={};tmpObj[self.animProperty]=-self.slideSize,self.slider.animate(tmpObj,{duration:self.options.animSpeed}),self.autoRotate()}self.swipeOffset=0})),this.autoRotate(),this.resizeHolder(),this.setSlidesPosition(this.currentIndex)},resizeSlides:function(){this.slideSize=this.mask[this.options.vertical?"height":"width"](),this.slides.css(this.sizeProperty,this.slideSize)},resizeHolder:function(){this.options.maskAutoSize&&this.mask.css({height:this.slides.eq(this.currentIndex).outerHeight(!0)})},prevSlide:function(){!this.animating&&this.slides.length>1&&(this.direction=-1,this.prevIndex=this.currentIndex,this.currentIndex>0?this.currentIndex--:this.currentIndex=this.slides.length-1,this.switchSlide())},nextSlide:function(fromAutoRotation){!this.animating&&this.slides.length>1&&(this.direction=1,this.prevIndex=this.currentIndex,this.currentIndex<this.slides.length-1?this.currentIndex++:this.currentIndex=0,this.switchSlide())},numSlide:function(c){!this.animating&&this.currentIndex!==c&&this.slides.length>1&&(this.direction=c>this.currentIndex?1:-1,this.prevIndex=this.currentIndex,this.currentIndex=c,this.switchSlide())},preparePosition:function(){this.setSlidesPosition(this.prevIndex,this.direction<0?this.currentIndex:null,this.direction>0?this.currentIndex:null,this.direction)},setSlidesPosition:function(index,slideLeft,slideRight,direction){if(this.slides.length>1){var prevIndex="number"==typeof slideLeft?slideLeft:index>0?index-1:this.slides.length-1,nextIndex="number"==typeof slideRight?slideRight:index<this.slides.length-1?index+1:0;if(this.slider.css(this.animProperty,this.swipeOffset?this.swipeOffset:-this.slideSize),this.slides.css(this.positionProperty,-9999).eq(index).css(this.positionProperty,this.slideSize),prevIndex===nextIndex&&"number"==typeof direction){var calcOffset=direction>0?2*this.slideSize:0;this.slides.eq(nextIndex).css(this.positionProperty,calcOffset)}else this.slides.eq(prevIndex).css(this.positionProperty,0),this.slides.eq(nextIndex).css(this.positionProperty,2*this.slideSize),this.slides.length>4&&(this.slides.eq(prevIndex>0?prevIndex-1:this.slides.length-1).css(this.positionProperty,-this.slideSize),this.slides.eq(nextIndex<this.slides.length-1?nextIndex+1:0).css(this.positionProperty,3*this.slideSize))}},switchSlide:function(){var self=this,newSlide=(this.slides.eq(this.prevIndex),this.slides.eq(this.currentIndex));this.animating=!0,this.options.maskAutoSize&&this.mask.animate({height:newSlide.outerHeight(!0)},{duration:this.options.animSpeed});var animProps={};animProps[this.animProperty]=this.direction>0?2*-this.slideSize:0,this.preparePosition(),this.slider.animate(animProps,{duration:this.options.animSpeed,complete:function(){self.setSlidesPosition(self.currentIndex),self.animating=!1,self.autoRotate(),self.makeCallback("onChange",self)}}),this.refreshState(),this.makeCallback("onBeforeChange",this)},refreshState:function(initial){this.slides.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.currentNumber.html(this.currentIndex+1),this.totalNumber.html(this.slides.length),this.holder.toggleClass("not-enough-slides",1===this.slides.length)},autoRotate:function(){var self=this;clearTimeout(this.timer),this.options.autoRotation&&(this.timer=setTimeout(function(){self.nextSlide()},this.options.switchTime))},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}},destroy:function(){this.btnPrev.unbind("click",this.btnPrevHandler),this.btnNext.unbind("click",this.btnNextHandler),this.pagerLinks.unbind("click",this.pagerLinksHandler),this.holder.unbind("mouseenter",this.hoverHandler),this.holder.unbind("mouseleave",this.leaveHandler),$(window).unbind("load resize orientationchange",this.resizeHandler),clearTimeout(this.timer),this.swipeHandler&&this.swipeHandler.destroy(),this.holder.removeClass(this.options.galleryReadyClass),this.slider.add(this.slides).removeAttr("style"),"string"==typeof this.options.generatePagination&&this.pagerHolder.empty()}};var isTouchDevice=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.fn.scrollAbsoluteGallery=function(opt){return this.each(function(){$(this).data("ScrollAbsoluteGallery",new ScrollAbsoluteGallery($.extend(opt,{holder:this})))})}}(jQuery),function($){function ContentPopup(opt){this.options=$.extend({holder:null,popup:".popup",btnOpen:".open",btnClose:".close",openClass:"popup-active",clickEvent:"click",mode:"click",hideOnClickLink:!0,hideOnClickOutside:!0,delay:50},opt),this.options.holder&&(this.holder=$(this.options.holder),this.init())}ContentPopup.prototype={init:function(){this.findElements(),this.attachEvents()},findElements:function(){this.popup=this.holder.find(this.options.popup),this.btnOpen=this.holder.find(this.options.btnOpen),this.btnClose=this.holder.find(this.options.btnClose)},attachEvents:function(){var self=this;if(this.clickMode=isTouchDevice||self.options.mode===self.options.clickEvent,this.clickMode)this.btnOpen.bind(self.options.clickEvent,function(e){self.holder.hasClass(self.options.openClass)?self.options.hideOnClickLink&&self.hidePopup():self.showPopup(),e.preventDefault()}),this.outsideClickHandler=this.bind(this.outsideClickHandler,this);else{var timer,delayedFunc=function(func){clearTimeout(timer),timer=setTimeout(function(){func.call(self)},self.options.delay)};this.btnOpen.bind("mouseover",function(){delayedFunc(self.showPopup)}).bind("mouseout",function(){delayedFunc(self.hidePopup)}),this.popup.bind("mouseover",function(){delayedFunc(self.showPopup)}).bind("mouseout",function(){delayedFunc(self.hidePopup)})}this.btnClose.bind(self.options.clickEvent,function(e){self.hidePopup(),e.preventDefault()})},outsideClickHandler:function(e){var targetNode=$((e.changedTouches?e.changedTouches[0]:e).target);targetNode.closest(this.popup).length||targetNode.closest(this.btnOpen).length||this.hidePopup()},showPopup:function(){this.holder.addClass(this.options.openClass),this.popup.css({display:"block"}),this.clickMode&&this.options.hideOnClickOutside&&!this.outsideHandlerActive&&(this.outsideHandlerActive=!0,$(document).bind("click touchstart",this.outsideClickHandler)),this.makeCallback("onChange",!0,this)},hidePopup:function(){this.holder.removeClass(this.options.openClass),this.popup.css({display:"none"}),this.clickMode&&this.options.hideOnClickOutside&&this.outsideHandlerActive&&(this.outsideHandlerActive=!1,$(document).unbind("click touchstart",this.outsideClickHandler)),this.makeCallback("onChange",!1,this)},bind:function(f,scope,forceArgs){return function(){return f.apply(scope,forceArgs?[forceArgs]:arguments)}},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}}};var isTouchDevice=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.fn.contentPopup=function(opt){return this.each(function(){new ContentPopup($.extend(opt,{holder:this}))})}}(jQuery),function($){function resizeElementsByRows(boxes,options){var maxHeight,currentRow=$(),maxCalcHeight=0,firstOffset=boxes.eq(0).offset().top;boxes.each(function(ind){var curItem=$(this);curItem.offset().top===firstOffset?currentRow=currentRow.add(this):(maxHeight=getMaxHeight(currentRow),maxCalcHeight=Math.max(maxCalcHeight,resizeElements(currentRow,maxHeight,options)),currentRow=curItem,firstOffset=curItem.offset().top)}),currentRow.length&&(maxHeight=getMaxHeight(currentRow),maxCalcHeight=Math.max(maxCalcHeight,resizeElements(currentRow,maxHeight,options))),options.biggestHeight&&boxes.css(options.useMinHeight&&supportMinHeight?"minHeight":"height",maxCalcHeight)}function getMaxHeight(boxes){var maxHeight=0;return boxes.each(function(){maxHeight=Math.max(maxHeight,$(this).outerHeight())}),maxHeight}function resizeElements(boxes,parent,options){var calcHeight,parentHeight="number"==typeof parent?parent:parent.height();return boxes.removeClass(options.leftEdgeClass).removeClass(options.rightEdgeClass).each(function(i){var element=$(this),depthDiffHeight=0,isBorderBox="border-box"===element.css("boxSizing")||"border-box"===element.css("-moz-box-sizing")||"border-box"===element.css("-webkit-box-sizing");"number"!=typeof parent&&element.parents().each(function(){var tmpParent=$(this);if(parent.is(this))return!1;depthDiffHeight+=tmpParent.outerHeight()-tmpParent.height()}),calcHeight=parentHeight-depthDiffHeight,(calcHeight-=isBorderBox?0:element.outerHeight()-element.height())>0&&element.css(options.useMinHeight&&supportMinHeight?"minHeight":"height",calcHeight)}),boxes.filter(":first").addClass(options.leftEdgeClass),boxes.filter(":last").addClass(options.rightEdgeClass),calcHeight}$.fn.sameHeight=function(opt){var options=$.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",elements:">*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},opt);return this.each(function(){function doResize(){elements.css(options.useMinHeight&&supportMinHeight?"minHeight":"height",""),options.multiLine?resizeElementsByRows(elements,options):resizeElements(elements,holder,options)}var postResizeTimer,ignoreResize,holder=$(this),elements=holder.find(options.elements).not("."+options.skipClass);if(elements.length){doResize();var delayedResizeHandler=function(){ignoreResize||(ignoreResize=!0,doResize(),clearTimeout(postResizeTimer),postResizeTimer=setTimeout(function(){doResize(),setTimeout(function(){ignoreResize=!1},10)},100))};options.flexible&&$(window).bind("resize orientationchange fontresize",delayedResizeHandler),holder.on("refresh",function(){elements=holder.find(options.elements).not("."+options.skipClass).filter(":visible"),doResize()}),$(window).bind("load refresh",delayedResizeHandler)}})};var supportMinHeight="undefined"!=typeof document.documentElement.style.maxHeight}(jQuery),jQuery.onFontResize=function($){return $(function(){var randomID="font-resize-frame-"+Math.floor(1e3*Math.random()),resizeFrame=$("<iframe>").attr("id",randomID).addClass("font-resize-helper");if(resizeFrame.css({width:"100em",height:"10px",position:"absolute",borderWidth:0,top:"-9999px",left:"-9999px"}).appendTo("body"),window.attachEvent&&!window.addEventListener)resizeFrame.bind("resize",function(){$.onFontResize.trigger(resizeFrame[0].offsetWidth/100)});else{var doc=resizeFrame[0].contentWindow.document;doc.open(),doc.write('<script>window.onload = function(){var em = parent.jQuery("#'+randomID+'")[0];window.onresize = function(){if (parent.jQuery.onFontResize){parent.jQuery.onFontResize.trigger(em.offsetWidth / 100);}}};<\/script>'),doc.close()}jQuery.onFontResize.initialSize=resizeFrame[0].offsetWidth/100}),{trigger:function(em){$(window).trigger("fontresize",[em])}}}(jQuery),function(root,factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):root.jcf=factory(jQuery)}(this,function($){"use strict";var customInstances=[],commonOptions={optionsKey:"jcf",dataKey:"jcf-instance",rtlClass:"jcf-rtl",focusClass:"jcf-focus",pressedClass:"jcf-pressed",disabledClass:"jcf-disabled",hiddenClass:"jcf-hidden",resetAppearanceClass:"jcf-reset-appearance",unselectableClass:"jcf-unselectable"},isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,isWinPhoneDevice=/Windows Phone/.test(navigator.userAgent);commonOptions.isMobileDevice=!(!isTouchDevice&&!isWinPhoneDevice);var createStyleSheet=function(){var styleTag=$("<style>").appendTo("head"),styleSheet=styleTag.prop("sheet")||styleTag.prop("styleSheet"),addCSSRule=function(selector,rules,index){styleSheet.insertRule?styleSheet.insertRule(selector+"{"+rules+"}",index):styleSheet.addRule(selector,rules,index)};addCSSRule("."+commonOptions.hiddenClass,"position:absolute !important;left:-9999px !important;height:1px !important;width:1px !important;margin:0 !important;border-width:0 !important;-webkit-appearance:none;-moz-appearance:none;appearance:none"),addCSSRule("."+commonOptions.rtlClass+" ."+commonOptions.hiddenClass,"right:-9999px !important; left: auto !important"),addCSSRule("."+commonOptions.unselectableClass,"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0);"),addCSSRule("."+commonOptions.resetAppearanceClass,"background: none; border: none; -webkit-appearance: none; appearance: none; opacity: 0; filter: alpha(opacity=0);");var html=$("html"),body=$("body");"rtl"!==html.css("direction")&&"rtl"!==body.css("direction")||html.addClass(commonOptions.rtlClass),html.on("reset",function(){setTimeout(function(){api.refreshAll()},0)}),commonOptions.styleSheetCreated=!0};!function(){var eventList,pointerEventsSupported=navigator.pointerEnabled||navigator.msPointerEnabled,touchEventsSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,eventMap={};eventList=pointerEventsSupported?{pointerover:navigator.pointerEnabled?"pointerover":"MSPointerOver",pointerdown:navigator.pointerEnabled?"pointerdown":"MSPointerDown",pointermove:navigator.pointerEnabled?"pointermove":"MSPointerMove",pointerup:navigator.pointerEnabled?"pointerup":"MSPointerUp"}:{pointerover:"mouseover",pointerdown:"mousedown"+(touchEventsSupported?" touchstart":""),pointermove:"mousemove"+(touchEventsSupported?" touchmove":""),pointerup:"mouseup"+(touchEventsSupported?" touchend":"")},$.each(eventList,function(targetEventName,fakeEventList){$.each(fakeEventList.split(" "),function(index,fakeEventName){eventMap[fakeEventName]=targetEventName})}),$.each(eventList,function(eventName,eventHandlers){eventHandlers=eventHandlers.split(" "),$.event.special["jcf-"+eventName]={setup:function(){var self=this;$.each(eventHandlers,function(index,fallbackEvent){self.addEventListener?self.addEventListener(fallbackEvent,fixEvent,!1):self["on"+fallbackEvent]=fixEvent})},teardown:function(){var self=this;$.each(eventHandlers,function(index,fallbackEvent){self.addEventListener?self.removeEventListener(fallbackEvent,fixEvent,!1):self["on"+fallbackEvent]=null})}}});var lastTouch=null,mouseEventSimulated=function(e){var dx=Math.abs(e.pageX-lastTouch.x),dy=Math.abs(e.pageY-lastTouch.y);if(dx<=25&&dy<=25)return!0},fixEvent=function(e){var origEvent=e||window.event,touchEventData=null,targetEventName=eventMap[origEvent.type];if(e=$.event.fix(origEvent),e.type="jcf-"+targetEventName,origEvent.pointerType)switch(origEvent.pointerType){case 2:e.pointerType="touch";break;case 3:e.pointerType="pen";break;case 4:e.pointerType="mouse";break;default:e.pointerType=origEvent.pointerType}else e.pointerType=origEvent.type.substr(0,5);return e.pageX||e.pageY||(touchEventData=origEvent.changedTouches?origEvent.changedTouches[0]:origEvent,e.pageX=touchEventData.pageX,e.pageY=touchEventData.pageY),"touchend"===origEvent.type&&(lastTouch={x:e.pageX,y:e.pageY}),"mouse"===e.pointerType&&lastTouch&&mouseEventSimulated(e)?void 0:($.event.dispatch||$.event.handle).call(this,e)}}(),function(){var wheelEvents=("onwheel"in document||document.documentMode>=9?"wheel":"mousewheel DOMMouseScroll").split(" ");$.event.special["jcf-mousewheel"]={setup:function(){var self=this;$.each(wheelEvents,function(index,fallbackEvent){self.addEventListener?self.addEventListener(fallbackEvent,fixEvent,!1):self["on"+fallbackEvent]=fixEvent})},teardown:function(){var self=this;$.each(wheelEvents,function(index,fallbackEvent){self.addEventListener?self.removeEventListener(fallbackEvent,fixEvent,!1):self["on"+fallbackEvent]=null})}};var fixEvent=function(e){var origEvent=e||window.event;if(e=$.event.fix(origEvent),e.type="jcf-mousewheel","detail"in origEvent&&(e.deltaY=-origEvent.detail),"wheelDelta"in origEvent&&(e.deltaY=-origEvent.wheelDelta),"wheelDeltaY"in origEvent&&(e.deltaY=-origEvent.wheelDeltaY),"wheelDeltaX"in origEvent&&(e.deltaX=-origEvent.wheelDeltaX),"deltaY"in origEvent&&(e.deltaY=origEvent.deltaY),"deltaX"in origEvent&&(e.deltaX=origEvent.deltaX),e.delta=e.deltaY||e.deltaX,1===origEvent.deltaMode){e.delta*=16,e.deltaY*=16,e.deltaX*=16}return($.event.dispatch||$.event.handle).call(this,e)}}();var moduleMixin={fireNativeEvent:function(elements,eventName){$(elements).each(function(){var eventObject,element=this;element.dispatchEvent?((eventObject=document.createEvent("HTMLEvents")).initEvent(eventName,!0,!0),element.dispatchEvent(eventObject)):document.createEventObject&&((eventObject=document.createEventObject()).target=element,element.fireEvent("on"+eventName,eventObject))})},bindHandlers:function(){var self=this;$.each(self,function(propName,propValue){0===propName.indexOf("on")&&$.isFunction(propValue)&&(self[propName]=function(){return propValue.apply(self,arguments)})})}},api={version:"1.1.3",modules:{},getOptions:function(){return $.extend({},commonOptions)},setOptions:function(moduleName,moduleOptions){arguments.length>1?this.modules[moduleName]&&$.extend(this.modules[moduleName].prototype.options,moduleOptions):$.extend(commonOptions,moduleName)},addModule:function(proto){var Module=function(options){options.element.data(commonOptions.dataKey)||options.element.data(commonOptions.dataKey,this),customInstances.push(this),this.options=$.extend({},commonOptions,this.options,getInlineOptions(options.element),options),this.bindHandlers(),this.init.apply(this,arguments)},getInlineOptions=function(element){var dataOptions=element.data(commonOptions.optionsKey),attrOptions=element.attr(commonOptions.optionsKey);if(dataOptions)return dataOptions;if(attrOptions)try{return $.parseJSON(attrOptions)}catch(e){}};Module.prototype=proto,$.extend(proto,moduleMixin),proto.plugins&&$.each(proto.plugins,function(pluginName,plugin){$.extend(plugin.prototype,moduleMixin)});var originalDestroy=Module.prototype.destroy;Module.prototype.destroy=function(){this.options.element.removeData(this.options.dataKey);for(var i=customInstances.length-1;i>=0;i--)if(customInstances[i]===this){customInstances.splice(i,1);break}originalDestroy&&originalDestroy.apply(this,arguments)},this.modules[proto.name]=Module},getInstance:function(element){return $(element).data(commonOptions.dataKey)},replace:function(elements,moduleName,customOptions){var instance,self=this;return commonOptions.styleSheetCreated||createStyleSheet(),$(elements).each(function(){var moduleOptions,element=$(this);(instance=element.data(commonOptions.dataKey))?instance.refresh():(moduleName||$.each(self.modules,function(currentModuleName,module){if(module.prototype.matchElement.call(module.prototype,element))return moduleName=currentModuleName,!1}),moduleName&&(moduleOptions=$.extend({element:element},customOptions),instance=new self.modules[moduleName](moduleOptions)))}),instance},refresh:function(elements){$(elements).each(function(){var instance=$(this).data(commonOptions.dataKey);instance&&instance.refresh()})},destroy:function(elements){$(elements).each(function(){var instance=$(this).data(commonOptions.dataKey);instance&&instance.destroy()})},replaceAll:function(context){var self=this;$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(){this.className.indexOf("jcf-ignore")<0&&self.replace(this,moduleName)})})},refreshAll:function(context){if(context)$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(){var instance=$(this).data(commonOptions.dataKey);instance&&instance.refresh()})});else for(var i=customInstances.length-1;i>=0;i--)customInstances[i].refresh()},destroyAll:function(context){if(context)$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(index,element){var instance=$(element).data(commonOptions.dataKey);instance&&instance.destroy()})});else for(;customInstances.length;)customInstances[0].destroy()}};return window.jcf=api,api}),function($,window){"use strict";function ComboBox(options){this.options=$.extend({wrapNative:!0,wrapNativeOnMobile:!0,fakeDropInBody:!0,useCustomScroll:!0,flipDropToFit:!0,maxVisibleItems:10,fakeAreaStructure:'<span class="jcf-select"><span class="jcf-select-text"></span><span class="jcf-select-opener"></span></span>',fakeDropStructure:'<div class="jcf-select-drop"><div class="jcf-select-drop-content"></div></div>',optionClassPrefix:"jcf-option-",selectClassPrefix:"jcf-select-",dropContentSelector:".jcf-select-drop-content",selectTextSelector:".jcf-select-text",dropActiveClass:"jcf-drop-active",flipDropClass:"jcf-drop-flipped"},options),this.init()}function ListBox(options){this.options=$.extend({wrapNative:!0,useCustomScroll:!0,fakeStructure:'<span class="jcf-list-box"><span class="jcf-list-wrapper"></span></span>',selectClassPrefix:"jcf-select-",listHolder:".jcf-list-wrapper"},options),this.init()}function SelectList(options){this.options=$.extend({holder:null,maxVisibleItems:10,selectOnClick:!0,useHoverClass:!1,useCustomScroll:!1,handleResize:!0,multipleSelectWithoutKey:!1,alwaysPreventMouseWheel:!1,indexAttribute:"data-index",cloneClassPrefix:"jcf-option-",containerStructure:'<span class="jcf-list"><span class="jcf-list-content"></span></span>',containerSelector:".jcf-list-content",captionClass:"jcf-optgroup-caption",disabledClass:"jcf-disabled",optionClass:"jcf-option",groupClass:"jcf-optgroup",hoverClass:"jcf-hover",selectedClass:"jcf-selected",scrollClass:"jcf-scroll-active"},options),this.init()}jcf.addModule({name:"Select",selector:"select",options:{element:null,multipleCompactStyle:!1},plugins:{ListBox:ListBox,ComboBox:ComboBox,SelectList:SelectList},matchElement:function(element){return element.is("select")},init:function(){this.element=$(this.options.element),this.createInstance()},isListBox:function(){return this.element.is("[size]:not([jcf-size]), [multiple]")},createInstance:function(){this.instance&&this.instance.destroy(),this.isListBox()&&!this.options.multipleCompactStyle?this.instance=new ListBox(this.options):this.instance=new ComboBox(this.options)},refresh:function(){this.isListBox()&&this.instance instanceof ComboBox||!this.isListBox()&&this.instance instanceof ListBox?this.createInstance():this.instance.refresh()},destroy:function(){this.instance.destroy()}}),$.extend(ComboBox.prototype,{init:function(){this.initStructure(),this.bindHandlers(),this.attachEvents(),this.refresh()},initStructure:function(){this.win=$(window),this.doc=$(document),this.realElement=$(this.options.element),this.fakeElement=$(this.options.fakeAreaStructure).insertAfter(this.realElement),this.selectTextContainer=this.fakeElement.find(this.options.selectTextSelector),this.selectText=$("<span></span>").appendTo(this.selectTextContainer),makeUnselectable(this.fakeElement),this.fakeElement.addClass(getPrefixedClasses(this.realElement.prop("className"),this.options.selectClassPrefix)),this.realElement.prop("multiple")&&this.fakeElement.addClass("jcf-compact-multiple"),this.options.isMobileDevice&&this.options.wrapNativeOnMobile&&!this.options.wrapNative&&(this.options.wrapNative=!0),this.options.wrapNative?this.realElement.prependTo(this.fakeElement).css({position:"absolute",height:"100%",width:"100%"}).addClass(this.options.resetAppearanceClass):(this.realElement.addClass(this.options.hiddenClass),this.fakeElement.attr("title",this.realElement.attr("title")),this.fakeDropTarget=this.options.fakeDropInBody?$("body"):this.fakeElement)},attachEvents:function(){var self=this;this.delayedRefresh=function(){setTimeout(function(){self.refresh(),self.list&&(self.list.refresh(),self.list.scrollToActiveOption())},1)},this.options.wrapNative?this.realElement.on({focus:this.onFocus,change:this.onChange,click:this.onChange,keydown:this.onChange}):(this.realElement.on({focus:this.onFocus,change:this.onChange,keydown:this.onKeyDown}),this.fakeElement.on({"jcf-pointerdown":this.onSelectAreaPress}))},onKeyDown:function(e){13===e.which?this.toggleDropdown():this.dropActive&&this.delayedRefresh()},onChange:function(){this.refresh()},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur),this.toggleListMode(!0),this.focusedFlag=!0)},onBlur:function(){this.pressedFlag||(this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur),this.toggleListMode(!1),this.focusedFlag=!1)},onResize:function(){this.dropActive&&this.hideDropdown()},onSelectDropPress:function(){this.pressedFlag=!0},onSelectDropRelease:function(e,pointerEvent){this.pressedFlag=!1,"mouse"===pointerEvent.pointerType&&this.realElement.focus()},onSelectAreaPress:function(e){!this.options.fakeDropInBody&&$(e.target).closest(this.dropdown).length||e.button>1||this.realElement.is(":disabled")||(this.selectOpenedByEvent=e.pointerType,this.toggleDropdown(),this.focusedFlag||("mouse"===e.pointerType?this.realElement.focus():this.onFocus(e)),this.pressedFlag=!0,this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onSelectAreaRelease))},onSelectAreaRelease:function(e){this.focusedFlag&&"mouse"===e.pointerType&&this.realElement.focus(),this.pressedFlag=!1,this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onSelectAreaRelease)},onOutsideClick:function(e){var target=$(e.target);target.closest(this.fakeElement).length||target.closest(this.dropdown).length||this.hideDropdown()},onSelect:function(){this.refresh(),this.realElement.prop("multiple")?this.repositionDropdown():this.hideDropdown(),this.fireNativeEvent(this.realElement,"change")},toggleListMode:function(state){this.options.wrapNative||(state?this.realElement.attr({size:4,"jcf-size":""}):this.options.wrapNative||this.realElement.removeAttr("size jcf-size"))},createDropdown:function(){this.dropdown&&(this.list.destroy(),this.dropdown.remove()),this.dropdown=$(this.options.fakeDropStructure).appendTo(this.fakeDropTarget),this.dropdown.addClass(getPrefixedClasses(this.realElement.prop("className"),this.options.selectClassPrefix)),makeUnselectable(this.dropdown),this.realElement.prop("multiple")&&this.dropdown.addClass("jcf-compact-multiple"),this.options.fakeDropInBody&&this.dropdown.css({position:"absolute",top:-9999}),this.list=new SelectList({useHoverClass:!0,handleResize:!1,alwaysPreventMouseWheel:!0,maxVisibleItems:this.options.maxVisibleItems,useCustomScroll:this.options.useCustomScroll,holder:this.dropdown.find(this.options.dropContentSelector),multipleSelectWithoutKey:this.realElement.prop("multiple"),element:this.realElement}),$(this.list).on({select:this.onSelect,press:this.onSelectDropPress,release:this.onSelectDropRelease})},repositionDropdown:function(){var calcTop,calcLeft,bodyOffset,selectOffset=this.fakeElement.offset(),selectWidth=this.fakeElement.outerWidth(),selectHeight=this.fakeElement.outerHeight(),dropHeight=this.dropdown.css("width",selectWidth).outerHeight(),winScrollTop=this.win.scrollTop(),winHeight=this.win.height(),needFlipDrop=!1;selectOffset.top+selectHeight+dropHeight>winScrollTop+winHeight&&selectOffset.top-dropHeight>winScrollTop&&(needFlipDrop=!0),this.options.fakeDropInBody&&(bodyOffset="static"!==this.fakeDropTarget.css("position")?this.fakeDropTarget.offset().top:0,this.options.flipDropToFit&&needFlipDrop?(calcLeft=selectOffset.left,calcTop=selectOffset.top-dropHeight-bodyOffset):(calcLeft=selectOffset.left,calcTop=selectOffset.top+selectHeight-bodyOffset),this.dropdown.css({width:selectWidth,left:calcLeft,top:calcTop})),this.dropdown.add(this.fakeElement).toggleClass(this.options.flipDropClass,this.options.flipDropToFit&&needFlipDrop)},showDropdown:function(){this.realElement.prop("options").length&&(this.dropdown||this.createDropdown(),this.dropActive=!0,this.dropdown.appendTo(this.fakeDropTarget),this.fakeElement.addClass(this.options.dropActiveClass),this.refreshSelectedText(),this.repositionDropdown(),this.list.setScrollTop(this.savedScrollTop),this.list.refresh(),this.dropdown.height()<30&&(this.createDropdown(),this.showDropdown()),this.win.on("resize",this.onResize),this.doc.on("jcf-pointerdown",this.onOutsideClick))},hideDropdown:function(){this.dropdown&&(this.savedScrollTop=this.list.getScrollTop(),this.fakeElement.removeClass(this.options.dropActiveClass+" "+this.options.flipDropClass),this.dropdown.removeClass(this.options.flipDropClass).detach(),this.doc.off("jcf-pointerdown",this.onOutsideClick),this.win.off("resize",this.onResize),this.dropActive=!1,"touch"===this.selectOpenedByEvent&&this.onBlur())},toggleDropdown:function(){this.dropActive?this.hideDropdown():this.showDropdown()},refreshSelectedText:function(){var selectedOptionClasses,selectedIndex=this.realElement.prop("selectedIndex"),selectedOption=this.realElement.prop("options")[selectedIndex],selectedOptionImage=selectedOption?selectedOption.getAttribute("data-image"):null,selectedOptionText="",self=this;this.realElement.prop("multiple")?($.each(this.realElement.prop("options"),function(index,option){option.selected&&(selectedOptionText+=(selectedOptionText?", ":"")+option.innerHTML)}),selectedOptionText||(selectedOptionText=self.realElement.attr("placeholder")||""),this.selectText.removeAttr("class").html(selectedOptionText)):selectedOption?this.currentSelectedText!==selectedOption.innerHTML||this.currentSelectedImage!==selectedOptionImage?(selectedOptionClasses=getPrefixedClasses(selectedOption.className,this.options.optionClassPrefix),this.selectText.attr("class",selectedOptionClasses).html(selectedOption.innerHTML),selectedOptionImage?(this.selectImage||(this.selectImage=$("<img>").prependTo(this.selectTextContainer).hide()),this.selectImage.attr("src",selectedOptionImage).show()):this.selectImage&&this.selectImage.hide(),this.currentSelectedText=selectedOption.innerHTML,this.currentSelectedImage=selectedOptionImage):this.currentSelectedText===selectedOption.innerHTML&&this.selectText.html(selectedOption.innerHTML):(this.selectImage&&this.selectImage.hide(),this.selectText.removeAttr("class").empty())},refresh:function(){"none"===this.realElement.prop("style").display?this.fakeElement.hide():this.fakeElement.show(),this.refreshSelectedText(),this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(":disabled"))},destroy:function(){this.options.wrapNative?this.realElement.insertBefore(this.fakeElement).css({position:"",height:"",width:""}).removeClass(this.options.resetAppearanceClass):(this.realElement.removeClass(this.options.hiddenClass),this.realElement.is("[jcf-size]")&&this.realElement.removeAttr("size jcf-size")),this.fakeElement.remove(),this.doc.off("jcf-pointerup",this.onSelectAreaRelease),this.realElement.off({focus:this.onFocus})}}),$.extend(ListBox.prototype,{init:function(){this.bindHandlers(),this.initStructure(),this.attachEvents()},initStructure:function(){this.realElement=$(this.options.element),this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement),this.listHolder=this.fakeElement.find(this.options.listHolder),makeUnselectable(this.fakeElement),this.fakeElement.addClass(getPrefixedClasses(this.realElement.prop("className"),this.options.selectClassPrefix)),this.realElement.addClass(this.options.hiddenClass),this.list=new SelectList({useCustomScroll:this.options.useCustomScroll,holder:this.listHolder,selectOnClick:!1,element:this.realElement})},attachEvents:function(){var self=this;this.delayedRefresh=function(e){e&&16===e.which||(clearTimeout(self.refreshTimer),self.refreshTimer=setTimeout(function(){self.refresh(),self.list.scrollToActiveOption()},1))},this.realElement.on({focus:this.onFocus,click:this.delayedRefresh,keydown:this.delayedRefresh}),$(this.list).on({select:this.onSelect,press:this.onFakeOptionsPress,release:this.onFakeOptionsRelease})},onFakeOptionsPress:function(e,pointerEvent){this.pressedFlag=!0,"mouse"===pointerEvent.pointerType&&this.realElement.focus()},onFakeOptionsRelease:function(e,pointerEvent){this.pressedFlag=!1,"mouse"===pointerEvent.pointerType&&this.realElement.focus()},onSelect:function(){this.fireNativeEvent(this.realElement,"change"),this.fireNativeEvent(this.realElement,"click")},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur),this.focusedFlag=!0)},onBlur:function(){this.pressedFlag||(this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur),this.focusedFlag=!1)},refresh:function(){this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(":disabled")),this.list.refresh()},destroy:function(){this.list.destroy(),this.realElement.insertBefore(this.fakeElement).removeClass(this.options.hiddenClass),this.fakeElement.remove()}}),$.extend(SelectList.prototype,{init:function(){this.initStructure(),this.refreshSelectedClass(),this.attachEvents()},initStructure:function(){this.element=$(this.options.element),this.indexSelector="["+this.options.indexAttribute+"]",this.container=$(this.options.containerStructure).appendTo(this.options.holder),this.listHolder=this.container.find(this.options.containerSelector),this.lastClickedIndex=this.element.prop("selectedIndex"),this.rebuildList()},attachEvents:function(){this.bindHandlers(),this.listHolder.on("jcf-pointerdown",this.indexSelector,this.onItemPress),this.listHolder.on("jcf-pointerdown",this.onPress),this.options.useHoverClass&&this.listHolder.on("jcf-pointerover",this.indexSelector,this.onHoverItem)},onPress:function(e){$(this).trigger("press",e),this.listHolder.on("jcf-pointerup",this.onRelease)},onRelease:function(e){$(this).trigger("release",e),this.listHolder.off("jcf-pointerup",this.onRelease)},onHoverItem:function(e){var hoverIndex=parseFloat(e.currentTarget.getAttribute(this.options.indexAttribute));this.fakeOptions.removeClass(this.options.hoverClass).eq(hoverIndex).addClass(this.options.hoverClass)},onItemPress:function(e){"touch"===e.pointerType||this.options.selectOnClick?(this.tmpListOffsetTop=this.list.offset().top,this.listHolder.on("jcf-pointerup",this.indexSelector,this.onItemRelease)):this.onSelectItem(e)},onItemRelease:function(e){this.listHolder.off("jcf-pointerup",this.indexSelector,this.onItemRelease),this.tmpListOffsetTop===this.list.offset().top&&this.listHolder.on("click",this.indexSelector,{savedPointerType:e.pointerType},this.onSelectItem),delete this.tmpListOffsetTop},onSelectItem:function(e){var range,clickedIndex=parseFloat(e.currentTarget.getAttribute(this.options.indexAttribute)),pointerType=e.data&&e.data.savedPointerType||e.pointerType||"mouse";this.listHolder.off("click",this.indexSelector,this.onSelectItem),e.button>1||this.realOptions[clickedIndex].disabled||(this.element.prop("multiple")?e.metaKey||e.ctrlKey||"touch"===pointerType||this.options.multipleSelectWithoutKey?this.realOptions[clickedIndex].selected=!this.realOptions[clickedIndex].selected:e.shiftKey?(range=[this.lastClickedIndex,clickedIndex].sort(function(a,b){return a-b}),this.realOptions.each(function(index,option){option.selected=index>=range[0]&&index<=range[1]})):this.element.prop("selectedIndex",clickedIndex):this.element.prop("selectedIndex",clickedIndex),e.shiftKey||(this.lastClickedIndex=clickedIndex),this.refreshSelectedClass(),"mouse"===pointerType&&this.scrollToActiveOption(),$(this).trigger("select"))},rebuildList:function(){var self=this,rootElement=this.element[0];this.storedSelectHTML=rootElement.innerHTML,this.optionIndex=0,this.list=$(this.createOptionsList(rootElement)),this.listHolder.empty().append(this.list),this.realOptions=this.element.find("option"),this.fakeOptions=this.list.find(this.indexSelector),this.fakeListItems=this.list.find("."+this.options.captionClass+","+this.indexSelector),delete this.optionIndex;var maxCount=this.options.maxVisibleItems,sizeValue=this.element.prop("size");sizeValue>1&&!this.element.is("[jcf-size]")&&(maxCount=sizeValue);var needScrollBar=this.fakeOptions.length>maxCount;this.container.toggleClass(this.options.scrollClass,needScrollBar),needScrollBar&&(this.listHolder.css({maxHeight:this.getOverflowHeight(maxCount),overflow:"auto"}),this.options.useCustomScroll&&jcf.modules.Scrollable)?jcf.replace(this.listHolder,"Scrollable",{handleResize:this.options.handleResize,alwaysPreventMouseWheel:this.options.alwaysPreventMouseWheel}):this.options.alwaysPreventMouseWheel&&(this.preventWheelHandler=function(e){var currentScrollTop=self.listHolder.scrollTop(),maxScrollTop=self.listHolder.prop("scrollHeight")-self.listHolder.innerHeight();(currentScrollTop<=0&&e.deltaY<0||currentScrollTop>=maxScrollTop&&e.deltaY>0)&&e.preventDefault()},this.listHolder.on("jcf-mousewheel",this.preventWheelHandler))},refreshSelectedClass:function(){var selectedItem,self=this,isMultiple=this.element.prop("multiple"),selectedIndex=this.element.prop("selectedIndex");isMultiple?this.realOptions.each(function(index,option){self.fakeOptions.eq(index).toggleClass(self.options.selectedClass,!!option.selected)}):(this.fakeOptions.removeClass(this.options.selectedClass+" "+this.options.hoverClass),selectedItem=this.fakeOptions.eq(selectedIndex).addClass(this.options.selectedClass),this.options.useHoverClass&&selectedItem.addClass(this.options.hoverClass))},scrollToActiveOption:function(){var targetOffset=this.getActiveOptionOffset();"number"==typeof targetOffset&&this.listHolder.prop("scrollTop",targetOffset)},getSelectedIndexRange:function(){var firstSelected=-1,lastSelected=-1;return this.realOptions.each(function(index,option){option.selected&&(firstSelected<0&&(firstSelected=index),lastSelected=index)}),[firstSelected,lastSelected]},getChangedSelectedIndex:function(){var targetIndex,selectedIndex=this.element.prop("selectedIndex");return this.element.prop("multiple")?(this.previousRange||(this.previousRange=[selectedIndex,selectedIndex]),this.currentRange=this.getSelectedIndexRange(),targetIndex=this.currentRange[this.currentRange[0]!==this.previousRange[0]?0:1],this.previousRange=this.currentRange,targetIndex):selectedIndex},getActiveOptionOffset:function(){var dropHeight=this.listHolder.height(),dropScrollTop=this.listHolder.prop("scrollTop"),currentIndex=this.getChangedSelectedIndex(),fakeOption=this.fakeOptions.eq(currentIndex),fakeOptionOffset=fakeOption.offset().top-this.list.offset().top,fakeOptionHeight=fakeOption.innerHeight();return fakeOptionOffset+fakeOptionHeight>=dropScrollTop+dropHeight?fakeOptionOffset-dropHeight+fakeOptionHeight:fakeOptionOffset<dropScrollTop?fakeOptionOffset:void 0},getOverflowHeight:function(sizeValue){var item=this.fakeListItems.eq(sizeValue-1),listOffset=this.list.offset().top;return item.offset().top+item.innerHeight()-listOffset},getScrollTop:function(){return this.listHolder.scrollTop()},setScrollTop:function(value){this.listHolder.scrollTop(value)},createOption:function(option){var newOption=document.createElement("span");newOption.className=this.options.optionClass,newOption.innerHTML=option.innerHTML,newOption.setAttribute(this.options.indexAttribute,this.optionIndex++);var optionImage,optionImageSrc=option.getAttribute("data-image");return optionImageSrc&&((optionImage=document.createElement("img")).src=optionImageSrc,newOption.insertBefore(optionImage,newOption.childNodes[0])),option.disabled&&(newOption.className+=" "+this.options.disabledClass),option.className&&(newOption.className+=" "+getPrefixedClasses(option.className,this.options.cloneClassPrefix)),newOption},createOptGroup:function(optgroup){var optGroupCaption,optGroupList,optGroupContainer=document.createElement("span"),optGroupName=optgroup.getAttribute("label");return optGroupCaption=document.createElement("span"),optGroupCaption.className=this.options.captionClass,optGroupCaption.innerHTML=optGroupName,optGroupContainer.appendChild(optGroupCaption),optgroup.children.length&&(optGroupList=this.createOptionsList(optgroup),optGroupContainer.appendChild(optGroupList)),optGroupContainer.className=this.options.groupClass,optGroupContainer},createOptionContainer:function(){return document.createElement("li")},createOptionsList:function(container){var self=this,list=document.createElement("ul");return $.each(container.children,function(index,currentNode){var newNode,item=self.createOptionContainer(currentNode);switch(currentNode.tagName.toLowerCase()){case"option":newNode=self.createOption(currentNode);break;case"optgroup":newNode=self.createOptGroup(currentNode)}list.appendChild(item).appendChild(newNode)}),list},refresh:function(){this.storedSelectHTML!==this.element.prop("innerHTML")&&this.rebuildList();var scrollInstance=jcf.getInstance(this.listHolder);scrollInstance&&scrollInstance.refresh(),this.refreshSelectedClass()},destroy:function(){this.listHolder.off("jcf-mousewheel",this.preventWheelHandler),this.listHolder.off("jcf-pointerdown",this.indexSelector,this.onSelectItem),this.listHolder.off("jcf-pointerover",this.indexSelector,this.onHoverItem),this.listHolder.off("jcf-pointerdown",this.onPress)}});var getPrefixedClasses=function(className,prefixToAdd){return className?className.replace(/[\s]*([\S]+)+[\s]*/gi,prefixToAdd+"$1 "):""},makeUnselectable=function(){function preventHandler(e){e.preventDefault()}var unselectableClass=jcf.getOptions().unselectableClass;return function(node){node.addClass(unselectableClass).on("selectstart",preventHandler)}}()}(jQuery,this),function($){"use strict";jcf.addModule({name:"Radio",selector:'input[type="radio"]',options:{wrapNative:!0,checkedClass:"jcf-checked",uncheckedClass:"jcf-unchecked",labelActiveClass:"jcf-label-active",fakeStructure:'<span class="jcf-radio"><span></span></span>'},matchElement:function(element){return element.is(":radio")},init:function(){this.initStructure(),this.attachEvents(),this.refresh()},initStructure:function(){this.doc=$(document),this.realElement=$(this.options.element),this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement),this.labelElement=this.getLabelFor(),this.options.wrapNative?this.realElement.prependTo(this.fakeElement).css({position:"absolute",opacity:0}):this.realElement.addClass(this.options.hiddenClass)},attachEvents:function(){this.realElement.on({focus:this.onFocus,click:this.onRealClick}),this.fakeElement.on("click",this.onFakeClick),this.fakeElement.on("jcf-pointerdown",this.onPress)},onRealClick:function(e){var self=this;this.savedEventObject=e,setTimeout(function(){self.refreshRadioGroup()},0)},onFakeClick:function(e){this.options.wrapNative&&this.realElement.is(e.target)||this.realElement.is(":disabled")||(delete this.savedEventObject,this.currentActiveRadio=this.getCurrentActiveRadio(),this.stateChecked=this.realElement.prop("checked"),this.realElement.prop("checked",!0),this.fireNativeEvent(this.realElement,"click"),this.savedEventObject&&this.savedEventObject.isDefaultPrevented()?(this.realElement.prop("checked",this.stateChecked),this.currentActiveRadio.prop("checked",!0)):this.fireNativeEvent(this.realElement,"change"),delete this.savedEventObject)},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.focusedFlag=!0,this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur))},onBlur:function(){this.pressedFlag||(this.focusedFlag=!1,this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur))},onPress:function(e){this.focusedFlag||"mouse"!==e.pointerType||this.realElement.focus(),this.pressedFlag=!0,this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onRelease)},onRelease:function(e){this.focusedFlag&&"mouse"===e.pointerType&&this.realElement.focus(),this.pressedFlag=!1,this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onRelease)},getCurrentActiveRadio:function(){return this.getRadioGroup(this.realElement).filter(":checked")},getRadioGroup:function(radio){var name=radio.attr("name"),parentForm=radio.parents("form");return name?parentForm.length?parentForm.find('input[name="'+name+'"]'):$('input[name="'+name+'"]:not(form input)'):radio},getLabelFor:function(){var parentLabel=this.realElement.closest("label"),elementId=this.realElement.prop("id");return!parentLabel.length&&elementId&&(parentLabel=$('label[for="'+elementId+'"]')),parentLabel.length?parentLabel:null},refreshRadioGroup:function(){this.getRadioGroup(this.realElement).each(function(){jcf.refresh(this)})},refresh:function(){var isChecked=this.realElement.is(":checked"),isDisabled=this.realElement.is(":disabled");this.fakeElement.toggleClass(this.options.checkedClass,isChecked).toggleClass(this.options.uncheckedClass,!isChecked).toggleClass(this.options.disabledClass,isDisabled),this.labelElement&&this.labelElement.toggleClass(this.options.labelActiveClass,isChecked)},destroy:function(){this.options.wrapNative?this.realElement.insertBefore(this.fakeElement).css({position:"",width:"",height:"",opacity:"",margin:""}):this.realElement.removeClass(this.options.hiddenClass),this.fakeElement.off("jcf-pointerdown",this.onPress),this.fakeElement.remove(),this.doc.off("jcf-pointerup",this.onRelease),this.realElement.off({blur:this.onBlur,focus:this.onFocus,click:this.onRealClick})}})}(jQuery),function($){"use strict";jcf.addModule({name:"Checkbox",selector:'input[type="checkbox"]',options:{wrapNative:!0,checkedClass:"jcf-checked",uncheckedClass:"jcf-unchecked",labelActiveClass:"jcf-label-active",fakeStructure:'<span class="jcf-checkbox"><span></span></span>'},matchElement:function(element){return element.is(":checkbox")},init:function(){this.initStructure(),this.attachEvents(),this.refresh()},initStructure:function(){this.doc=$(document),this.realElement=$(this.options.element),this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement),this.labelElement=this.getLabelFor(),this.options.wrapNative?this.realElement.appendTo(this.fakeElement).css({position:"absolute",height:"100%",width:"100%",opacity:0,margin:0}):this.realElement.addClass(this.options.hiddenClass)},attachEvents:function(){this.realElement.on({focus:this.onFocus,click:this.onRealClick}),this.fakeElement.on("click",this.onFakeClick),this.fakeElement.on("jcf-pointerdown",this.onPress)},onRealClick:function(e){var self=this;this.savedEventObject=e,setTimeout(function(){self.refresh()},0)},onFakeClick:function(e){this.options.wrapNative&&this.realElement.is(e.target)||this.realElement.is(":disabled")||(delete this.savedEventObject,this.stateChecked=this.realElement.prop("checked"),this.realElement.prop("checked",!this.stateChecked),this.fireNativeEvent(this.realElement,"click"),this.savedEventObject&&this.savedEventObject.isDefaultPrevented()?this.realElement.prop("checked",this.stateChecked):this.fireNativeEvent(this.realElement,"change"),delete this.savedEventObject)},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.focusedFlag=!0,this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur))},onBlur:function(){this.pressedFlag||(this.focusedFlag=!1,this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur))},onPress:function(e){this.focusedFlag||"mouse"!==e.pointerType||this.realElement.focus(),this.pressedFlag=!0,this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onRelease)},onRelease:function(e){this.focusedFlag&&"mouse"===e.pointerType&&this.realElement.focus(),this.pressedFlag=!1,this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onRelease)},getLabelFor:function(){var parentLabel=this.realElement.closest("label"),elementId=this.realElement.prop("id");return!parentLabel.length&&elementId&&(parentLabel=$('label[for="'+elementId+'"]')),parentLabel.length?parentLabel:null},refresh:function(){var isChecked=this.realElement.is(":checked"),isDisabled=this.realElement.is(":disabled");this.fakeElement.toggleClass(this.options.checkedClass,isChecked).toggleClass(this.options.uncheckedClass,!isChecked).toggleClass(this.options.disabledClass,isDisabled),this.labelElement&&this.labelElement.toggleClass(this.options.labelActiveClass,isChecked)},destroy:function(){this.options.wrapNative?this.realElement.insertBefore(this.fakeElement).css({position:"",width:"",height:"",opacity:"",margin:""}):this.realElement.removeClass(this.options.hiddenClass),this.fakeElement.off("jcf-pointerdown",this.onPress),this.fakeElement.remove(),this.doc.off("jcf-pointerup",this.onRelease),this.realElement.off({focus:this.onFocus,click:this.onRealClick})}})}(jQuery),function($,window){"use strict";function ScrollBar(options){this.options=$.extend({holder:null,vertical:!0,inactiveClass:"jcf-inactive",verticalClass:"jcf-scrollbar-vertical",horizontalClass:"jcf-scrollbar-horizontal",scrollbarStructure:'<div class="jcf-scrollbar"><div class="jcf-scrollbar-dec"></div><div class="jcf-scrollbar-slider"><div class="jcf-scrollbar-handle"></div></div><div class="jcf-scrollbar-inc"></div></div>',btnDecSelector:".jcf-scrollbar-dec",btnIncSelector:".jcf-scrollbar-inc",sliderSelector:".jcf-scrollbar-slider",handleSelector:".jcf-scrollbar-handle",scrollInterval:300,scrollStep:400},options),this.init()}jcf.addModule({name:"Scrollable",selector:".jcf-scrollable",plugins:{ScrollBar:ScrollBar},options:{mouseWheelStep:150,handleResize:!0,alwaysShowScrollbars:!1,alwaysPreventMouseWheel:!1,scrollAreaStructure:'<div class="jcf-scrollable-wrapper"></div>'},matchElement:function(element){return element.is(".jcf-scrollable")},init:function(){this.initStructure(),this.attachEvents(),this.rebuildScrollbars()},initStructure:function(){this.doc=$(document),this.win=$(window),this.realElement=$(this.options.element),this.scrollWrapper=$(this.options.scrollAreaStructure).insertAfter(this.realElement),this.scrollWrapper.css("position","relative"),this.realElement.css("overflow","hidden"),this.vBarEdge=0},attachEvents:function(){var self=this;this.vBar=new ScrollBar({holder:this.scrollWrapper,vertical:!0,onScroll:function(scrollTop){self.realElement.scrollTop(scrollTop)}}),this.hBar=new ScrollBar({holder:this.scrollWrapper,vertical:!1,onScroll:function(scrollLeft){self.realElement.scrollLeft(scrollLeft)}}),this.realElement.on("scroll",this.onScroll),this.options.handleResize&&this.win.on("resize orientationchange load",this.onResize),this.realElement.on("jcf-mousewheel",this.onMouseWheel),this.realElement.on("jcf-pointerdown",this.onTouchBody)},onScroll:function(){this.redrawScrollbars()},onResize:function(){$(document.activeElement).is(":input")||this.rebuildScrollbars()},onTouchBody:function(e){"touch"===e.pointerType&&(this.touchData={scrollTop:this.realElement.scrollTop(),scrollLeft:this.realElement.scrollLeft(),left:e.pageX,top:e.pageY},this.doc.on({"jcf-pointermove":this.onMoveBody,"jcf-pointerup":this.onReleaseBody}))},onMoveBody:function(e){var targetScrollTop,targetScrollLeft,verticalScrollAllowed=this.verticalScrollActive,horizontalScrollAllowed=this.horizontalScrollActive;"touch"===e.pointerType&&(targetScrollTop=this.touchData.scrollTop-e.pageY+this.touchData.top,targetScrollLeft=this.touchData.scrollLeft-e.pageX+this.touchData.left,this.verticalScrollActive&&(targetScrollTop<0||targetScrollTop>this.vBar.maxValue)&&(verticalScrollAllowed=!1),this.horizontalScrollActive&&(targetScrollLeft<0||targetScrollLeft>this.hBar.maxValue)&&(horizontalScrollAllowed=!1),this.realElement.scrollTop(targetScrollTop),this.realElement.scrollLeft(targetScrollLeft),verticalScrollAllowed||horizontalScrollAllowed?e.preventDefault():this.onReleaseBody(e))},onReleaseBody:function(e){"touch"===e.pointerType&&(delete this.touchData,this.doc.off({"jcf-pointermove":this.onMoveBody,"jcf-pointerup":this.onReleaseBody}))},onMouseWheel:function(e){var extraLeft,extraTop,preventFlag,currentScrollTop=this.realElement.scrollTop(),currentScrollLeft=this.realElement.scrollLeft(),maxScrollTop=this.realElement.prop("scrollHeight")-this.embeddedDimensions.innerHeight,maxScrollLeft=this.realElement.prop("scrollWidth")-this.embeddedDimensions.innerWidth;(this.options.alwaysPreventMouseWheel||(this.verticalScrollActive&&e.deltaY&&(currentScrollTop<=0&&e.deltaY<0||currentScrollTop>=maxScrollTop&&e.deltaY>0||(preventFlag=!0)),this.horizontalScrollActive&&e.deltaX&&(currentScrollLeft<=0&&e.deltaX<0||currentScrollLeft>=maxScrollLeft&&e.deltaX>0||(preventFlag=!0)),this.verticalScrollActive||this.horizontalScrollActive))&&(preventFlag||this.options.alwaysPreventMouseWheel)&&(e.preventDefault(),extraLeft=e.deltaX/100*this.options.mouseWheelStep,extraTop=e.deltaY/100*this.options.mouseWheelStep,this.realElement.scrollTop(currentScrollTop+extraTop),this.realElement.scrollLeft(currentScrollLeft+extraLeft))},setScrollBarEdge:function(edgeSize){this.vBarEdge=edgeSize||0,this.redrawScrollbars()},saveElementDimensions:function(){return this.savedDimensions={top:this.realElement.width(),left:this.realElement.height()},this},restoreElementDimensions:function(){return this.savedDimensions&&this.realElement.css({width:this.savedDimensions.width,height:this.savedDimensions.height}),this},saveScrollOffsets:function(){return this.savedOffsets={top:this.realElement.scrollTop(),left:this.realElement.scrollLeft()},this},restoreScrollOffsets:function(){return this.savedOffsets&&(this.realElement.scrollTop(this.savedOffsets.top),this.realElement.scrollLeft(this.savedOffsets.left)),this},getContainerDimensions:function(){var desiredDimensions,currentStyles,currentHeight,currentWidth;return this.isModifiedStyles?desiredDimensions={width:this.realElement.innerWidth()+this.vBar.getThickness(),height:this.realElement.innerHeight()+this.hBar.getThickness()}:(this.saveElementDimensions().saveScrollOffsets(),this.realElement.insertAfter(this.scrollWrapper),this.scrollWrapper.detach(),currentStyles=this.realElement.prop("style"),currentWidth=parseFloat(currentStyles.width),currentHeight=parseFloat(currentStyles.height),this.embeddedDimensions&&currentWidth&&currentHeight&&(this.isModifiedStyles|=currentWidth!==this.embeddedDimensions.width||currentHeight!==this.embeddedDimensions.height,this.realElement.css({overflow:"",width:"",height:""})),desiredDimensions={width:this.realElement.outerWidth(),height:this.realElement.outerHeight()},this.scrollWrapper.insertAfter(this.realElement),this.realElement.css("overflow","hidden").prependTo(this.scrollWrapper),this.restoreElementDimensions().restoreScrollOffsets()),desiredDimensions},getEmbeddedDimensions:function(dimensions){var resultDimensions,fakeBarWidth=this.vBar.getThickness(),fakeBarHeight=this.hBar.getThickness(),paddingWidth=this.realElement.outerWidth()-this.realElement.width(),paddingHeight=this.realElement.outerHeight()-this.realElement.height();return this.options.alwaysShowScrollbars?(this.verticalScrollActive=!0,this.horizontalScrollActive=!0,resultDimensions={innerWidth:dimensions.width-fakeBarWidth,innerHeight:dimensions.height-fakeBarHeight}):(this.saveElementDimensions(),this.verticalScrollActive=!1,this.horizontalScrollActive=!1,this.realElement.css({width:dimensions.width-paddingWidth,height:dimensions.height-paddingHeight}),this.horizontalScrollActive=this.realElement.prop("scrollWidth")>this.containerDimensions.width,this.verticalScrollActive=this.realElement.prop("scrollHeight")>this.containerDimensions.height,this.restoreElementDimensions(),resultDimensions={innerWidth:dimensions.width-(this.verticalScrollActive?fakeBarWidth:0),innerHeight:dimensions.height-(this.horizontalScrollActive?fakeBarHeight:0)}),$.extend(resultDimensions,{width:resultDimensions.innerWidth-paddingWidth,height:resultDimensions.innerHeight-paddingHeight}),resultDimensions},rebuildScrollbars:function(){this.containerDimensions=this.getContainerDimensions(),this.embeddedDimensions=this.getEmbeddedDimensions(this.containerDimensions),this.scrollWrapper.css({width:this.containerDimensions.width,height:this.containerDimensions.height}),this.realElement.css({overflow:"hidden",width:this.embeddedDimensions.width,height:this.embeddedDimensions.height}),this.redrawScrollbars()},redrawScrollbars:function(){var viewSize,maxScrollValue;this.verticalScrollActive?(viewSize=this.vBarEdge?this.containerDimensions.height-this.vBarEdge:this.embeddedDimensions.innerHeight,maxScrollValue=Math.max(this.realElement.prop("offsetHeight"),this.realElement.prop("scrollHeight"))-this.vBarEdge,this.vBar.show().setMaxValue(maxScrollValue-viewSize).setRatio(viewSize/maxScrollValue).setSize(viewSize),this.vBar.setValue(this.realElement.scrollTop())):this.vBar.hide(),this.horizontalScrollActive?(viewSize=this.embeddedDimensions.innerWidth,(maxScrollValue=this.realElement.prop("scrollWidth"))===viewSize&&(this.horizontalScrollActive=!1),this.hBar.show().setMaxValue(maxScrollValue-viewSize).setRatio(viewSize/maxScrollValue).setSize(viewSize),this.hBar.setValue(this.realElement.scrollLeft())):this.hBar.hide();var touchAction="";this.verticalScrollActive&&this.horizontalScrollActive?touchAction="none":this.verticalScrollActive?touchAction="pan-x":this.horizontalScrollActive&&(touchAction="pan-y"),this.realElement.css("touchAction",touchAction)},refresh:function(){this.rebuildScrollbars()},destroy:function(){this.win.off("resize orientationchange load",this.onResize),this.realElement.off({"jcf-mousewheel":this.onMouseWheel,"jcf-pointerdown":this.onTouchBody}),this.doc.off({"jcf-pointermove":this.onMoveBody,"jcf-pointerup":this.onReleaseBody}),this.saveScrollOffsets(),this.vBar.destroy(),this.hBar.destroy(),this.realElement.insertAfter(this.scrollWrapper).css({touchAction:"",overflow:"",width:"",height:""}),this.scrollWrapper.remove(),this.restoreScrollOffsets()}}),$.extend(ScrollBar.prototype,{init:function(){this.initStructure(),this.attachEvents()},initStructure:function(){this.doc=$(document),this.isVertical=!!this.options.vertical,this.sizeProperty=this.isVertical?"height":"width",this.fullSizeProperty=this.isVertical?"outerHeight":"outerWidth",this.invertedSizeProperty=this.isVertical?"width":"height",this.thicknessMeasureMethod="outer"+this.invertedSizeProperty.charAt(0).toUpperCase()+this.invertedSizeProperty.substr(1),this.offsetProperty=this.isVertical?"top":"left",this.offsetEventProperty=this.isVertical?"pageY":"pageX",this.value=this.options.value||0,this.maxValue=this.options.maxValue||0,this.currentSliderSize=0,this.handleSize=0,this.holder=$(this.options.holder),this.scrollbar=$(this.options.scrollbarStructure).appendTo(this.holder),this.btnDec=this.scrollbar.find(this.options.btnDecSelector),this.btnInc=this.scrollbar.find(this.options.btnIncSelector),this.slider=this.scrollbar.find(this.options.sliderSelector),this.handle=this.slider.find(this.options.handleSelector),this.scrollbar.addClass(this.isVertical?this.options.verticalClass:this.options.horizontalClass).css({touchAction:this.isVertical?"pan-x":"pan-y",position:"absolute"}),this.slider.css({position:"relative"}),this.handle.css({touchAction:"none",position:"absolute"})},attachEvents:function(){this.bindHandlers(),this.handle.on("jcf-pointerdown",this.onHandlePress),this.slider.add(this.btnDec).add(this.btnInc).on("jcf-pointerdown",this.onButtonPress)},onHandlePress:function(e){"mouse"===e.pointerType&&e.button>1||(e.preventDefault(),this.handleDragActive=!0,this.sliderOffset=this.slider.offset()[this.offsetProperty],this.innerHandleOffset=e[this.offsetEventProperty]-this.handle.offset()[this.offsetProperty],this.doc.on("jcf-pointermove",this.onHandleDrag),this.doc.on("jcf-pointerup",this.onHandleRelease))},onHandleDrag:function(e){e.preventDefault(),this.calcOffset=e[this.offsetEventProperty]-this.sliderOffset-this.innerHandleOffset,this.setValue(this.calcOffset/(this.currentSliderSize-this.handleSize)*this.maxValue),this.triggerScrollEvent(this.value)},onHandleRelease:function(){this.handleDragActive=!1,this.doc.off("jcf-pointermove",this.onHandleDrag),this.doc.off("jcf-pointerup",this.onHandleRelease)},onButtonPress:function(e){var direction,clickOffset;"mouse"===e.pointerType&&e.button>1||(e.preventDefault(),this.handleDragActive||(this.slider.is(e.currentTarget)?(direction=this.handle.offset()[this.offsetProperty]>e[this.offsetEventProperty]?-1:1,clickOffset=e[this.offsetEventProperty]-this.slider.offset()[this.offsetProperty],this.startPageScrolling(direction,clickOffset)):(direction=this.btnDec.is(e.currentTarget)?-1:1,this.startSmoothScrolling(direction)),this.doc.on("jcf-pointerup",this.onButtonRelease)))},onButtonRelease:function(){this.stopPageScrolling(),this.stopSmoothScrolling(),this.doc.off("jcf-pointerup",this.onButtonRelease)},startPageScrolling:function(direction,clickOffset){var self=this,stepValue=direction*self.currentSize,isFinishedScrolling=function(){var handleTop=self.value/self.maxValue*(self.currentSliderSize-self.handleSize);return direction>0?handleTop+self.handleSize>=clickOffset:handleTop<=clickOffset},doPageScroll=function(){self.value+=stepValue,self.setValue(self.value),self.triggerScrollEvent(self.value),isFinishedScrolling()&&clearInterval(self.pageScrollTimer)};this.pageScrollTimer=setInterval(doPageScroll,this.options.scrollInterval),doPageScroll()},stopPageScrolling:function(){clearInterval(this.pageScrollTimer)},startSmoothScrolling:function(direction){var dt,self=this;this.stopSmoothScrolling();var raf=window.requestAnimationFrame||function(func){setTimeout(func,16)},getTimestamp=function(){return Date.now?Date.now():(new Date).getTime()},isFinishedScrolling=function(){return direction>0?self.value>=self.maxValue:self.value<=0},doScrollAnimation=function(){var stepValue=(getTimestamp()-dt)/1e3*self.options.scrollStep;self.smoothScrollActive&&(self.value+=stepValue*direction,self.setValue(self.value),self.triggerScrollEvent(self.value),isFinishedScrolling()||(dt=getTimestamp(),raf(doScrollAnimation)))};self.smoothScrollActive=!0,dt=getTimestamp(),raf(doScrollAnimation)},stopSmoothScrolling:function(){this.smoothScrollActive=!1},triggerScrollEvent:function(scrollValue){this.options.onScroll&&this.options.onScroll(scrollValue)},getThickness:function(){return this.scrollbar[this.thicknessMeasureMethod]()},setSize:function(size){var btnDecSize=this.btnDec[this.fullSizeProperty](),btnIncSize=this.btnInc[this.fullSizeProperty]();return this.currentSize=size,this.currentSliderSize=size-btnDecSize-btnIncSize,this.scrollbar.css(this.sizeProperty,size),this.slider.css(this.sizeProperty,this.currentSliderSize),this.currentSliderSize=this.slider[this.sizeProperty](),this.handleSize=Math.round(this.currentSliderSize*this.ratio),this.handle.css(this.sizeProperty,this.handleSize),this.handleSize=this.handle[this.fullSizeProperty](),this},setRatio:function(ratio){return this.ratio=ratio,this},setMaxValue:function(maxValue){return this.maxValue=maxValue,this.setValue(Math.min(this.value,this.maxValue)),this},setValue:function(value){this.value=value,this.value<0?this.value=0:this.value>this.maxValue&&(this.value=this.maxValue),this.refresh()},setPosition:function(styles){return this.scrollbar.css(styles),this},hide:function(){return this.scrollbar.detach(),this},show:function(){return this.scrollbar.appendTo(this.holder),this},refresh:function(){0===this.value||0===this.maxValue?this.calcOffset=0:this.calcOffset=this.value/this.maxValue*(this.currentSliderSize-this.handleSize),this.handle.css(this.offsetProperty,this.calcOffset),this.btnDec.toggleClass(this.options.inactiveClass,0===this.value),this.btnInc.toggleClass(this.options.inactiveClass,this.value===this.maxValue),this.scrollbar.toggleClass(this.options.inactiveClass,0===this.maxValue)},destroy:function(){this.btnDec.add(this.btnInc).off("jcf-pointerdown",this.onButtonPress),this.handle.off("jcf-pointerdown",this.onHandlePress),this.doc.off("jcf-pointermove",this.onHandleDrag),this.doc.off("jcf-pointerup",this.onHandleRelease),this.doc.off("jcf-pointerup",this.onButtonRelease),this.stopSmoothScrolling(),this.stopPageScrolling(),this.scrollbar.remove()}})}(jQuery,this),function($){"use strict";jcf.addModule({name:"File",selector:'input[type="file"]',options:{fakeStructure:'<span class="jcf-file"><span class="jcf-fake-input"></span><span class="jcf-upload-button"><span class="jcf-button-content"></span></span></span>',buttonText:"Choose file",placeholderText:"No file chosen",realElementClass:"jcf-real-element",extensionPrefixClass:"jcf-extension-",selectedFileBlock:".jcf-fake-input",buttonTextBlock:".jcf-button-content"},matchElement:function(element){return element.is('input[type="file"]')},init:function(){this.initStructure(),this.attachEvents(),this.refresh()},initStructure:function(){this.doc=$(document),this.realElement=$(this.options.element).addClass(this.options.realElementClass),this.fakeElement=$(this.options.fakeStructure).insertBefore(this.realElement),this.fileNameBlock=this.fakeElement.find(this.options.selectedFileBlock),this.buttonTextBlock=this.fakeElement.find(this.options.buttonTextBlock).text(this.options.buttonText),this.realElement.appendTo(this.fakeElement).css({position:"absolute",opacity:0})},attachEvents:function(){this.realElement.on({"jcf-pointerdown":this.onPress,change:this.onChange,focus:this.onFocus})},onChange:function(){this.refresh()},onFocus:function(){this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur)},onBlur:function(){this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur)},onPress:function(){this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onRelease)},onRelease:function(){this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onRelease)},getFileName:function(){var resultFileName="",files=this.realElement.prop("files");return files&&files.length?$.each(files,function(index,file){resultFileName+=(index>0?", ":"")+file.name}):resultFileName=this.realElement.val().replace(/^[\s\S]*(?:\\|\/)([\s\S^\\\/]*)$/g,"$1"),resultFileName},getFileExtension:function(){var fileName=this.realElement.val();return fileName.lastIndexOf(".")<0?"":fileName.substring(fileName.lastIndexOf(".")+1).toLowerCase()},updateExtensionClass:function(){var currentExtension=this.getFileExtension(),cleanedClassList=this.fakeElement.prop("className").replace(new RegExp("(\\s|^)"+this.options.extensionPrefixClass+"[^ ]+","gi"),"");this.fakeElement.prop("className",cleanedClassList),currentExtension&&this.fakeElement.addClass(this.options.extensionPrefixClass+currentExtension)},refresh:function(){var selectedFileName=this.getFileName()||this.options.placeholderText;this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(":disabled")),this.fileNameBlock.text(selectedFileName),this.updateExtensionClass()},destroy:function(){this.realElement.insertBefore(this.fakeElement).removeClass(this.options.realElementClass).css({position:"",opacity:""}),this.fakeElement.remove(),this.realElement.off({"jcf-pointerdown":this.onPress,change:this.onChange,focus:this.onFocus,blur:this.onBlur}),this.doc.off("jcf-pointerup",this.onRelease)}})}(jQuery),function($){var body=$("body");$.fn.contentTabs=function(o){var options=$.extend({activeClass:"active",addToParent:!1,autoHeight:!1,autoRotate:!1,checkHash:!0,animSpeed:400,switchTime:3e3,effect:"none",tabLinks:"a",attrib:"href",event:"click"},o);return this.each(function(){function switchTab(oldLink,newLink){animating=!0;var oldTab=oldLink.data("ctab"),newTab=newLink.data("ctab");prevActiveLink=newLink,currentTab=newTab,body.css({minHeight:body.innerHeight()}),(options.addToParent?tabLinksParents:tabLinks).removeClass(options.activeClass),(options.addToParent?newLink.data("cparent"):newLink).addClass(options.activeClass),resizeHolder(oldTab,!0),contentTabsEffect[options.effect].hide({speed:options.animSpeed,tab:oldTab,complete:function(){resizeHolder(newTab.removeClass(tabHiddenClass).width("")),contentTabsEffect[options.effect].show({speed:options.animSpeed,tab:newTab,complete:function(){oldTab.is(newTab)||oldTab.width(oldTab.width()).addClass(tabHiddenClass),animating=!1,resizeHolder(newTab,!1),autoRotate(),$(window).trigger("resize"),body.css({minHeight:""}),$.isFunction(options.onChange)&&options.onChange(oldTab,newTab,newLink,tabLinks,tabset)}})}})}function resizeHolder(block,state){var curBlock=block&&block.length?block:currentTab;if(options.autoHeight&&curBlock)if(tabHolder.stop(),!1===state)tabHolder.css({height:""});else{var origStyles=curBlock.attr("style");curBlock.show().css({width:curBlock.width()});var tabHeight=curBlock.outerHeight(!0);origStyles?curBlock.attr("style",origStyles):curBlock.removeAttr("style"),!0===state?tabHolder.css({height:tabHeight}):tabHolder.animate({height:tabHeight},{duration:options.animSpeed})}}function nextTab(){var activeItem=(options.addToParent?tabLinksParents:tabLinks).filter("."+options.activeClass),activeIndex=(options.addToParent?tabLinksParents:tabLinks).index(activeItem),newLink=tabLinks.eq(activeIndex<tabLinks.length-1?activeIndex+1:0);switchTab(prevActiveLink=tabLinks.eq(activeIndex),newLink)}function autoRotate(){options.autoRotate&&tabLinks.length>1&&(clearTimeout(rotationTimer),rotationTimer=setTimeout(function(){animating?autoRotate():nextTab()},options.switchTime))}var currentTab,animating,tabHolder,tabset=$(this),tabs=$(),tabLinks=tabset.find(options.tabLinks),tabLinksParents=tabLinks.parent(),prevActiveLink=tabLinks.eq(0);options.checkHash&&tabLinks.filter("["+options.attrib+'="'+location.hash+'"]').length&&((options.addToParent?tabLinksParents:tabLinks).removeClass(options.activeClass),setTimeout(function(){window.scrollTo(0,0)},1)),tabLinks.each(function(){var link=$(this),href=link.attr(options.attrib),parent=link.parent();if(-1!=href.lastIndexOf("#")){href=href.substr(href.lastIndexOf("#"));tab=$(href).hide().addClass(tabHiddenClass);tabs=tabs.add(tab),link.data("cparent",parent),link.data("ctab",tab),!tabHolder&&tab.length&&(tabHolder=tab.parent()),(classOwner=options.addToParent?parent:link).hasClass(options.activeClass)||options.checkHash&&location.hash===href?(classOwner.addClass(options.activeClass),prevActiveLink=link,currentTab=tab,tab.removeClass(tabHiddenClass).width(""),contentTabsEffect[options.effect].show({tab:tab,fast:!0,complete:function(){$.isFunction(options.onInit)&&options.onInit(tab,link,tabLinks,options.checkHash&&location.hash===href,tabset)}}),contentTabsEffect[options.effect].show({tab:tab,fast:!0})):((tabWidth=tab.width())&&tab.width(tabWidth),tab.addClass(tabHiddenClass)),link.bind(options.event,function(e){link==prevActiveLink||animating||(switchTab(prevActiveLink,link),prevActiveLink=link)}),"href"===options.attrib&&link.bind("click",function(e){e.preventDefault()})}else{var tab=$(href).hide().addClass(tabHiddenClass);tabs=tabs.add(tab),link.data("cparent",parent),link.data("ctab",tab),!tabHolder&&tab.length&&(tabHolder=tab.parent());var classOwner=options.addToParent?parent:link;if(classOwner.hasClass(options.activeClass)||options.checkHash&&location.hash===href)classOwner.addClass(options.activeClass),prevActiveLink=link,currentTab=tab,tab.removeClass(tabHiddenClass).width(""),contentTabsEffect[options.effect].show({tab:tab,fast:!0,complete:function(){$.isFunction(options.onInit)&&options.onInit(tab,link,tabLinks,options.checkHash&&location.hash===href,tabset)}}),contentTabsEffect[options.effect].show({tab:tab,fast:!0});else{var tabWidth=tab.width();tabWidth&&tab.width(tabWidth),tab.addClass(tabHiddenClass)}}}),options.autoHeight&&$(window).bind("resize orientationchange",function(){tabs.not(currentTab).removeClass(tabHiddenClass).show().each(function(){var tab=jQuery(this),tabWidth=tab.css({width:""}).width();tabWidth&&tab.width(tabWidth)}).hide().addClass(tabHiddenClass),resizeHolder(currentTab,!1)});var rotationTimer;autoRotate()})};var tabHiddenClass="js-tab-hidden";!function(){var tabStyleSheet=$('<style type="text/css">')[0],tabStyleRule="."+tabHiddenClass;tabStyleRule+="{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",tabStyleSheet.styleSheet?tabStyleSheet.styleSheet.cssText=tabStyleRule:tabStyleSheet.appendChild(document.createTextNode(tabStyleRule)),$("head").append(tabStyleSheet)}();var contentTabsEffect={none:{show:function(o){o.tab.css({display:"block"}),o.complete&&o.complete()},hide:function(o){o.tab.css({display:"none"}),o.complete&&o.complete()}},fade:{show:function(o){o.fast&&(o.speed=1),o.tab.fadeIn(o.speed),o.complete&&setTimeout(o.complete,o.speed)},hide:function(o){o.fast&&(o.speed=1),o.tab.fadeOut(o.speed),o.complete&&setTimeout(o.complete,o.speed)}},slide:{show:function(o){var tabHeight=o.tab.show().css({width:o.tab.width()}).outerHeight(!0),tmpWrap=$('<div class="effect-div">').insertBefore(o.tab).append(o.tab);tmpWrap.css({width:"100%",overflow:"hidden",position:"relative"}),o.tab.css({marginTop:-tabHeight,display:"block"}),o.fast&&(o.speed=1),o.tab.animate({marginTop:0},{duration:o.speed,complete:function(){o.tab.css({marginTop:"",width:""}).insertBefore(tmpWrap),tmpWrap.remove(),o.complete&&o.complete()}})},hide:function(o){var tabHeight=o.tab.show().css({width:o.tab.width()}).outerHeight(!0),tmpWrap=$('<div class="effect-div">').insertBefore(o.tab).append(o.tab);tmpWrap.css({width:"100%",overflow:"hidden",position:"relative"}),o.fast&&(o.speed=1),o.tab.animate({marginTop:-tabHeight},{duration:o.speed,complete:function(){o.tab.css({display:"none",marginTop:"",width:""}).insertBefore(tmpWrap),tmpWrap.remove(),o.complete&&o.complete()}})}}}}(jQuery),function($,exports){function scrollTo(offset,options,callback){var scrollBlock;document.body&&(options="number"==typeof options?{duration:options}:options||{},page=page||$("html, body"),scrollBlock=options.container||page,"number"==typeof offset&&(offset={top:offset}),activeBlock&&activeWheelHandler&&activeBlock.off("mousewheel",activeWheelHandler),options.wheelBehavior&&"none"!==options.wheelBehavior&&(activeWheelHandler=function(e){"stop"===options.wheelBehavior?(scrollBlock.off("mousewheel",activeWheelHandler),scrollBlock.stop()):"ignore"===options.wheelBehavior&&e.preventDefault()},activeBlock=scrollBlock.on("mousewheel",activeWheelHandler)),scrollBlock.stop().animate({scrollLeft:offset.left,scrollTop:offset.top},options.duration,function(){activeWheelHandler&&scrollBlock.off("mousewheel",activeWheelHandler),$.isFunction(callback)&&callback()}))}function SmoothScroll(options){this.options=$.extend({anchorLinks:'a[href^="#"]',container:null,extraOffset:null,activeClasses:null,easing:"swing",animMode:"duration",animDuration:800,animSpeed:1500,anchorActiveClass:"anchor-active",sectionActiveClass:"section-active",wheelBehavior:"stop",useNativeAnchorScrolling:!1},options),this.init()}var page,activeBlock,activeWheelHandler,win=$(window);"onwheel"in document||document.documentMode;SmoothScroll.prototype={init:function(){this.initStructure(),this.attachEvents()},initStructure:function(options){this.container=$(this.options.container?this.options.container:"html,body"),this.scrollContainer=this.options.container?this.container:win,this.anchorLinks=$(this.options.anchorLinks)},getAnchorTarget:function(link){var targetId=$(link).attr("href");return $(targetId.length>1?targetId:"html")},getTargetOffset:function(block){var blockOffset=block.offset().top;return this.options.container&&(blockOffset-=this.container.offset().top-this.container.prop("scrollTop")),"number"==typeof this.options.extraOffset?blockOffset-=this.options.extraOffset:"function"==typeof this.options.extraOffset&&(blockOffset-=this.options.extraOffset(block)),{top:blockOffset}},attachEvents:function(){var self=this;this.options.activeClasses&&(this.anchorData=[],this.anchorLinks.each(function(){var anchorDataItem,link=jQuery(this),targetBlock=self.getAnchorTarget(link);$.each(self.anchorData,function(index,item){item.block[0]===targetBlock[0]&&(anchorDataItem=item)}),anchorDataItem?anchorDataItem.link=anchorDataItem.link.add(link):self.anchorData.push({link:link,block:targetBlock})}),this.resizeHandler=function(){self.recalculateOffsets()},this.scrollHandler=function(){self.refreshActiveClass()},this.recalculateOffsets(),this.scrollContainer.on("scroll",this.scrollHandler),win.on("resize",this.resizeHandler)),this.clickHandler=function(e){self.onClick(e)},this.options.useNativeAnchorScrolling||this.anchorLinks.on("click",this.clickHandler)},recalculateOffsets:function(){var self=this;$.each(this.anchorData,function(index,data){data.offset=self.getTargetOffset(data.block),data.height=data.block.outerHeight()}),this.refreshActiveClass()},refreshActiveClass:function(){function toggleActiveClass(anchor,block,state){anchor.toggleClass(self.options.anchorActiveClass,state),block.toggleClass(self.options.sectionActiveClass,state)}var self=this,foundFlag=!1,containerHeight=(win.height(),this.container.prop("scrollHeight")),viewPortHeight=this.scrollContainer.height(),scrollTop=this.options.container?this.container.prop("scrollTop"):win.scrollTop();this.options.customScrollHandler?this.options.customScrollHandler.call(this,scrollTop,this.anchorData):(this.anchorData.sort(function(a,b){return a.offset.top-b.offset.top}),$.each(this.anchorData,function(index){var reverseIndex=self.anchorData.length-index-1,data=self.anchorData[reverseIndex],anchorElement="parent"===self.options.activeClasses?data.link.parent():data.link;scrollTop>=containerHeight-viewPortHeight?reverseIndex===self.anchorData.length-1?toggleActiveClass(anchorElement,data.block,!0):toggleActiveClass(anchorElement,data.block,!1):!foundFlag&&(scrollTop>=data.offset.top-1||0===reverseIndex)?(foundFlag=!0,toggleActiveClass(anchorElement,data.block,!0)):toggleActiveClass(anchorElement,data.block,!1)}))},calculateScrollDuration:function(offset){return"speed"===this.options.animMode?Math.abs(this.scrollContainer.scrollTop()-offset.top)/this.options.animSpeed*1e3:this.options.animDuration},onClick:function(e){var targetBlock=this.getAnchorTarget(e.currentTarget),targetOffset=this.getTargetOffset(targetBlock);e.preventDefault(),scrollTo(targetOffset,{container:this.container,wheelBehavior:this.options.wheelBehavior,duration:this.calculateScrollDuration(targetOffset)})},destroy:function(){this.options.activeClasses&&(win.off("resize",this.resizeHandler),this.scrollContainer.off("scroll",this.scrollHandler)),this.anchorLinks.off("click",this.clickHandler)}},$.extend(SmoothScroll,{scrollTo:function(blockOrOffset,durationOrOptions,callback){scrollTo(blockOrOffset,durationOrOptions,callback)}}),exports.SmoothScroll=SmoothScroll}(jQuery,this);var ImageStretcher={getDimensions:function(data){var ratio=data.imageRatio||data.imageWidth/data.imageHeight,slideWidth=data.maskWidth,slideHeight=slideWidth/ratio;return slideHeight<data.maskHeight&&(slideWidth=(slideHeight=data.maskHeight)*ratio),{width:slideWidth,height:slideHeight,top:(data.maskHeight-slideHeight)/2,left:(data.maskWidth-slideWidth)/2}},getRatio:function(image){if(image.prop("naturalWidth"))return image.prop("naturalWidth")/image.prop("naturalHeight");var img=new Image;return img.src=image.prop("src"),img.width/img.height},imageLoaded:function(image,callback){var self=this,loadHandler=function(){callback.call(self)};image.prop("complete")?loadHandler():image.one("load",loadHandler)},resizeHandler:function(){var self=this;jQuery.each(this.imgList,function(index,item){item.image.prop("complete")&&self.resizeImage(item.image,item.container)})},resizeImage:function(image,container){this.imageLoaded(image,function(){var styles=this.getDimensions({imageRatio:this.getRatio(image),maskWidth:container.width(),maskHeight:container.height()});image.css({width:styles.width,height:styles.height,marginTop:styles.top,marginLeft:styles.left,opacity:"1",transition:"opacity .2s"})})},add:function(options){var container=jQuery(options.container?options.container:window),image="string"==typeof options.image?container.find(options.image):jQuery(options.image);this.resizeImage(image,container),this.win||(this.resizeHandler=jQuery.proxy(this.resizeHandler,this),this.imgList=[],this.win=jQuery(window),this.win.on("resize orientationchange",this.resizeHandler)),this.imgList.push({container:container,image:image})}};!function($){var toggleOn,toggleOff,preventHandler,isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,isWinPhoneDevice=/Windows Phone/.test(navigator.userAgent),eventOn=isTouchDevice&&"touchstart"||isWinPhoneDevice&&navigator.pointerEnabled&&"pointerdown"||isWinPhoneDevice&&navigator.msPointerEnabled&&"MSPointerDown"||"mouseenter",eventOff=isTouchDevice&&"touchend"||isWinPhoneDevice&&navigator.pointerEnabled&&"pointerup"||isWinPhoneDevice&&navigator.msPointerEnabled&&"MSPointerUp"||"mouseleave";isTouchDevice||isWinPhoneDevice?(preventHandler=function(e){e.preventDefault()},toggleOn=function(e){var options=e.data,element=$(this),toggleOff=function(e){var target=$(e.target);target.is(element)||target.closest(element).length||(element.removeClass(options.hoverClass),element.off("click",preventHandler),options.onLeave&&options.onLeave(element),$(document).off(eventOn,toggleOff))};element.hasClass(options.hoverClass)||(element.addClass(options.hoverClass),element.one("click",preventHandler),$(document).on(eventOn,toggleOff),options.onHover&&options.onHover(element))}):(toggleOn=function(e){var options=e.data,element=$(this);element.addClass(options.hoverClass),$(options.context).on(eventOff,options.selector,options,toggleOff),options.onHover&&options.onHover(element)},toggleOff=function(e){var options=e.data,element=$(this);element.removeClass(options.hoverClass),$(options.context).off(eventOff,options.selector,toggleOff),options.onLeave&&options.onLeave(element)}),$.fn.touchHover=function(opt){var options=$.extend({context:this.context,selector:this.selector,hoverClass:"hover"},opt);return $(this.context).on(eventOn,this.selector,options,toggleOn),this}}(jQuery),function($){function FadeGallery(options){this.options=$.extend({slides:"ul.slideset > li",activeClass:"active",disabledClass:"disabled",btnPrev:"a.btn-prev",btnNext:"a.btn-next",generatePagination:!1,pagerList:"<ul>",pagerListItem:'<li><a href="#"></a></li>',pagerListItemText:"a",pagerLinks:".pagination li",currentNumber:"span.current-num",totalNumber:"span.total-num",btnPlay:".btn-play",btnPause:".btn-pause",btnPlayPause:".btn-play-pause",galleryReadyClass:"gallery-js-ready",autorotationActiveClass:"autorotation-active",autorotationDisabledClass:"autorotation-disabled",autorotationStopAfterClick:!1,circularRotation:!0,switchSimultaneously:!0,disableWhileAnimating:!1,disableFadeIE:!1,autoRotation:!1,pauseOnHover:!0,autoHeight:!1,useSwipe:!1,swipeThreshold:15,switchTime:4e3,animSpeed:600,event:"click"},options),this.init()}FadeGallery.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.refreshState(!0),this.autoRotate(),this.makeCallback("onInit",this))},findElements:function(){if(this.gallery=$(this.options.holder).addClass(this.options.galleryReadyClass),this.slides=this.gallery.find(this.options.slides),this.slidesHolder=this.slides.eq(0).parent(),this.stepsCount=this.slides.length,this.btnPrev=this.gallery.find(this.options.btnPrev),this.btnNext=this.gallery.find(this.options.btnNext),this.currentIndex=0,this.options.disableFadeIE&&!$.support.opacity&&(this.options.animSpeed=0),"string"==typeof this.options.generatePagination){this.pagerHolder=this.gallery.find(this.options.generatePagination).empty(),this.pagerList=$(this.options.pagerList).appendTo(this.pagerHolder);for(var i=0;i<this.stepsCount;i++)$(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i+1);this.pagerLinks=this.pagerList.children()}else this.pagerLinks=this.gallery.find(this.options.pagerLinks);var activeSlide=this.slides.filter("."+this.options.activeClass);activeSlide.length&&(this.currentIndex=this.slides.index(activeSlide)),this.prevIndex=this.currentIndex,this.btnPlay=this.gallery.find(this.options.btnPlay),this.btnPause=this.gallery.find(this.options.btnPause),this.btnPlayPause=this.gallery.find(this.options.btnPlayPause),this.curNum=this.gallery.find(this.options.currentNumber),this.allNum=this.gallery.find(this.options.totalNumber),this.slides.css({display:"block",opacity:0}).eq(this.currentIndex).css({opacity:""}),this.options.disableFadeIE&&!$.support.opacity&&this.slides.css({display:"block",visibility:"hidden"}).eq(this.currentIndex).css({visibility:""})},attachEvents:function(){var self=this;this.resizeHandler=function(){self.onWindowResize()},$(window).bind("load resize orientationchange",this.resizeHandler),$(window).bind("load",function(){setTimeout(function(){self.resizeHandler()},300)}),this.btnPrev.length&&(this.btnPrevHandler=function(e){e.preventDefault(),self.prevSlide(),self.options.autorotationStopAfterClick&&self.stopRotation()},this.btnPrev.bind(this.options.event,this.btnPrevHandler)),this.btnNext.length&&(this.btnNextHandler=function(e){e.preventDefault(),self.nextSlide(),self.options.autorotationStopAfterClick&&self.stopRotation()},this.btnNext.bind(this.options.event,this.btnNextHandler)),this.pagerLinks.length&&(this.pagerLinksHandler=function(e){e.preventDefault(),self.numSlide(self.pagerLinks.index(e.currentTarget)),self.options.autorotationStopAfterClick&&self.stopRotation()},this.pagerLinks.bind(self.options.event,this.pagerLinksHandler)),this.btnPlay.length&&(this.btnPlayHandler=function(e){e.preventDefault(),self.startRotation()},this.btnPlay.bind(this.options.event,this.btnPlayHandler)),this.btnPause.length&&(this.btnPauseHandler=function(e){e.preventDefault(),self.stopRotation()},this.btnPause.bind(this.options.event,this.btnPauseHandler)),this.btnPlayPause.length&&(this.btnPlayPauseHandler=function(e){e.preventDefault(),self.gallery.hasClass(self.options.autorotationActiveClass)?self.stopRotation():self.startRotation()},this.btnPlayPause.bind(this.options.event,this.btnPlayPauseHandler)),this.options.useSwipe&&window.Hammer&&isTouchDevice&&(this.swipeHandler=new Hammer.Manager(this.gallery[0]),this.swipeHandler.add(new Hammer.Swipe({direction:Hammer.DIRECTION_HORIZONTAL,threshold:self.options.swipeThreshold})),this.swipeHandler.on("swipeleft",function(){self.nextSlide()}).on("swiperight",function(){self.prevSlide()})),this.options.pauseOnHover&&(this.hoverHandler=function(){self.options.autoRotation&&(self.galleryHover=!0,self.pauseRotation())},this.leaveHandler=function(){self.options.autoRotation&&(self.galleryHover=!1,self.resumeRotation())},this.gallery.bind({mouseenter:this.hoverHandler,mouseleave:this.leaveHandler}))},onWindowResize:function(){this.options.autoHeight&&this.slidesHolder.css({height:this.slides.eq(this.currentIndex).outerHeight(!0)})},prevSlide:function(){this.options.disableWhileAnimating&&this.galleryAnimating||(this.prevIndex=this.currentIndex,this.currentIndex>0?(this.currentIndex--,this.switchSlide()):this.options.circularRotation&&(this.currentIndex=this.stepsCount-1,this.switchSlide()))},nextSlide:function(fromAutoRotation){this.options.disableWhileAnimating&&this.galleryAnimating||(this.prevIndex=this.currentIndex,this.currentIndex<this.stepsCount-1?(this.currentIndex++,this.switchSlide()):(this.options.circularRotation||!0===fromAutoRotation)&&(this.currentIndex=0,this.switchSlide()))},numSlide:function(c){this.currentIndex!=c&&(this.prevIndex=this.currentIndex,this.currentIndex=c,this.switchSlide())},switchSlide:function(){var self=this;this.slides.length>1&&(this.galleryAnimating=!0,this.options.animSpeed?this.slides.eq(this.prevIndex).stop().animate({opacity:0},{duration:this.options.animSpeed}):(this.slides.eq(this.prevIndex).css({opacity:0}),this.options.disableFadeIE&&!$.support.opacity&&this.slides.eq(this.prevIndex).css({visibility:"hidden"})),this.switchNext=function(){self.options.animSpeed?self.slides.eq(self.currentIndex).stop().animate({opacity:1},{duration:self.options.animSpeed}):(self.slides.eq(self.currentIndex).css({opacity:""}),this.options.disableFadeIE&&!$.support.opacity&&self.slides.eq(self.currentIndex).css({visibility:""})),clearTimeout(this.nextTimer),this.nextTimer=setTimeout(function(){self.slides.eq(self.currentIndex).css({opacity:""}),self.galleryAnimating=!1,self.autoRotate(),self.makeCallback("onChange",self)},self.options.animSpeed)},this.options.switchSimultaneously?self.switchNext():(clearTimeout(this.switchTimer),this.switchTimer=setTimeout(function(){self.switchNext()},this.options.animSpeed)),this.refreshState(),this.makeCallback("onBeforeChange",this))},refreshState:function(initial){this.slides.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.curNum.html(this.currentIndex+1),this.allNum.html(this.stepsCount),this.options.autoHeight&&(initial?this.slidesHolder.css({height:this.slides.eq(this.currentIndex).outerHeight(!0)}):this.slidesHolder.stop().animate({height:this.slides.eq(this.currentIndex).outerHeight(!0)},{duration:this.options.animSpeed})),this.options.circularRotation||(this.btnPrev.add(this.btnNext).removeClass(this.options.disabledClass),0===this.currentIndex&&this.btnPrev.addClass(this.options.disabledClass),this.currentIndex===this.stepsCount-1&&this.btnNext.addClass(this.options.disabledClass)),this.gallery.toggleClass("not-enough-slides",1===this.stepsCount)},startRotation:function(){this.options.autoRotation=!0,this.galleryHover=!1,this.autoRotationStopped=!1,this.resumeRotation()},stopRotation:function(){this.galleryHover=!0,this.autoRotationStopped=!0,this.pauseRotation()},pauseRotation:function(){this.gallery.addClass(this.options.autorotationDisabledClass),this.gallery.removeClass(this.options.autorotationActiveClass),clearTimeout(this.timer)},resumeRotation:function(){this.autoRotationStopped||(this.gallery.addClass(this.options.autorotationActiveClass),this.gallery.removeClass(this.options.autorotationDisabledClass),this.autoRotate())},autoRotate:function(){var self=this;clearTimeout(this.timer),!this.options.autoRotation||this.galleryHover||this.autoRotationStopped?this.pauseRotation():(this.gallery.addClass(this.options.autorotationActiveClass),this.timer=setTimeout(function(){self.nextSlide(!0)},this.options.switchTime))},makeCallback:function(name){if("function"==typeof this.options[name]){var args=Array.prototype.slice.call(arguments);args.shift(),this.options[name].apply(this,args)}},destroy:function(){this.btnPrev.unbind(this.options.event,this.btnPrevHandler),this.btnNext.unbind(this.options.event,this.btnNextHandler),this.pagerLinks.unbind(this.options.event,this.pagerLinksHandler),$(window).unbind("load resize orientationchange",this.resizeHandler),this.stopRotation(),this.btnPlay.unbind(this.options.event,this.btnPlayHandler),this.btnPause.unbind(this.options.event,this.btnPauseHandler),this.btnPlayPause.unbind(this.options.event,this.btnPlayPauseHandler),this.gallery.unbind("mouseenter",this.hoverHandler),this.gallery.unbind("mouseleave",this.leaveHandler),this.swipeHandler&&this.swipeHandler.destroy(),"string"==typeof this.options.generatePagination&&this.pagerHolder.empty();var unneededClasses=[this.options.galleryReadyClass,this.options.autorotationActiveClass,this.options.autorotationDisabledClass];this.gallery.removeClass(unneededClasses.join(" ")),this.slidesHolder.add(this.slides).removeAttr("style")}};var isTouchDevice=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.fn.fadeGallery=function(opt){return this.each(function(){$(this).data("FadeGallery",new FadeGallery($.extend(opt,{holder:this})))})}}(jQuery),jQuery(function(){var isTouchDevice="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,isWinPhoneDevice=/Windows Phone/.test(navigator.userAgent),styleTag=jQuery("<style>").appendTo("head");styleSheet=styleTag.prop("sheet")||styleTag.prop("styleSheet");isTouchDevice||isWinPhoneDevice?setTimeout(function(){var page=jQuery("body"),fancySideShadows=jQuery("#fancybox-bg-ne, #fancybox-bg-e, #fancybox-bg-se"),fancyOverlay=jQuery("#fancybox-overlay"),fancyWrap=jQuery("#fancybox-wrap");jQuery.fancybox.center=function(){fancyWrap.innerWidth()>fancyOverlay.innerWidth()?(fancyWrap.css({padding:0}),fancySideShadows.css({display:"none"})):(fancyWrap.css({padding:""}),fancySideShadows.css({display:""})),fancyWrap.css({left:(page.innerWidth()-fancyWrap.innerWidth())/2})},jQuery(window).on("resize orientationchange",function(){jQuery.fancybox.center()})},1):function(selector,rules,index){styleSheet.insertRule?styleSheet.insertRule(selector+"{"+rules+"}",index):styleSheet.addRule(selector,rules,index)}("#fancybox-overlay","position:fixed;top:0;left:0")}),function(){var cache={};this.tmpl=function tmpl(str,data){var fn=/\W/.test(str)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML);return data?fn(data):fn}}(),function(B){var L,T,Q,M,d,m,J,A,O,z,p,b,c,C=0,H={},j=[],e=0,G={},y=[],f=null,o=new Image,i=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,k=/[^\.]\.(swf)\s*$/i,N=1,h=0,t="",P=!1,s=B.extend(B("<div/>")[0],{prop:0}),S=/MSIE 6/.test(navigator.userAgent)&&B.browser.version<7&&!window.XMLHttpRequest,r=function(){T.hide(),o.onerror=o.onload=null,f&&f.abort(),L.empty()},x=function(){if(!1===H.onError(j,C,H))return T.hide(),void(P=!1);H.titleShow=!1,H.width="auto",H.height="auto",L.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),n()},w=function(){var W,Y,ab,aa,V,X,Z=j[C];if(r(),H=B.extend({},B.fn.fancybox.defaults,void 0===B(Z).data("fancybox")?H:B(Z).data("fancybox")),!1!==(X=H.onStart(j,C,H)))if("object"==typeof X&&(H=B.extend(H,X)),ab=H.title||(Z.nodeName?B(Z).attr("title"):Z.title)||"",Z.nodeName&&!H.orig&&(H.orig=B(Z).children("img:first").length?B(Z).children("img:first"):B(Z)),""===ab&&H.orig&&H.titleFromAlt&&(ab=H.orig.attr("alt")),W=H.href||(Z.nodeName?B(Z).data("href")?B(Z).data("href"):Z.href:null)||null,(/^(?:javascript)/i.test(W)||"#"==W)&&(W=null),H.type?(Y=H.type,W||(W=H.content)):H.content?Y="html":W&&(Y=W.match(i)?"image":W.match(k)?"swf":B(Z).hasClass("iframe")?"iframe":0===W.indexOf("#")?"inline":"ajax"),Y)switch("inline"==Y&&(Z=W.substr(W.indexOf("#")),Y=B(Z).length>0?"inline":"ajax"),H.type=Y,H.href=W,H.title=ab,H.autoDimensions&&("html"==H.type||"inline"==H.type||"ajax"==H.type?(H.width="auto",H.height="auto"):H.autoDimensions=!1),H.modal&&(H.overlayShow=!0,H.hideOnOverlayClick=!1,H.hideOnContentClick=!1,H.enableEscapeButton=!1,H.showCloseButton=!1),H.padding=parseInt(H.padding,10),H.margin=parseInt(H.margin,10),L.css("padding",H.padding+H.margin),B(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){}),Y){case"html":L.html(H.content),n();break;case"inline":if(!0===B(Z).parent().is("#fancybox-content"))return void(P=!1);B('<div class="fancybox-inline-tmp" />').hide().insertBefore(B(Z)).bind("fancybox-cleanup",function(){B(this).replaceWith(m.children())}).bind("fancybox-cancel",function(){B(this).replaceWith(L.children())}),B(Z).appendTo(L),n();break;case"image":P=!1,B.fancybox.showActivity(),(o=new Image).onerror=function(){x()},o.onload=function(){P=!0,o.onerror=o.onload=null,F()},o.src=W;break;case"swf":H.scrolling="no",aa='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+H.width+'" height="'+H.height+'"><param name="movie" value="'+W+'"></param>',V="",B.each(H.swf,function(ac,ad){aa+='<param name="'+ac+'" value="'+ad+'"></param>',V+=" "+ac+'="'+ad+'"'}),aa+='<embed src="'+W+'" type="application/x-shockwave-flash" width="'+H.width+'" height="'+H.height+'"'+V+"></embed></object>",L.html(aa),n();break;case"ajax":P=!1,B.fancybox.showActivity(),H.ajax.win=H.ajax.success,f=B.ajax(B.extend({},H.ajax,{url:W,data:H.ajax.data||{},dataType:"text",error:function(ac,ae,ad){ac.status>0&&x()},success:function(ad,af,ac){var ae="object"==typeof ac?ac:f;if(200==ae.status||0===ae.status){if("function"==typeof H.ajax.win){if(!1===(X=H.ajax.win(W,ad,af,ac)))return void T.hide();"string"!=typeof X&&"object"!=typeof X||(ad=X)}L.data("content")&&(ad=L.data("content"),L.data("content",!1)),L.html(ad),n()}}}));break;case"iframe":E()}else x();else P=!1},n=function(){var V=H.width,W=H.height;V=V.toString().indexOf("%")>-1?parseInt((B(window).width()-2*H.margin)*parseFloat(V)/100,10)+"px":"auto"==V?"auto":V+"px",W=W.toString().indexOf("%")>-1?parseInt((B(window).height()-2*H.margin)*parseFloat(W)/100,10)+"px":"auto"==W?"auto":W+"px",L.wrapInner('<div style="width:'+V+";height:"+W+";overflow: "+("auto"==H.scrolling?"auto":"yes"==H.scrolling?"scroll":"hidden")+';position:relative;"></div>'),H.width=L.width(),H.height=L.height(),E()},F=function(){H.width=o.width,H.height=o.height,B("<img />").attr({id:"fancybox-img",src:o.src,alt:H.title}).appendTo(L),E()},E=function(){var W,V;return T.hide(),M.is(":visible")&&!1===G.onCleanup(y,e,G)?(B(".fancybox-inline-tmp").trigger("fancybox-cancel"),void(P=!1)):(P=!0,B(m.add(Q)).unbind(),B(window).unbind("resize.fb scroll.fb"),B(document).unbind("keydown.fb"),M.is(":visible")&&"outside"!==G.titlePosition&&M.css("height",M.height()),y=j,e=C,(G=H).overlayShow?(Q.css({"background-color":G.overlayColor,opacity:G.overlayOpacity,cursor:G.hideOnOverlayClick?"pointer":"auto",height:B(document).height()}),Q.is(":visible")||(S&&B("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),Q.show())):Q.hide(),c=R(),l(),M.is(":visible")?(B(J.add(O).add(z)).hide(),W=M.position(),b={top:W.top,left:W.left,width:M.width(),height:M.height()},V=b.width==c.width&&b.height==c.height,void m.fadeTo(G.changeFade,.3,function(){var X=function(){m.html(L.contents()).fadeTo(G.changeFade,1,v)};B(".fancybox-inline-tmp").trigger("fancybox-change"),m.empty().removeAttr("filter").css({"border-width":G.padding,width:c.width-2*G.padding,height:H.autoDimensions?"auto":c.height-h-2*G.padding}),V?X():(s.prop=0,B(s).animate({prop:1},{duration:G.changeSpeed,easing:G.easingChange,step:U,complete:X}))})):(M.removeAttr("style"),m.css("border-width",G.padding),"elastic"==G.transitionIn?(b=I(),m.html(L.contents()),M.show(),G.opacity&&(c.opacity=0),s.prop=0,void B(s).animate({prop:1},{duration:G.speedIn,easing:G.easingIn,step:U,complete:v})):("inside"==G.titlePosition&&h>0&&A.show(),m.css({width:c.width-2*G.padding,height:H.autoDimensions?"auto":c.height-h-2*G.padding}).html(L.contents()),void M.css(c).fadeIn("none"==G.transitionIn?0:G.speedIn,v))))},D=function(V){return!(!V||!V.length)&&("float"==G.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+V+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+G.titlePosition+'">'+V+"</div>")},l=function(){if(t=G.title||"",h=0,A.empty().removeAttr("style").removeClass(),!1!==G.titleShow)if((t=B.isFunction(G.titleFormat)?G.titleFormat(t,y,e,G):D(t))&&""!==t){switch(A.addClass("fancybox-title-"+G.titlePosition).html(t).appendTo("body").show(),G.titlePosition){case"inside":A.css({width:c.width-2*G.padding,marginLeft:G.padding,marginRight:G.padding}),h=A.outerHeight(!0),A.appendTo(d),c.height+=h;break;case"over":A.css({marginLeft:G.padding,width:c.width-2*G.padding,bottom:G.padding}).appendTo(d);break;case"float":A.css("left",-1*parseInt((A.width()-c.width-40)/2,10)).appendTo(M);break;default:A.css({width:c.width-2*G.padding,paddingLeft:G.padding,paddingRight:G.padding}).appendTo(M)}A.hide()}else A.hide();else A.hide()},g=function(){if((G.enableEscapeButton||G.enableKeyboardNav)&&B(document).bind("keydown.fb",function(V){27==V.keyCode&&G.enableEscapeButton?(V.preventDefault(),B.fancybox.close()):37!=V.keyCode&&39!=V.keyCode||!G.enableKeyboardNav||"INPUT"===V.target.tagName||"TEXTAREA"===V.target.tagName||"SELECT"===V.target.tagName||(V.preventDefault(),B.fancybox[37==V.keyCode?"prev":"next"]())}),!G.showNavArrows)return O.hide(),void z.hide();(G.cyclic&&y.length>1||0!==e)&&O.show(),(G.cyclic&&y.length>1||e!=y.length-1)&&z.show()},v=function(){!1===B.support.opacity&&(m.get(0).style.removeAttribute("filter"),M.get(0).style.removeAttribute("filter")),H.autoDimensions&&m.css("height","auto"),M.css("height","auto"),t&&t.length&&A.show(),G.showCloseButton&&J.show(),g(),G.hideOnContentClick&&m.bind("click",B.fancybox.close),G.hideOnOverlayClick&&Q.bind("click",B.fancybox.close),B(window).bind("resize.fb",B.fancybox.resize),G.centerOnScroll&&B(window).bind("scroll.fb",B.fancybox.center),"iframe"==G.type&&B('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(window.attachEvent?'allowtransparency="true""':"")+' scrolling="'+H.scrolling+'" src="'+G.href+'"></iframe>').appendTo(m),M.show(),P=!1,B.fancybox.center(),G.onComplete(y,e,G),K()},K=function(){var V;y.length-1>e&&void 0!==(V=y[e+1].href)&&V.match(i)&&((new Image).src=V),e>0&&void 0!==(V=y[e-1].href)&&V.match(i)&&((new Image).src=V)},U=function(W){var V={width:parseInt(b.width+(c.width-b.width)*W,10),height:parseInt(b.height+(c.height-b.height)*W,10),top:parseInt(b.top+(c.top-b.top)*W,10),left:parseInt(b.left+(c.left-b.left)*W,10)};"undefined"!=typeof c.opacity&&(V.opacity=W<.5?.5:W),M.css(V),m.css({width:V.width-2*G.padding,height:V.height-h*W-2*G.padding})},u=function(){return[B(window).width()-2*G.margin,B(window).height()-2*G.margin,B(document).scrollLeft()+G.margin,B(document).scrollTop()+G.margin]},R=function(){var Y,V=u(),Z={},W=G.autoScale,X=2*G.padding;return G.width.toString().indexOf("%")>-1?Z.width=parseInt(V[0]*parseFloat(G.width)/100,10):Z.width=G.width+X,G.height.toString().indexOf("%")>-1?Z.height=parseInt(V[1]*parseFloat(G.height)/100,10):Z.height=G.height+X,W&&(Z.width>V[0]||Z.height>V[1])&&("image"==H.type||"swf"==H.type?(Y=G.width/G.height,Z.width>V[0]&&(Z.width=V[0],Z.height=parseInt((Z.width-X)/Y+X,10)),Z.height>V[1]&&(Z.height=V[1],Z.width=parseInt((Z.height-X)*Y+X,10))):(Z.width=Math.min(Z.width,V[0]),Z.height=Math.min(Z.height,V[1]))),Z.top=parseInt(Math.max(V[3]-20,V[3]+.5*(V[1]-Z.height-40)),10),Z.left=parseInt(Math.max(V[2]-20,V[2]+.5*(V[0]-Z.width-40)),10),Z},q=function(V){var W=V.offset();return W.top+=parseInt(V.css("paddingTop"),10)||0,W.left+=parseInt(V.css("paddingLeft"),10)||0,W.top+=parseInt(V.css("border-top-width"),10)||0,W.left+=parseInt(V.css("border-left-width"),10)||0,W.width=V.width(),W.height=V.height(),W},I=function(){var W,V,Y=!!H.orig&&B(H.orig),X={};return Y&&Y.length?X={width:(W=q(Y)).width+2*G.padding,height:W.height+2*G.padding,top:W.top-G.padding-20,left:W.left-G.padding-20}:(V=u(),X={width:2*G.padding,height:2*G.padding,top:parseInt(V[3]+.5*V[1],10),left:parseInt(V[2]+.5*V[0],10)}),X},a=function(){T.is(":visible")?(B("div",T).css("top",-40*N+"px"),N=(N+1)%12):clearInterval(p)};B.fn.fancybox=function(V){return B(this).length?(B(this).data("fancybox",B.extend({},V,B.metadata?B(this).metadata():{})).unbind("click.fb").bind("click.fb",function(X){if(X.preventDefault(),!P){P=!0,B(this).blur(),j=[],C=0;var W=B(this).attr("rel")||"";W&&""!=W&&"nofollow"!==W?(j=B('a[rel="'+W+'"], area[rel="'+W+'"]'),C=j.index(this)):j.push(this),w()}}),this):this},B.fancybox=function(Y){var X;if(!P){if(P=!0,X="undefined"!=typeof arguments[1]?arguments[1]:{},j=[],C=parseInt(X.index,10)||0,B.isArray(Y)){for(var W=0,V=Y.length;W<V;W++)"object"==typeof Y[W]?B(Y[W]).data("fancybox",B.extend({},X,Y[W])):Y[W]=B({}).data("fancybox",B.extend({content:Y[W]},X));j=jQuery.merge(j,Y)}else"object"==typeof Y?B(Y).data("fancybox",B.extend({},X,Y)):Y=B({}).data("fancybox",B.extend({content:Y},X)),j.push(Y);(C>j.length||C<0)&&(C=0),w()}},B.fancybox.showActivity=function(){clearInterval(p),T.show(),p=setInterval(a,66)},B.fancybox.hideActivity=function(){T.hide()},B.fancybox.next=function(){return B.fancybox.pos(e+1)},B.fancybox.prev=function(){return B.fancybox.pos(e-1)},B.fancybox.pos=function(V){P||(V=parseInt(V),j=y,V>-1&&V<y.length?(C=V,w()):G.cyclic&&y.length>1&&(C=V>=y.length?0:y.length-1,w()))},B.fancybox.cancel=function(){P||(P=!0,B(".fancybox-inline-tmp").trigger("fancybox-cancel"),r(),H.onCancel(j,C,H),P=!1)},B.fancybox.close=function(){function V(){Q.fadeOut("fast"),A.empty().hide(),M.hide(),B(".fancybox-inline-tmp").trigger("fancybox-cleanup"),m.empty(),G.onClosed(y,e,G),y=H=[],e=C=0,G=H={},P=!1}if(!P&&!M.is(":hidden"))if(P=!0,G&&!1===G.onCleanup(y,e,G))P=!1;else if(r(),B(J.add(O).add(z)).hide(),B(m.add(Q)).unbind(),B(window).unbind("resize.fb scroll.fb"),B(document).unbind("keydown.fb"),"iframe"===G.type&&m.find("iframe").attr("src",S&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==G.titlePosition&&A.empty(),M.stop(),"elastic"==G.transitionOut){b=I();var W=M.position();c={top:W.top,left:W.left,width:M.width(),height:M.height()},G.opacity&&(c.opacity=1),A.empty().hide(),s.prop=1,B(s).animate({prop:0},{duration:G.speedOut,easing:G.easingOut,step:U,complete:V})}else M.fadeOut("none"==G.transitionOut?0:G.speedOut,V)},B.fancybox.resize=function(){Q.is(":visible")&&Q.css("height",B(document).height()),B.fancybox.center(!0)},B.fancybox.center=function(){var V,W;P||(W=!0===arguments[0]?1:0,V=u(),!W&&(M.width()>V[0]||M.height()>V[1])||M.stop().animate({top:parseInt(Math.max(V[3]-20,V[3]+.5*(V[1]-m.height()-40)-G.padding)),left:parseInt(Math.max(V[2]-20,V[2]+.5*(V[0]-m.width()-40)-G.padding))},"number"==typeof arguments[0]?arguments[0]:200))},B.fancybox.init=function(){B("#fancybox-wrap").length||(B("body").append(L=B('<div id="fancybox-tmp"></div>'),T=B('<div id="fancybox-loading"><div></div></div>'),Q=B('<div id="fancybox-overlay"></div>'),M=B('<div id="fancybox-wrap"></div>')),(d=B('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(M)).append(m=B('<div id="fancybox-content"></div>'),J=B('<a id="fancybox-close"></a>'),A=B('<div id="fancybox-title"></div>'),O=B('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),z=B('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),J.click(B.fancybox.close),T.click(B.fancybox.cancel),O.click(function(V){V.preventDefault(),B.fancybox.prev()}),z.click(function(V){V.preventDefault(),B.fancybox.next()}),B.fn.mousewheel&&M.bind("mousewheel.fb",function(V,W){P?V.preventDefault():0!=B(V.target).get(0).clientHeight&&B(V.target).get(0).scrollHeight!==B(V.target).get(0).clientHeight||(V.preventDefault(),B.fancybox[W>0?"prev":"next"]())}),!1===B.support.opacity&&M.addClass("fancybox-ie"),S&&(T.addClass("fancybox-ie6"),M.addClass("fancybox-ie6"),B('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(d)))},B.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},B(document).ready(function(){B.fancybox.init()})}(jQuery),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function n(e,i){t.fn[e]=function(n){if("string"==typeof n){for(var s=o.call(arguments,1),a=0,u=this.length;u>a;a++){var p=this[a],h=t.data(p,e);if(h)if(t.isFunction(h[n])&&"_"!==n.charAt(0)){var f=h[n].apply(h,s);if(void 0!==f)return f}else r("no such method '"+n+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+n+"'")}return this}return this.each(function(){var o=t.data(this,e);o?(o.option(n),o._init()):(o=new i(this,n),t.data(this,e,o))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),n(t,e)},t.bridget}}var o=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,o=function(){};i.addEventListener?o=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(o=function(t,i,o){t[i+o]=o.handleEvent?function(){var i=e(t);o.handleEvent.call(o,i)}:function(){var i=e(t);o.call(t,i)},t.attachEvent("on"+i,t[i+o])});var n=function(){};i.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(o){t[e+i]=void 0}});var r={bind:o,unbind:n};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var o=t.prototype,n=this,r=n.EventEmitter;o.getListeners=function(t){var e,i,o=this._getEvents();if(t instanceof RegExp){e={};for(i in o)o.hasOwnProperty(i)&&t.test(i)&&(e[i]=o[i])}else e=o[t]||(o[t]=[]);return e},o.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},o.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},o.addListener=function(t,i){var o,n=this.getListenersAsObject(t),r="object"==typeof i;for(o in n)n.hasOwnProperty(o)&&-1===e(n[o],i)&&n[o].push(r?i:{listener:i,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,i){var o,n,r=this.getListenersAsObject(t);for(n in r)r.hasOwnProperty(n)&&-1!==(o=e(r[n],i))&&r[n].splice(o,1);return this},o.off=i("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,i){var o,n,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(o=i.length;o--;)r.call(this,e,i[o]);else for(o in e)e.hasOwnProperty(o)&&(n=e[o])&&("function"==typeof n?r.call(this,o,n):s.call(this,o,n));return this},o.removeEvent=function(t){var e,i=typeof t,o=this._getEvents();if("string"===i)delete o[t];else if(t instanceof RegExp)for(e in o)o.hasOwnProperty(e)&&t.test(e)&&delete o[e];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(t,e){var i,o,n,s=this.getListenersAsObject(t);for(n in s)if(s.hasOwnProperty(n))for(o=s[n].length;o--;)!0===(i=s[n][o]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},o.trigger=i("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return n.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof o[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,n=0,r=i.length;r>n;n++)if(e=i[n]+t,"string"==typeof o[e])return e}}var i="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function o(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++)t[s[e]]=0;return t}function n(i){function n(){if(!d){d=!0;var o=t.getComputedStyle;if(p=function(){var t=o?function(t){return o(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),h=i("boxSizing")){var n=document.createElement("div");n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style[h]="border-box";var s=document.body||document.documentElement;s.appendChild(n);var a=p(n);f=200===e(a.width),s.removeChild(n)}}}function u(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var o=e.style,n=o.left,r=e.runtimeStyle,s=r&&r.left;return s&&(r.left=e.currentStyle.left),o.left=i,i=o.pixelLeft,o.left=n,s&&(r.left=s),i}var p,h,f,d=!1;return function(t){if(n(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=p(t);if("none"===i.display)return o();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var a=r.isBorderBox=!(!h||!i[h]||"border-box"!==i[h]),d=0,l=s.length;l>d;d++){var c=s[d],m=i[c];m=u(t,m);var y=parseFloat(m);r[c]=isNaN(y)?0:y}var g=r.paddingLeft+r.paddingRight,v=r.paddingTop+r.paddingBottom,_=r.marginLeft+r.marginRight,I=r.marginTop+r.marginBottom,z=r.borderLeftWidth+r.borderRightWidth,L=r.borderTopWidth+r.borderBottomWidth,x=a&&f,E=e(i.width);!1!==E&&(r.width=E+(x?0:g+z));var b=e(i.height);return!1!==b&&(r.height=b+(x?0:v+L)),r.innerWidth=r.width-(g+z),r.innerHeight=r.height-(v+L),r.outerWidth=r.width+_,r.outerHeight=r.height+I,r}}}var r="undefined"==typeof console?function(){}:function(t){console.error(t)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("desandro-get-style-property")):t.getSize=n(t.getStyleProperty)}(window),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||o()}function o(){e.isReady=!0;for(var t=0,i=s.length;i>t;t++)(0,s[t])()}function n(n){return"complete"===r.readyState?o():(n.bind(r,"DOMContentLoaded",i),n.bind(r,"readystatechange",i),n.bind(t,"load",i)),e}var r=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],n):"object"==typeof exports?module.exports=n(require("eventie")):t.docReady=n(t.eventie)}(window),function(t){function e(t,e){return t[s](e)}function i(t){t.parentNode||document.createDocumentFragment().appendChild(t)}var r,s=function(){if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,o=e.length;o>i;i++){var r=e[i]+"MatchesSelector";if(t[r])return r}}();if(s){var u=e(document.createElement("div"),"div");r=u?e:function(t,o){return i(t),e(t,o)}}else r=function(t,e){i(t);for(var o=t.parentNode.querySelectorAll(e),n=0,r=o.length;r>n;n++)if(o[n]===t)return!0;return!1};"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):"object"==typeof exports?module.exports=r:window.matchesSelector=r}(Element.prototype),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(i,o){return e(t,i,o)}):"object"==typeof exports?module.exports=e(t,require("doc-ready"),require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.docReady,t.matchesSelector)}(window,function(t,e,i){var o={};o.extend=function(t,e){for(var i in e)t[i]=e[i];return t},o.modulo=function(t,e){return(t%e+e)%e};var n=Object.prototype.toString;o.isArray=function(t){return"[object Array]"==n.call(t)},o.makeArray=function(t){var e=[];if(o.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e},o.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,o=t.length;o>i;i++)if(t[i]===e)return i;return-1},o.removeFrom=function(t,e){var i=o.indexOf(t,e);-1!=i&&t.splice(i,1)},o.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1==t.nodeType&&"string"==typeof t.nodeName},o.setText=function(){var e;return function(t,i){t[e=e||(void 0!==document.documentElement.textContent?"textContent":"innerText")]=i}}(),o.getParent=function(t,e){for(;t!=document.body;)if(t=t.parentNode,i(t,e))return t},o.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},o.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.filterFindElements=function(t,e){for(var n=[],r=0,s=(t=o.makeArray(t)).length;s>r;r++){var a=t[r];if(o.isElement(a))if(e){i(a,e)&&n.push(a);for(var u=a.querySelectorAll(e),p=0,h=u.length;h>p;p++)n.push(u[p])}else n.push(a)}return n},o.debounceMethod=function(t,e,i){var o=t.prototype[e],n=e+"Timeout";t.prototype[e]=function(){var t=this[n];t&&clearTimeout(t);var e=arguments,r=this;this[n]=setTimeout(function(){o.apply(r,e),delete r[n]},i||100)}},o.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var r=t.console;return o.htmlInit=function(i,n){e(function(){for(var e=o.toDashed(n),s=document.querySelectorAll(".js-"+e),a="data-"+e+"-options",u=0,p=s.length;p>u;u++){var h,f=s[u],d=f.getAttribute(a);try{h=d&&JSON.parse(d)}catch(l){r&&r.error("Error parsing "+a+" on "+f.nodeName.toLowerCase()+(f.id?"#"+f.id:"")+": "+l);continue}var c=new i(f,h),m=t.jQuery;m&&m.data(f,n,c)}})},o}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(i,o,n,r){return e(t,i,o,n,r)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(t.Outlayer={},t.Outlayer.Item=e(t,t.EventEmitter,t.getSize,t.getStyleProperty,t.fizzyUIUtils))}(window,function(t,e,i,o,n){function r(t){for(var e in t)return!1;return null,!0}function s(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var a=t.getComputedStyle,u=a?function(t){return a(t,null)}:function(t){return t.currentStyle},p=o("transition"),h=o("transform"),f=p&&h,d=!!o("perspective"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[p],c=["transform","transition","transitionDuration","transitionProperty"],m=function(){for(var t={},e=0,i=c.length;i>e;e++){var n=c[e],r=o(n);r&&r!==n&&(t[n]=r)}return t}();n.extend(s.prototype,e.prototype),s.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.getSize=function(){this.size=i(this.element)},s.prototype.css=function(t){var e=this.element.style;for(var i in t)e[m[i]||i]=t[i]},s.prototype.getPosition=function(){var t=u(this.element),e=this.layout.options,i=e.isOriginLeft,o=e.isOriginTop,n=parseInt(t[i?"left":"right"],10),r=parseInt(t[o?"top":"bottom"],10);n=isNaN(n)?0:n,r=isNaN(r)?0:r;var s=this.layout.size;n-=i?s.paddingLeft:s.paddingRight,r-=o?s.paddingTop:s.paddingBottom,this.position.x=n,this.position.y=r},s.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={},o=e.isOriginLeft?"paddingLeft":"paddingRight",n=e.isOriginLeft?"left":"right",r=e.isOriginLeft?"right":"left",s=this.position.x+t[o];s=e.percentPosition&&!e.isHorizontal?s/t.width*100+"%":s+"px",i[n]=s,i[r]="";var a=e.isOriginTop?"paddingTop":"paddingBottom",u=e.isOriginTop?"top":"bottom",p=e.isOriginTop?"bottom":"top",h=this.position.y+t[a];h=e.percentPosition&&e.isHorizontal?h/t.height*100+"%":h+"px",i[u]=h,i[p]="",this.css(i),this.emitEvent("layout",[this])};var y=d?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};s.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=parseInt(t,10),r=parseInt(e,10),s=n===this.position.x&&r===this.position.y;if(this.setPosition(t,e),!s||this.isTransitioning){var a=t-i,u=e-o,p={},h=this.layout.options;a=h.isOriginLeft?a:-a,u=h.isOriginTop?u:-u,p.transform=y(a,u),this.transition({to:p,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},s.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},s.prototype.moveTo=f?s.prototype._transitionTo:s.prototype.goTo,s.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},s.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},s.prototype._transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var g=h&&n.toDashed(h)+",opacity";s.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(l,this,!1))},s.prototype.transition=s.prototype[p?"_transition":"_nonTransition"],s.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},s.prototype.onotransitionend=function(t){this.ontransitionend(t)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};s.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=v[t.propertyName]||t.propertyName;delete e.ingProperties[i],r(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this])}},s.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},s.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var _={transitionProperty:"",transitionDuration:""};return s.prototype.removeTransitionStyles=function(){this.css(_)},s.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},s.prototype.remove=function(){if(p&&parseFloat(this.layout.options.transitionDuration)){var t=this;this.once("transitionEnd",function(){t.removeElem()}),this.hide()}else this.removeElem()},s.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},s.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},s.prototype.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},s.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},s.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},s.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,o,n,r,s){return e(t,i,o,n,r,s)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.eventie,t.EventEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,o,n,r){function s(t,e){var i=n.getQueryElement(t);if(i){this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++h;this.element.outlayerGUID=o,f[o]=this,this._create(),this.options.isInitLayout&&this.layout()}else a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||t))}var a=t.console,u=t.jQuery,p=function(){},h=0,f={};return s.namespace="outlayer",s.Item=r,s.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},n.extend(s.prototype,i.prototype),s.prototype.option=function(t){n.extend(this.options,t)},s.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},s.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},s.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0,r=e.length;r>n;n++){var a=new i(e[n],this);o.push(a)}return o},s.prototype._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},s.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},s.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},s.prototype._init=s.prototype.layout,s.prototype._resetLayout=function(){this.getSize()},s.prototype.getSize=function(){this.size=o(this.element)},s.prototype._getMeasurement=function(t,e){var i,r=this.options[t];r?("string"==typeof r?i=this.element.querySelector(r):n.isElement(r)&&(i=r),this[t]=i?o(i)[e]:r):this[t]=0},s.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},s.prototype._getItemsForLayout=function(t){for(var e=[],i=0,o=t.length;o>i;i++){var n=t[i];n.isIgnored||e.push(n)}return e},s.prototype._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){for(var i=[],o=0,n=t.length;n>o;o++){var r=t[o],s=this._getItemLayoutPosition(r);s.item=r,s.isInstant=e||r.isLayoutInstant,i.push(s)}this._processLayoutQueue(i)}},s.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},s.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];this._positionItem(o.item,o.x,o.y,o.isInstant)}},s.prototype._positionItem=function(t,e,i,o){o?t.goTo(e,i):t.moveTo(e,i)},s.prototype._postLayout=function(){this.resizeContainer()},s.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},s.prototype._getContainerSize=p,s.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},s.prototype._emitCompleteOnItems=function(t,e){function i(){n.emitEvent(t+"Complete",[e])}var n=this,r=e.length;if(e&&r)for(var s=0,a=0,u=e.length;u>a;a++)e[a].once(t,function(){++s===r&&i()});else i()},s.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},s.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},s.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var o=t[e];this.ignore(o)}}},s.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var o=t[e];n.removeFrom(this.stamps,o),this.unignore(o)}},s.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},s.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},s.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},s.prototype._manageStamp=p,s.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=o(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.bindResize=function(){this.isResizeBound||(e.bind(t,"resize",this),this.isResizeBound=!0)},s.prototype.unbindResize=function(){this.isResizeBound&&e.unbind(t,"resize",this),this.isResizeBound=!1},s.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(function(){e.resize(),delete e.resizeTimeout},100)},s.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},s.prototype.needsResizeLayout=function(){var t=o(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},s.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},s.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},s.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},s.prototype.reveal=function(t){this._emitCompleteOnItems("reveal",t);for(var e=t&&t.length,i=0;e&&e>i;i++)t[i].reveal()},s.prototype.hide=function(t){this._emitCompleteOnItems("hide",t);for(var e=t&&t.length,i=0;e&&e>i;i++)t[i].hide()},s.prototype.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},s.prototype.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},s.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var o=this.items[e];if(o.element===t)return o}},s.prototype.getItems=function(t){for(var e=[],i=0,o=(t=n.makeArray(t)).length;o>i;i++){var r=t[i],s=this.getItem(r);s&&e.push(s)}return e},s.prototype.remove=function(t){var e=this.getItems(t);if(this._emitCompleteOnItems("remove",e),e&&e.length)for(var i=0,o=e.length;o>i;i++){var r=e[i];r.remove(),n.removeFrom(this.items,r)}},s.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++)this.items[e].destroy();this.unbindResize();var n=this.element.outlayerGUID;delete f[n],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},s.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){function i(){s.apply(this,arguments)}return Object.create?i.prototype=Object.create(s.prototype):n.extend(i.prototype,s.prototype),i.prototype.constructor=i,i.defaults=n.extend({},s.defaults),n.extend(i.defaults,e),i.prototype.settings={},i.namespace=t,i.data=s.data,i.Item=function(){r.apply(this,arguments)},i.Item.prototype=new r,n.htmlInit(i,t),u&&u.bridget&&u.bridget(t,i),i},s.Item=r,s}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){function e(){t.Item.apply(this,arguments)}(e.prototype=new t.Item)._create=function(){this.id=this.layout.itemGUID++,t.Item.prototype._create.call(this),this.sortData={}},e.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var o=e[i];this.sortData[i]=o(this.element,this)}}};var i=e.prototype.destroy;return e.prototype.destroy=function(){i.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(t,e){function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}return function(){for(var o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],n=0,r=o.length;r>n;n++){var s=o[n];i.prototype[s]=function(t){return function(){return e.prototype[t].apply(this.isotope,arguments)}}(s)}}(),i.prototype.needsVerticalResizeLayout=function(){var e=t(this.isotope.element);return this.isotope.size&&e&&e.innerHeight!=this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;if(this._getMeasurement(i,o),!this[i]){var n=this.getFirstItemSize();this[i]=n&&n[o]||this.isotope.size["inner"+e]}},i.prototype.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function o(){i.apply(this,arguments)}return o.prototype=new i,e&&(o.options=e),o.prototype.namespace=t,i.modes[t]=o,o},i}),function(t,e){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):t.Masonry=e(t.Outlayer,t.getSize,t.fizzyUIUtils)}(window,function(t,e,i){var o=t.create("masonry");return o.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},o.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var o=this.columnWidth+=this.gutter,n=this.containerWidth+this.gutter,r=n/o,s=o-n%o,a=s&&1>s?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},o.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},o.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,o=e&&1>e?"round":"ceil",n=Math[o](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this._getColGroup(n),s=Math.min.apply(Math,r),a=i.indexOf(r,s),u={x:this.columnWidth*a,y:s},p=s+t.size.outerHeight,h=this.cols+1-r.length,f=0;h>f;f++)this.colYs[a+f]=p;return u},o.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;i>o;o++){var n=this.colYs.slice(o,o+t);e[o]=Math.max.apply(Math,n)}return e},o.prototype._manageStamp=function(t){var i=e(t),o=this._getElementOffset(t),n=this.options.isOriginLeft?o.left:o.right,r=n+i.outerWidth,s=Math.floor(n/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this.options.isOriginTop?o.top:o.bottom)+i.outerHeight,p=s;a>=p;p++)this.colYs[p]=Math.max(u,this.colYs[p])},o.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},o.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},o.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},o}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],e):"object"==typeof exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){var o=t.create("masonry"),n=o.prototype._getElementOffset,r=o.prototype.layout,s=o.prototype._getMeasurement;(function(t,e){for(var i in e)t[i]=e[i]})(o.prototype,e.prototype),o.prototype._getElementOffset=n,o.prototype.layout=r,o.prototype._getMeasurement=s;var a=o.prototype.measureColumns;o.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,a.call(this)};var u=o.prototype._manageStamp;return o.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,u.apply(this,arguments)},o}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){var e=t.create("fitRows");return e.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var o={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,o},e.prototype._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){var e=t.create("vertical",{horizontalAlignment:0});return e.prototype._resetLayout=function(){this.y=0},e.prototype._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},e.prototype._getContainerSize=function(){return{height:this.y}},e}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(i,o,n,r,s,a){return e(t,i,o,n,r,s,a)}):"object"==typeof exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,function(t,e,i,o,n,r,s){function a(t,e){return function(i,o){for(var n=0,r=t.length;r>n;n++){var s=t[n],a=i.sortData[s],u=o.sortData[s];if(a>u||u>a){var h=(void 0!==e[s]?e[s]:e)?1:-1;return(a>u?1:-1)*h}}return 0}}var u=t.jQuery,p=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},f=document.documentElement.textContent?function(t){return t.textContent}:function(t){return t.innerText},d=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=r,d.LayoutMode=s,d.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in s.modes)this._initLayoutMode(t)},d.prototype.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},d.prototype._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0,o=t.length;o>i;i++)t[i].id=this.itemGUID++;return this._updateItemsSortData(t),t},d.prototype._initLayoutMode=function(t){var e=s.modes[t],i=this.options[t]||{};this.options[t]=e.options?n.extend(e.options,i):i,this.modes[t]=new e(this)},d.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},d.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},d.prototype.arrange=function(t){function e(){o.reveal(i.needReveal),o.hide(i.needHide)}this.option(t),this._getIsInstant();var i=this._filter(this.items);this.filteredItems=i.matches;var o=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(e):e(),this._sort(),this._layout()},d.prototype._init=d.prototype.arrange,d.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},d.prototype._bindArrangeComplete=function(){function t(){e&&i&&o&&n.emitEvent("arrangeComplete",[n.filteredItems])}var e,i,o,n=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){o=!0,t()})},d.prototype._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],o=[],n=[],r=this._getFilterTest(e),s=0,a=t.length;a>s;s++){var u=t[s];if(!u.isIgnored){var p=r(u);p&&i.push(u),p&&u.isHidden?o.push(u):p||u.isHidden||n.push(u)}}return{matches:i,needReveal:o,needHide:n}},d.prototype._getFilterTest=function(t){return u&&this.options.isJQueryFiltering?function(e){return u(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return o(e.element,t)}},d.prototype.updateSortData=function(t){var e;t?(t=n.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},d.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=l(i)}},d.prototype._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&e>i;i++)t[i].updateSortData()};var l=function(){function e(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&f(i)}}return function(t){if("string"!=typeof t)return t;var i=p(t).split(" "),o=i[0],n=o.match(/^\[(.+)\]$/),s=e(n&&n[1],o),a=d.sortDataParsers[i[1]];return t=a?function(t){return t&&a(s(t))}:function(t){return t&&s(t)}}}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},d.prototype._sort=function(){var t=this.options.sortBy;if(t){var i=a([].concat.apply(t,this.sortHistory),this.options.sortAscending);this.filteredItems.sort(i),t!=this.sortHistory[0]&&this.sortHistory.unshift(t)}},d.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw Error("No layout mode: "+t);return e.options=this.options[t],e},d.prototype._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},d.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},d.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},d.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},d.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},d.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},d.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},d.prototype._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},d.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var i,o,n=e.length;for(i=0;n>i;i++)o=e[i],this.element.appendChild(o.element);var r=this._filter(e).matches;for(i=0;n>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;n>i;i++)delete e[i].isLayoutInstant;this.reveal(r)}};var c=d.prototype.remove;return d.prototype.remove=function(t){t=n.makeArray(t);var e=this.getItems(t);c.call(this,t);var i=e&&e.length;if(i)for(var o=0;i>o;o++){var r=e[o];n.removeFrom(this.filteredItems,r)}},d.prototype.shuffle=function(){for(var t=0,e=this.items.length;e>t;t++)this.items[t].sortData.random=Math.random();this.options.sortBy="random",this._sort(),this._layout()},d.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var i=t.call(this);return this.options.transitionDuration=e,i},d.prototype.getFilteredItemElements=function(){for(var t=[],e=0,i=this.filteredItems.length;i>e;e++)t.push(this.filteredItems[e].element);return t},d}),function(a){function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){(d(a,b)?f:e)(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define("classie/classie",g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a){function b(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}return c.Rect=a,a.defaults={x:0,y:0,width:0,height:0},a.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},a.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},a.prototype.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<b.y&&(c=new a({x:this.x,y:this.y,width:this.width,height:b.y-this.y}),d.push(c)),e>g&&(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<b.x&&(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},a.prototype.canFit=function(a){return this.width>=a.width&&this.height>=a.height},a}var c=a.Packery=function(){};"function"==typeof define&&define.amd?define("packery/js/rect",b):"object"==typeof exports?module.exports=b():(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window),function(a){function b(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=c[this.sortDirection]||c.downwardLeftToRight},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c>b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var b=[],c=0,d=this.spaces.length;d>c;c++){var e=this.spaces[c],f=e.getMaximalFreeRects(a);f?b.push.apply(b,f):b.push(e)}this.spaces=b,this.mergeSortSpaces()},b.prototype.mergeSortSpaces=function(){b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},b.prototype.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},b.mergeRects=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g],j=b>g?0:1;d.contains(i)&&(a.splice(g+j-f,1),f++)}}}return a};var c={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else if("object"==typeof exports)module.exports=b(require("./rect"));else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window),function(a){function b(a,b,c){var d=a("transform"),e=function(){b.Item.apply(this,arguments)},f=(e.prototype=new b.Item)._create;return e.prototype._create=function(){f.call(this),this.rect=new c,this.placeRect=new c},e.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&d&&(this.element.style[d]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},e.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.layout.size;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},e.prototype.dragStop=function(){this.getPosition();var a=this.position.x!==this.placeRect.x,b=this.position.y!==this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},e.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},e.prototype.getPlaceRectCoord=function(a,b,c){var d=b?"Width":"Height",e=this.size["outer"+d],f=this.layout[b?"columnWidth":"rowHeight"],g=this.layout.size["inner"+d];b||(g=Math.max(g,this.layout.maxY),this.layout.rowHeight||(g-=this.layout.gutter));var h;if(f){f+=this.layout.gutter,g+=b?this.layout.gutter:0,a=Math.round(a/f);var i;i=this.layout.options.isHorizontal?b?"ceil":"floor":b?"floor":"ceil";var j=Math[i](g/f);h=j-=Math.ceil(e/f)}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},e.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},e.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},e}"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],b):"object"==typeof exports?module.exports=b(require("desandro-get-style-property"),require("outlayer"),require("./rect")):a.Packery.Item=b(a.getStyleProperty,a.Outlayer,a.Packery.Rect)}(window),function(a){function b(a,b,c,d,e,f){function g(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function h(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}d.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var i=c.create("packery");return i.Item=f,i.prototype._create=function(){c.prototype._create.call(this),this.packer=new e,this.stamp(this.options.stamped);var a=this;this.handleDraggabilly={dragStart:function(b){a.itemDragStart(b.element)},dragMove:function(b){a.itemDragMove(b.element,b.position.x,b.position.y)},dragEnd:function(b){a.itemDragEnd(b.element)}},this.handleUIDraggable={start:function(b){a.itemDragStart(b.currentTarget)},drag:function(b,c){a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b){a.itemDragEnd(b.currentTarget)}}},i.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var a=this.packer;this.options.isHorizontal?(a.width=Number.POSITIVE_INFINITY,a.height=this.size.innerHeight+this.gutter,a.sortDirection="rightwardTopToBottom"):(a.width=this.size.innerWidth+this.gutter,a.height=Number.POSITIVE_INFINITY,a.sortDirection="downwardLeftToRight"),a.reset(),this.maxY=0,this.maxX=0},i.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},i.prototype._getItemLayoutPosition=function(a){return this._packItem(a),a.rect},i.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxXY(a.rect)},i.prototype._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},i.prototype._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight;(e||f)&&(e=this._applyGridGutter(e,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},i.prototype._applyGridGutter=function(a,b){if(!b)return a+this.gutter;var c=a%(b+=this.gutter),d=c&&1>c?"round":"ceil";return a=Math[d](a/b)*b},i.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i.prototype._manageStamp=function(a){var b,c=this.getItem(a);if(c&&c.isPlacing)b=c.placeRect;else{var e=this._getElementOffset(a);b=new d({x:this.options.isOriginLeft?e.left:e.right,y:this.options.isOriginTop?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},i.prototype.sortItemsByPosition=function(){var a=this.options.isHorizontal?h:g;this.items.sort(a)},i.prototype.fit=function(a,b,c){var d=this.getItem(a);d&&(this._getMeasurements(),this.stamp(d.element),d.getSize(),d.isPlacing=!0,b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,d.positionPlaceRect(b,c,!0),this._bindFitEvents(d),d.moveTo(d.placeRect.x,d.placeRect.y),this.layout(),this.unstamp(d.element),this.sortItemsByPosition(),d.isPlacing=!1,d.copyPlaceRectPosition())},i.prototype._bindFitEvents=function(a){function b(){2==++d&&c.emitEvent("fitComplete",[c,a])}var c=this,d=0;a.on("layout",function(){return b(),!0}),this.on("layoutComplete",function(){return b(),!0})},i.prototype.resize=function(){var a=b(this.element),c=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";c&&a[d]===this.size[d]||this.layout()},i.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&&b.dragStart()},i.prototype.itemDragMove=function(a,b,c){var e=this.getItem(a);e&&e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(function(){f.layout(),delete f.dragTimeout},40)},i.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},i.prototype.itemDragEnd=function(b){var c,d=this.getItem(b);if(d&&(c=d.didDrag,d.dragStop()),d&&(c||d.needsPositioning)){a.add(d.element,"is-positioning-post-drag");var e=this._getDragEndLayoutComplete(b,d);d.needsPositioning?(d.on("layout",e),d.moveTo(d.placeRect.x,d.placeRect.y)):d&&d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",e),this.layout()}else this.unstamp(b)},i.prototype._getDragEndLayoutComplete=function(b,c){var d=c&&c.needsPositioning,e=0,f=d?2:1,g=this;return function(){return++e!==f||(c&&(a.remove(c.element,"is-positioning-post-drag"),c.isPlacing=!1,c.copyPlaceRectPosition()),g.unstamp(b),g.sortItemsByPosition(),d&&g.emitEvent("dragItemPositioned",[g,c]),!0)}},i.prototype.bindDraggabillyEvents=function(a){a.on("dragStart",this.handleDraggabilly.dragStart),a.on("dragMove",this.handleDraggabilly.dragMove),a.on("dragEnd",this.handleDraggabilly.dragEnd)},i.prototype.bindUIDraggableEvents=function(a){a.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},i.Rect=d,i.Packer=e,i}"function"==typeof define&&define.amd?define("packery/js/packery",["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],b):"object"==typeof exports?module.exports=b(require("desandro-classie"),require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):a.Packery=b(a.classie,a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a,c,d){var e=a.create("packery"),f=e.prototype._getElementOffset,g=e.prototype._getMeasurement;b(e.prototype,c.prototype),e.prototype._getElementOffset=f,e.prototype._getMeasurement=g;var h=e.prototype._resetLayout;e.prototype._resetLayout=function(){this.packer=this.packer||new c.Packer,h.apply(this,arguments)};var i=e.prototype._getItemLayoutPosition;e.prototype._getItemLayoutPosition=function(a){return a.rect=a.rect||new c.Rect,i.call(this,a)};var j=e.prototype._manageStamp;return e.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,j.apply(this,arguments)},e.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a,c=this.options.isHorizontal?"innerHeight":"innerWidth";return b&&a[c]!==this.size[c]},e}"function"==typeof define&&define.amd?define(["isotope/js/layout-mode","packery/js/packery","get-size/get-size"],c):"object"==typeof exports?module.exports=c(require("isotope-layout/js/layout-mode"),require("packery"),require("get-size")):c(a.Isotope.LayoutMode,a.Packery,a.getSize)}(window),Object.create&&function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;(d=a.prototype=Object.create(e)).constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],(e=c?c+f:b)in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var c=a.options.inputClass;return new(c||(rb?N:sb?Q:qb?S:M))(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e==0,g=b&(Ab|Bb)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+" "+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?"cancel":a&hc?"end":a&gc?"move":a&fc?"start":""}function X(a){return a==Gb?"down":a==Fb?"up":a==Db?"left":a==Eb?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function hb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=["","webkit","moz","MS","ms","o"],jb=b.createElement("div"),kb="function",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb="ontouchstart"in a,rb=v(a,"PointerEvent")!==d,sb=qb&&pb.test(navigator.userAgent),tb="touch",vb="mouse",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=["x","y"],Lb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb="mousedown",Ob="mousemove mouseup";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:"pen",4:vb,5:"kinect"},Rb="pointerdown",Sb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Rb="MSPointerDown",Sb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,"pointerId");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub="touchstart",Vb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length==0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,"touchAction"),Zb=Yb!==d,$b="compute",_b="auto",ac="manipulation",bc="none",cc="pan-x",dc="pan-y";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|32)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:32}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;if(this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a,0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION="2.0.4",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},["rotate"]],[cb,{direction:Hb}],[$,{direction:Hb},["swipe"]],[db],[db,{event:"doubletap",taps:2},["tap"]],[ab]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],2===b.stopped||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:32,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):"undefined"!=typeof module&&module.exports?module.exports=eb:a.Hammer=eb}(window,document),function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"\t"===a||"\n"===a||"\f"===a||"\r"===a}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),(d=k(b,c))&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,(f=e.getAttribute("srcset"))&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):function(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}()}}function n(a){var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=function(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(""===(e=a.charAt(j)))return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],function(a){return!!(k.test(a)&&parseFloat(a)>=0)||!!l.test(a)||"0"===a||"-0"===a||"+0"===a}(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};a.console&&console.warn,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?function(){var c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){2===d.width&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return!a||_(a)},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return!a||A[a]},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b||Q.width}return O[a]},s.setRes=function(a){var b;if(a)for(var c=0,d=(b=s.parseSet(a)).length;d>c;c++)aa(b[c],a.sizes);return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],(l=o.curCan||j(b,k,a[0].set))&&l.set===a[0].set&&((n=F&&!b.complete&&l.res-.1>p)||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if((c=a[d]).res>=p){h=a[e=d-1]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if((c=f[b]).srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),(g=(q||j.src)&&H.test(j.srcset||""))||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),(c=c||d.test(a))&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),h=z.clientHeight;Z(a,"resize",function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}}(function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()},99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=function(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){return n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||void 0},onDomLoad:function(e){r(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,s=!1,o=e.setTimeout,u=e.clearTimeout,a=e.setInterval,f=e.clearInterval,l=e.JSON,c=e.alert,h=e.History=e.History||{},p=e.history;try{(s=e.sessionStorage).setItem("TEST","1"),s.removeItem("TEST")}catch(d){s=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return"undefined"!=typeof h.Adapter&&("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(d){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||r.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)f(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var i,s,o,u,a,e=void 0!==n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,t=r.getElementById("log");for(e?(u=Array.prototype.slice.call(arguments),i=u.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[i,u]):n.log.apply(n,[i,u])):i="\n"+arguments[0]+"\n",s=1,o=arguments.length;s<o;++s){if("object"==typeof(a=arguments[s])&&void 0!==l)try{a=l.stringify(a)}catch(f){}i+="\n"+a+"\n"}return t?(t.value+=i+"\n-----\n",t.scrollTop=t.scrollHeight-t.clientHeight):e||c(i),!0},h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},h.isInternetExplorer=function(){return h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},h.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},h.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),(n=n.replace(/\/+$/,""))&&(n+="/"),n},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){return((h.getState(!1,!1)||{}).url||h.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?h.getRootUrl()+e.replace(/^\/+/,""):"#"===r?h.getPageUrl().replace(/#.*/,"")+e:"?"===r?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),r=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return(e=e||r).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var n,t=h.extractId(e.url);if(!t)if(n=h.getStateString(e),"undefined"!=typeof h.stateToId[n])t=h.stateToId[n];else if("undefined"!=typeof h.store.stateToId[n])t=h.store.stateToId[n];else{for(;t=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[t]||"undefined"!=typeof h.store.idToState[t];);h.stateToId[n]=t,h.idToState[t]=e}return t},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=h.normalizeState(r)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||t},h.getStateString=function(e){var t,n;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},l.stringify(n)},h.getStateId=function(e){var t;return t=h.normalizeState(e),t.id},h.getHashByState=function(e){var t;return t=h.normalizeState(e),t.hash},h.extractId=function(e){var n,i;return i=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(i),n?n[1]||e:e,(n?String(n[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var r,i,n=null;return t=t||!1,(r=h.extractId(e))&&(n=h.getStateById(r)),n||(i=h.getFullUrl(e),(r=h.getIdByUrl(i)||!1)&&(n=h.getStateById(r)),!n&&t&&!h.isTraditionalAnchor(e)&&(n=h.createStateObject(null,null,i))),n},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||t},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var n;return n=h.extractState(e.url),n&&n.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var n,r,i,t=!1;return h.savedStates.length&&(n=e.id,r=h.getLastSavedState(),i=r.id,t=n===i),t},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,i;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),(n=h.extractState(e,!0))&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(i=h.getPageUrl(),h.pushState(null,null,i+"#"+e,!1)):r.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var n,t=e.title;t||(n=h.getStateByIndex(0))&&n.url===e.url&&(t=n.title||h.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=t.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=t,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){u(h.busy.timeout);var t=function(){var e,n,r;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)0!==(n=h.queues[e]).length&&(r=n.shift(),h.fireQueueItem(r),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(u(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref());if(!h.isLastSavedState(t))return t||h.createStateObject(),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var v=function(){};h.pushState=h.pushState||v,h.replaceState=h.replaceState||v}else h.onPopState=function(t,n){var s,o,r=!1,i=!1;return h.doubleCheckComplete(),(s=h.getHash())?((o=h.extractState(s||h.getLocationHref(),!0))?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,(i=r?h.getStateById(r):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()))||(i=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(i)?(h.busy(!1),!1):(h.storeState(i),h.saveState(i),h.setTitle(i),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,r,i){if(h.getHashByUrl(r)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var s=h.createStateObject(t,n,r);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,p.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=l.parse(s.getItem("History.store"))||{}}catch(m){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=l.parse(s.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=l.stringify(e);try{s.setItem("History.store",n)}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)throw i;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.intervalList.push(a(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(a(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==i.vendor&&"Mozilla"!==(i.appCodeName||"")||(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},(!h.options||!h.options.delayInit)&&h.init()}(window),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&(h=e,h.fn.imagesLoaded=function(t,e){return new o(this,t,e).jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});